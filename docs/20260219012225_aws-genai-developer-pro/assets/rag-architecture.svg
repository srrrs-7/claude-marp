<svg viewBox="0 0 900 460" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect x="0" y="0" width="900" height="460" fill="#f8faff" rx="12"/>
  <text x="450" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#1a1a2e">RAG アーキテクチャ（Retrieval-Augmented Generation）</text>

  <!-- ===== Ingestion Path (top) ===== -->
  <text x="450" y="58" text-anchor="middle" font-size="13" font-weight="600" fill="#888">【インジェスション（事前処理）】</text>

  <!-- Documents -->
  <rect x="20" y="70" width="100" height="55" fill="#E3F2FD" rx="8" style="filter:drop-shadow(1px 1px 3px rgba(0,0,0,0.1))"/>
  <text x="70" y="96" text-anchor="middle" font-size="12" font-weight="bold" fill="#1565C0">ドキュメント</text>
  <text x="70" y="114" text-anchor="middle" font-size="10" fill="#555">S3, PDF, URL</text>

  <!-- Arrow -->
  <line x1="120" y1="97" x2="148" y2="97" stroke="#90A4AE" stroke-width="2"/>
  <polygon points="148,92 160,97 148,102" fill="#90A4AE"/>

  <!-- Chunking -->
  <rect x="160" y="70" width="100" height="55" fill="#E8F5E9" rx="8"/>
  <text x="210" y="96" text-anchor="middle" font-size="12" font-weight="bold" fill="#2E7D32">チャンキング</text>
  <text x="210" y="114" text-anchor="middle" font-size="10" fill="#555">分割・前処理</text>

  <!-- Arrow -->
  <line x1="260" y1="97" x2="288" y2="97" stroke="#90A4AE" stroke-width="2"/>
  <polygon points="288,92 300,97 288,102" fill="#90A4AE"/>

  <!-- Embedding Model -->
  <rect x="300" y="70" width="120" height="55" fill="#FFF3E0" rx="8"/>
  <text x="360" y="92" text-anchor="middle" font-size="12" font-weight="bold" fill="#E65100">エンベディング</text>
  <text x="360" y="108" text-anchor="middle" font-size="10" fill="#E65100">モデル</text>
  <text x="360" y="122" text-anchor="middle" font-size="10" fill="#888">Titan Embeddings</text>

  <!-- Arrow -->
  <line x1="420" y1="97" x2="448" y2="97" stroke="#90A4AE" stroke-width="2"/>
  <polygon points="448,92 460,97 448,102" fill="#90A4AE"/>

  <!-- Vector DB -->
  <rect x="460" y="60" width="130" height="75" fill="#7B1FA2" rx="8" style="filter:drop-shadow(2px 2px 5px rgba(0,0,0,0.15))"/>
  <text x="525" y="90" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ベクトル DB</text>
  <text x="525" y="108" text-anchor="middle" font-size="10" fill="#E1BEE7">OpenSearch / Aurora</text>
  <text x="525" y="124" text-anchor="middle" font-size="10" fill="#E1BEE7">Pinecone / Redis</text>

  <!-- ===== Retrieval Path (bottom) ===== -->
  <text x="450" y="172" text-anchor="middle" font-size="13" font-weight="600" fill="#888">【推論時（クエリ処理）】</text>

  <!-- User Query -->
  <rect x="20" y="190" width="100" height="55" fill="#E8EAF6" rx="8" style="filter:drop-shadow(1px 1px 3px rgba(0,0,0,0.1))"/>
  <text x="70" y="214" text-anchor="middle" font-size="12" font-weight="bold" fill="#3949AB">ユーザー</text>
  <text x="70" y="232" text-anchor="middle" font-size="10" fill="#555">クエリ入力</text>

  <!-- Arrow user→embed -->
  <line x1="120" y1="217" x2="248" y2="217" stroke="#1565C0" stroke-width="2"/>
  <polygon points="248,212 260,217 248,222" fill="#1565C0"/>

  <!-- Query Embedding -->
  <rect x="260" y="190" width="120" height="55" fill="#FFF3E0" rx="8"/>
  <text x="320" y="212" text-anchor="middle" font-size="12" font-weight="bold" fill="#E65100">クエリ</text>
  <text x="320" y="228" text-anchor="middle" font-size="12" font-weight="bold" fill="#E65100">エンベディング</text>
  <text x="320" y="244" text-anchor="middle" font-size="10" fill="#888">ベクトル変換</text>

  <!-- Arrow embed→vector search -->
  <line x1="380" y1="217" x2="448" y2="200" stroke="#1565C0" stroke-width="2"/>
  <polygon points="442,195 455,197 448,208" fill="#1565C0"/>

  <!-- Similarity Search (from Vector DB) -->
  <line x1="525" y1="135" x2="525" y2="188" stroke="#7B1FA2" stroke-width="2" stroke-dasharray="5,4"/>
  <polygon points="520,188 525,200 530,188" fill="#7B1FA2"/>

  <!-- Relevant Chunks -->
  <rect x="620" y="190" width="120" height="55" fill="#F3E5F5" rx="8"/>
  <text x="680" y="212" text-anchor="middle" font-size="12" font-weight="bold" fill="#6A1B9A">関連チャンク</text>
  <text x="680" y="228" text-anchor="middle" font-size="10" fill="#888">Top-K 件取得</text>
  <text x="680" y="244" text-anchor="middle" font-size="10" fill="#888">コサイン類似度</text>

  <!-- Arrow chunks→LLM -->
  <line x1="740" y1="217" x2="768" y2="217" stroke="#1565C0" stroke-width="2"/>
  <polygon points="768,212 780,217 768,222" fill="#1565C0"/>

  <!-- LLM (Bedrock) -->
  <rect x="780" y="175" width="100" height="90" fill="#1565C0" rx="10" style="filter:drop-shadow(2px 2px 5px rgba(0,0,0,0.15))"/>
  <text x="830" y="210" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Amazon</text>
  <text x="830" y="228" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Bedrock</text>
  <text x="830" y="248" text-anchor="middle" font-size="10" fill="#90CAF9">Claude / Titan</text>

  <!-- User query also goes to LLM -->
  <line x1="120" y1="232" x2="779" y2="246" stroke="#1565C0" stroke-width="1.5" stroke-dasharray="6,4"/>

  <!-- LLM → Response -->
  <line x1="830" y1="265" x2="830" y2="300" stroke="#1565C0" stroke-width="2"/>
  <polygon points="825,300 830,312 835,300" fill="#1565C0"/>

  <!-- Response -->
  <rect x="720" y="312" width="220" height="50" fill="#43A047" rx="8" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.12))"/>
  <text x="830" y="335" text-anchor="middle" font-size="13" font-weight="bold" fill="white">根拠付き回答（引用付き）</text>
  <text x="830" y="353" text-anchor="middle" font-size="11" fill="#C8E6C9">ハルシネーション軽減</text>

  <!-- Benefits box -->
  <rect x="20" y="312" width="340" height="100" fill="#E8F5E9" rx="10"/>
  <text x="190" y="335" text-anchor="middle" font-size="13" font-weight="bold" fill="#2E7D32">RAG のメリット</text>
  <text x="35" y="355" font-size="11" fill="#444">✅ 知識カットオフを超えた最新情報の提供</text>
  <text x="35" y="373" font-size="11" fill="#444">✅ 社内固有データへの対応（Fine-tuning 不要）</text>
  <text x="35" y="391" font-size="11" fill="#444">✅ 回答の根拠（ソース）を明示できる</text>
  <text x="35" y="409" font-size="11" fill="#444">✅ ハルシネーションを大幅に軽減</text>
</svg>
