<svg viewBox="0 0 900 440" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect x="0" y="0" width="900" height="440" fill="#f8faff" rx="12"/>
  <text x="450" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#1a1a2e">Amazon Bedrock Agents — ReAct フロー</text>

  <!-- User -->
  <rect x="20" y="60" width="110" height="60" fill="#E8EAF6" rx="10" style="filter:drop-shadow(1px 1px 3px rgba(0,0,0,0.1))"/>
  <text x="75" y="86" text-anchor="middle" font-size="14" font-weight="bold" fill="#3949AB">ユーザー</text>
  <text x="75" y="106" text-anchor="middle" font-size="10" fill="#666">タスク依頼</text>

  <!-- Arrow user → Agent -->
  <line x1="130" y1="90" x2="198" y2="90" stroke="#1565C0" stroke-width="2"/>
  <polygon points="198,85 210,90 198,95" fill="#1565C0"/>

  <!-- Agent (center) -->
  <rect x="210" y="50" width="170" height="80" fill="#1565C0" rx="12" style="filter:drop-shadow(2px 2px 6px rgba(0,0,0,0.2))"/>
  <text x="295" y="80" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Bedrock Agent</text>
  <text x="295" y="98" text-anchor="middle" font-size="11" fill="#90CAF9">（FM が推論・計画）</text>
  <text x="295" y="116" text-anchor="middle" font-size="10" fill="#BBD">ReAct パターン</text>

  <!-- ReAct Loop -->
  <!-- Thought box -->
  <rect x="450" y="55" width="160" height="50" fill="#FFF9C4" rx="8"/>
  <text x="530" y="76" text-anchor="middle" font-size="12" font-weight="bold" fill="#F57F17">① Thought（推論）</text>
  <text x="530" y="94" text-anchor="middle" font-size="10" fill="#795548">「何をすべきか考える」</text>

  <!-- Arrow Agent → Thought -->
  <line x1="380" y1="80" x2="448" y2="80" stroke="#555" stroke-width="2"/>
  <polygon points="448,75 460,80 448,85" fill="#555"/>

  <!-- Action box -->
  <rect x="450" y="128" width="160" height="50" fill="#FCE4EC" rx="8"/>
  <text x="530" y="149" text-anchor="middle" font-size="12" font-weight="bold" fill="#C62828">② Action（行動）</text>
  <text x="530" y="167" text-anchor="middle" font-size="10" fill="#795548">「ツール・APIを呼び出す」</text>

  <!-- Arrow Thought → Action -->
  <line x1="530" y1="105" x2="530" y2="126" stroke="#555" stroke-width="2"/>
  <polygon points="525,126 530,138 535,126" fill="#555"/>

  <!-- Observation box -->
  <rect x="450" y="200" width="160" height="50" fill="#E8F5E9" rx="8"/>
  <text x="530" y="221" text-anchor="middle" font-size="12" font-weight="bold" fill="#2E7D32">③ Observation（観察）</text>
  <text x="530" y="239" text-anchor="middle" font-size="10" fill="#795548">「結果を受け取る」</text>

  <!-- Arrow Action → Observation -->
  <line x1="530" y1="178" x2="530" y2="198" stroke="#555" stroke-width="2"/>
  <polygon points="525,198 530,210 535,198" fill="#555"/>

  <!-- Loop arrow back to Thought -->
  <line x1="450" y1="225" x2="420" y2="225" stroke="#FB8C00" stroke-width="2" stroke-dasharray="5,4"/>
  <line x1="420" y1="225" x2="420" y2="80" stroke="#FB8C00" stroke-width="2" stroke-dasharray="5,4"/>
  <line x1="420" y1="80" x2="448" y2="80" stroke="#FB8C00" stroke-width="2" stroke-dasharray="5,4"/>
  <text x="406" y="156" text-anchor="middle" font-size="10" fill="#FB8C00" font-weight="bold">繰り返し</text>
  <text x="406" y="168" text-anchor="middle" font-size="10" fill="#FB8C00">（必要な</text>
  <text x="406" y="180" text-anchor="middle" font-size="10" fill="#FB8C00">だけ）</text>

  <!-- Tools -->
  <rect x="660" y="55" width="220" height="200" fill="#F3E5F5" rx="10"/>
  <text x="770" y="80" text-anchor="middle" font-size="13" font-weight="bold" fill="#6A1B9A">Action Groups（ツール）</text>

  <rect x="670" y="92" width="200" height="36" fill="#AB47BC" rx="6"/>
  <text x="770" y="109" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Lambda 関数</text>
  <text x="770" y="122" text-anchor="middle" font-size="10" fill="#E1BEE7">OpenAPI スキーマで定義</text>

  <rect x="670" y="136" width="200" height="36" fill="#7B1FA2" rx="6"/>
  <text x="770" y="153" text-anchor="middle" font-size="11" fill="white" font-weight="bold">Knowledge Bases</text>
  <text x="770" y="166" text-anchor="middle" font-size="10" fill="#E1BEE7">社内ドキュメント検索</text>

  <rect x="670" y="180" width="200" height="36" fill="#6A1B9A" rx="6"/>
  <text x="770" y="197" text-anchor="middle" font-size="11" fill="white" font-weight="bold">外部 API 呼び出し</text>
  <text x="770" y="210" text-anchor="middle" font-size="10" fill="#E1BEE7">DB・REST API など</text>

  <rect x="670" y="224" width="200" height="22" fill="#4A148C" rx="4"/>
  <text x="770" y="239" text-anchor="middle" font-size="10" fill="#E1BEE7">Return Control（呼び出し確認）</text>

  <!-- Arrow Action → Tools -->
  <line x1="610" y1="153" x2="658" y2="153" stroke="#6A1B9A" stroke-width="2"/>
  <polygon points="658,148 670,153 658,158" fill="#6A1B9A"/>

  <!-- Arrow Tools → Observation (return) -->
  <line x1="660" y1="180" x2="638" y2="225" stroke="#6A1B9A" stroke-width="1.5" stroke-dasharray="5,4"/>
  <polygon points="632,220 638,232 644,223" fill="#6A1B9A"/>

  <!-- Final Response -->
  <rect x="210" y="300" width="170" height="50" fill="#43A047" rx="10"/>
  <text x="295" y="322" text-anchor="middle" font-size="13" font-weight="bold" fill="white">最終回答を生成</text>
  <text x="295" y="340" text-anchor="middle" font-size="10" fill="#C8E6C9">タスク完了・ユーザーへ返答</text>

  <!-- Agent → Final Response -->
  <line x1="295" y1="130" x2="295" y2="298" stroke="#1565C0" stroke-width="2" stroke-dasharray="5,4"/>
  <polygon points="290,298 295,310 300,298" fill="#43A047"/>

  <!-- Final → User -->
  <line x1="210" y1="325" x2="132" y2="325" stroke="#43A047" stroke-width="2"/>
  <polygon points="132,320 120,325 132,330" fill="#43A047"/>

  <!-- Use cases -->
  <rect x="20" y="370" width="860" height="58" fill="#E3F2FD" rx="8"/>
  <text x="450" y="390" text-anchor="middle" font-size="12" font-weight="bold" fill="#1565C0">ユースケース</text>
  <text x="130" y="412" text-anchor="middle" font-size="11" fill="#444">カスタマーサポート自動化</text>
  <text x="320" y="412" text-anchor="middle" font-size="11" fill="#444">社内 Q&amp;A ボット</text>
  <text x="510" y="412" text-anchor="middle" font-size="11" fill="#444">コード生成・レビュー</text>
  <text x="710" y="412" text-anchor="middle" font-size="11" fill="#444">ワークフロー自動化</text>
  <text x="130" y="424" text-anchor="middle" font-size="10" fill="#888">（チケット自動回答）</text>
  <text x="320" y="424" text-anchor="middle" font-size="10" fill="#888">（KB + Agents 連携）</text>
  <text x="510" y="424" text-anchor="middle" font-size="10" fill="#888">（GitHub 連携）</text>
  <text x="710" y="424" text-anchor="middle" font-size="10" fill="#888">（承認フロー自動化）</text>
</svg>
