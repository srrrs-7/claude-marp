<svg viewBox="0 0 1000 380" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;background:#0f172a;border-radius:12px">
  <text x="500" y="28" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold" font-family="sans-serif">モニタリング・可観測性アーキテクチャ</text>
  <!-- Layer 1: Agents -->
  <rect x="30" y="50" width="940" height="70" rx="8" fill="#1e293b" stroke="#334155" stroke-width="1.5"/>
  <text x="50" y="72" fill="#94a3b8" font-size="12" font-weight="bold" font-family="sans-serif">エージェント層</text>
  <rect x="80" y="80" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#38bdf8" stroke-width="1.5"/>
  <text x="140" y="100" text-anchor="middle" fill="#38bdf8" font-size="11" font-family="sans-serif">Supervisor</text>
  <rect x="220" y="80" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#7dd3fc" stroke-width="1.5"/>
  <text x="280" y="100" text-anchor="middle" fill="#7dd3fc" font-size="11" font-family="sans-serif">Researcher</text>
  <rect x="360" y="80" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#c084fc" stroke-width="1.5"/>
  <text x="420" y="100" text-anchor="middle" fill="#c084fc" font-size="11" font-family="sans-serif">Writer</text>
  <rect x="500" y="80" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#34d399" stroke-width="1.5"/>
  <text x="560" y="100" text-anchor="middle" fill="#34d399" font-size="11" font-family="sans-serif">Reviewer</text>
  <rect x="640" y="80" width="120" height="30" rx="5" fill="#1e3a5f" stroke="#fdba74" stroke-width="1.5"/>
  <text x="700" y="100" text-anchor="middle" fill="#fdba74" font-size="11" font-family="sans-serif">Tool Executor</text>
  <rect x="780" y="80" width="160" height="30" rx="5" fill="#1e293b" stroke="#64748b" stroke-width="1"/>
  <text x="860" y="100" text-anchor="middle" fill="#64748b" font-size="11" font-family="sans-serif">+ N more agents...</text>
  <!-- Arrow down: instrumentation -->
  <line x1="500" y1="120" x2="500" y2="148" stroke="#fbbf24" stroke-width="2"/>
  <polygon points="494,148 500,160 506,148" fill="#fbbf24"/>
  <text x="515" y="140" fill="#fbbf24" font-size="10" font-family="sans-serif">instrumentation</text>
  <!-- Layer 2: OpenTelemetry -->
  <rect x="200" y="160" width="600" height="55" rx="8" fill="#1e2d3d" stroke="#60a5fa" stroke-width="2"/>
  <text x="500" y="183" text-anchor="middle" fill="#60a5fa" font-size="14" font-weight="bold" font-family="sans-serif">OpenTelemetry SDK</text>
  <text x="280" y="203" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">Traces（スパン）</text>
  <text x="500" y="203" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">Metrics（コスト/レイテンシ）</text>
  <text x="720" y="203" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">Logs（構造化ログ）</text>
  <!-- Arrow down: export -->
  <line x1="500" y1="215" x2="500" y2="243" stroke="#64748b" stroke-width="2"/>
  <polygon points="494,243 500,255 506,243" fill="#64748b"/>
  <!-- Layer 3: Backends - 3 columns -->
  <!-- LangSmith -->
  <rect x="50" y="255" width="260" height="85" rx="8" fill="#1e293b" stroke="#fbbf24" stroke-width="2"/>
  <text x="180" y="278" text-anchor="middle" fill="#fbbf24" font-size="13" font-weight="bold" font-family="sans-serif">LangSmith</text>
  <text x="180" y="296" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">トレース可視化・デバッグ</text>
  <text x="180" y="312" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">失敗トレースのフィルタリング</text>
  <text x="180" y="328" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">プロンプト比較・A/Bテスト</text>
  <!-- Arize/Prometheus -->
  <rect x="370" y="255" width="260" height="85" rx="8" fill="#1e293b" stroke="#34d399" stroke-width="2"/>
  <text x="500" y="278" text-anchor="middle" fill="#34d399" font-size="13" font-weight="bold" font-family="sans-serif">Arize Phoenix / Prometheus</text>
  <text x="500" y="296" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">メトリクス・アラート管理</text>
  <text x="500" y="312" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">コスト推移・エラー率・p99レイテンシ</text>
  <text x="500" y="328" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">Grafana ダッシュボード連携</text>
  <!-- CloudWatch / Datadog -->
  <rect x="690" y="255" width="260" height="85" rx="8" fill="#1e293b" stroke="#c084fc" stroke-width="2"/>
  <text x="820" y="278" text-anchor="middle" fill="#c084fc" font-size="13" font-weight="bold" font-family="sans-serif">CloudWatch / Datadog</text>
  <text x="820" y="296" text-anchor="middle" fill="#94a3b8" font-size="11" font-family="sans-serif">インフラ・APM監視</text>
  <text x="820" y="312" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">APIコスト予算アラート</text>
  <text x="820" y="328" text-anchor="middle" fill="#64748b" font-size="10" font-family="sans-serif">SLO/SLAダッシュボード</text>
  <!-- Fan out arrows from OTel to backends -->
  <line x1="350" y1="215" x2="180" y2="253" stroke="#64748b" stroke-width="1.5"/>
  <polygon points="173,247 180,259 187,247" fill="#64748b"/>
  <line x1="500" y1="215" x2="500" y2="253" stroke="#64748b" stroke-width="1.5"/>
  <polygon points="494,253 500,265 506,253" fill="#64748b"/>
  <line x1="650" y1="215" x2="820" y2="253" stroke="#64748b" stroke-width="1.5"/>
  <polygon points="813,247 820,259 827,247" fill="#64748b"/>
  <!-- Key metrics label -->
  <text x="50" y="358" fill="#f87171" font-size="11" font-weight="bold" font-family="sans-serif">重要メトリクス:</text>
  <text x="175" y="358" fill="#94a3b8" font-size="11" font-family="sans-serif">Token消費量 / API呼び出し回数 / エラー率 / p50/p99レイテンシ / コスト/リクエスト</text>
</svg>
