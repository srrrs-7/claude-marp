---
marp: true
theme: gaia
class: invert
size: 16:9
paginate: true
header: "熱力学とソフトウェア工学"
footer: "© 2026"
style: |
  section pre code { font-size: 0.58em; line-height: 1.4; }
  
---

<!-- _class: lead -->
# エントロピーは技術的負債と
同じ法則に従う

- 熱力学第二法則でコードの腐敗を語る
- 無秩序は自然な状態である
- リファクタリングはエントロピーに逆らう行為


---

# アジェンダ

- 1. 熱力学第二法則とエントロピー
- 2. ソフトウェアエントロピー（ソフトウェア腐敗）
- 3. 技術的負債との数学的類似
- 4. エントロピーを減らすコスト
- 5. 設計原則への昇華


---

<!-- _class: lead -->
# 熱力学第二法則


---

# 宇宙の根本法則：無秩序は増大する

- **熱力学第二法則：**
- 孤立系のエントロピーは時間とともに増大するか、一定である
- → **自然に秩序が生まれることはない**
- ---
- 日常の例：
- - コーヒーは冷める（熱は高→低に流れる）
- - 部屋は散らかる（整理しないと乱雑になる）
- - 砂糖は溶けるが、自然には結晶に戻らない
- ---
- **逆は起きない：** 秩序を作るには外からエネルギーを投入しなければならない


---

<!-- _class: lead -->
# ソフトウェアエントロピー


---

# コードは触るたびに複雑になる

- **ソフトウェアエントロピー（別名：ソフトウェア腐敗）の法則：**
- 修正を加えるたびにシステムは複雑になる傾向がある
- ---
- **なぜか：**
- - バグ修正が新たな条件分岐を生む
- - 機能追加が想定外の依存関係を生む
- - 急ぎの修正がアーキテクチャを侵食する
- - 担当者交代で知識が失われる
- ---
- Lehman の法則（1974）：「継続的に使われるソフトウェアは、その複雑性が増大するか、複雑性を減らす活動に投資しなければならない」


---

# 技術的負債とエントロピーの類似

| 熱力学 | ソフトウェア工学 |
|:---|:---|
| エントロピー増大 | コードの複雑化・腐敗 |
| 孤立系 | テストなし・レビューなし |
| 外部エネルギー投入 | リファクタリング・設計改善 |
| 熱死（最大エントロピー） | 保守不能なレガシーコード |
| 局所的秩序（生命） | 良い設計パターン |
| エントロピー生成最小原理 | YAGNI・KISS原則 |


---

<!-- _class: lead -->
# 技術的負債の「利子率」


---

# 負債は複利で増加する

- Ward Cunningham（技術的負債の提唱者）の本来の意味：
- 「素早く出荷するために今の理解で書くことは、将来再解釈するコストを生む」
- ---
- **負債の複利計算：**
- 乱雑なコードに変更を加えると → さらに乱雑になる
- さらに乱雑なコードは → 変更コストが上昇する
- コストが上昇すると → リファクタリングが後回しになる
- → **技術的負債スパイラル**
- ---
- McKinsey調査（2022）：技術的負債の解消に費やす時間は開発時間の10-20%


---

# エントロピーを減らすには外部エネルギーが必要

- **生命はどうやってエントロピーに逆らうか：**
- 外部から エネルギー（食物）を取り込み、内部秩序を維持する
- 同時に廃熱（エントロピー）を外に排出する
- ---
- **ソフトウェアチームに対応させると：**
- - 外部エネルギー = リファクタリング時間・設計投資
- - 内部秩序 = 綺麗なアーキテクチャ・テスト
- - 廃熱の排出 = 古いコードの削除・不要機能の廃止
- ---
- 「リファクタリングをしないチームは、いつか熱死する」


---

<!-- _class: lead -->
# エントロピーと戦う設計原則


---

# ボーイスカウトルール

- 「来た時よりも美しく」
- Robert C. Martin（Uncle Bob）が提唱
- ---
- コードに触れるたびに、**少しだけ改善する**：
- - 変数名を1つわかりやすくする
- - 重複を1つ排除する
- - テストを1つ追加する
- ---
- これは熱力学的に言えば：
- **触れるたびにエントロピーを少しずつ輸出する**
- 大規模リファクタリングより持続可能


---

# まとめ：宇宙の法則とコード管理

- ✅ **無秩序は宇宙の自然な方向** — コードも放置すれば必ず腐る
- ✅ **秩序には外部エネルギーが必要** — リファクタリング時間は投資
- ✅ **技術的負債は複利で増える** — 早期返済が最も経済合理的
- ✅ **ボーイスカウトルール** — 触れるたびに少しずつ改善する
- 
- 「良いコードは維持されるものではなく、継続的に更新されるものだ」

