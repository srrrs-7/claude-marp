<svg viewBox="0 0 900 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="500" fill="#0f172a"/>
  <text x="450" y="26" text-anchor="middle" fill="#f1f5f9" font-size="16" font-weight="bold" font-family="sans-serif">リアルタイム推論パターン</text>

  <!-- Client -->
  <rect x="20" y="180" width="100" height="60" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="70" y="205" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">Mobile / Web</text>
  <text x="70" y="220" text-anchor="middle" fill="#3b82f6" font-size="10" font-weight="bold" font-family="sans-serif">Client</text>
  <text x="70" y="235" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">HTTPS</text>

  <!-- Arrow to API GW -->
  <line x1="120" y1="210" x2="155" y2="210" stroke="#3b82f6" stroke-width="2"/>
  <polygon points="155,206 163,210 155,214" fill="#3b82f6"/>

  <!-- API Gateway -->
  <rect x="163" y="180" width="110" height="60" rx="8" fill="#1e293b" stroke="#a855f7" stroke-width="2"/>
  <text x="218" y="200" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">API Gateway</text>
  <text x="218" y="215" text-anchor="middle" fill="#a855f7" font-size="9" font-family="sans-serif">REST API</text>
  <text x="218" y="228" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">Cognito認証</text>

  <!-- Arrow to Lambda pre -->
  <line x1="273" y1="210" x2="308" y2="210" stroke="#a855f7" stroke-width="2"/>
  <polygon points="308,206 316,210 308,214" fill="#a855f7"/>

  <!-- Lambda pre-processing -->
  <rect x="316" y="165" width="120" height="90" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="2"/>
  <text x="376" y="188" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">Lambda</text>
  <text x="376" y="202" text-anchor="middle" fill="#f97316" font-size="9" font-weight="bold" font-family="sans-serif">前処理</text>
  <text x="376" y="218" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">入力バリデーション</text>
  <text x="376" y="232" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">特徴量取得</text>
  <text x="376" y="246" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">ElastiCache確認</text>

  <!-- Arrow from Lambda to Feature Store -->
  <line x1="376" y1="165" x2="376" y2="130" stroke="#f97316" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="372,130 376,122 380,130" fill="#f97316"/>
  <rect x="300" y="90" width="150" height="32" rx="6" fill="#1e293b" stroke="#22c55e" stroke-width="1"/>
  <text x="375" y="107" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">Feature Store (Online)</text>
  <text x="375" y="119" text-anchor="middle" fill="#22c55e" font-size="9" font-family="sans-serif">DynamoDB 低レイテンシ</text>

  <!-- Arrow from Lambda to SageMaker -->
  <line x1="436" y1="210" x2="480" y2="210" stroke="#f97316" stroke-width="2"/>
  <polygon points="480,206 488,210 480,214" fill="#f97316"/>

  <!-- SageMaker Endpoint -->
  <rect x="488" y="165" width="130" height="90" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
  <text x="553" y="188" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">SageMaker</text>
  <text x="553" y="202" text-anchor="middle" fill="#22c55e" font-size="10" font-weight="bold" font-family="sans-serif">Real-time Endpoint</text>
  <text x="553" y="220" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">InvokeEndpoint</text>
  <text x="553" y="236" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">AutoScaling対応</text>
  <text x="553" y="250" text-anchor="middle" fill="#3b82f6" font-size="9" font-family="sans-serif">Multi-variant A/B</text>

  <!-- Arrow to Lambda post -->
  <line x1="618" y1="210" x2="660" y2="210" stroke="#22c55e" stroke-width="2"/>
  <polygon points="660,206 668,210 660,214" fill="#22c55e"/>

  <!-- Lambda post-processing -->
  <rect x="668" y="165" width="120" height="90" rx="8" fill="#1e293b" stroke="#14b8a6" stroke-width="2"/>
  <text x="728" y="188" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">Lambda</text>
  <text x="728" y="202" text-anchor="middle" fill="#14b8a6" font-size="9" font-weight="bold" font-family="sans-serif">後処理</text>
  <text x="728" y="218" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">レスポンス変換</text>
  <text x="728" y="232" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">ロギング</text>
  <text x="728" y="246" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">Cache更新</text>

  <!-- Arrow to API GW response -->
  <line x1="788" y1="210" x2="820" y2="210" stroke="#14b8a6" stroke-width="2"/>
  <polygon points="820,206 828,210 820,214" fill="#14b8a6"/>

  <!-- API GW -->
  <rect x="828" y="180" width="60" height="60" rx="8" fill="#1e293b" stroke="#a855f7" stroke-width="2"/>
  <text x="858" y="205" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">API GW</text>
  <text x="858" y="220" text-anchor="middle" fill="#a855f7" font-size="9" font-family="sans-serif">Response</text>
  <text x="858" y="235" text-anchor="middle" fill="#94a3b8" font-size="9" font-family="sans-serif">→ Client</text>

  <!-- ElastiCache -->
  <rect x="488" y="90" width="130" height="32" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="1"/>
  <text x="553" y="107" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">ElastiCache (Redis)</text>
  <text x="553" y="119" text-anchor="middle" fill="#f97316" font-size="9" font-family="sans-serif">結果キャッシュ (optional)</text>
  <line x1="553" y1="122" x2="553" y2="165" stroke="#f97316" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="549,165 553,173 557,165" fill="#f97316"/>

  <!-- Monitoring section at bottom -->
  <rect x="20" y="300" width="860" height="120" rx="8" fill="#1e293b"/>
  <text x="450" y="320" text-anchor="middle" fill="#3b82f6" font-size="13" font-weight="bold" font-family="sans-serif">モニタリング・可観測性</text>

  <rect x="35" y="330" width="200" height="78" rx="6" fill="#0f172a"/>
  <text x="135" y="350" text-anchor="middle" fill="#22c55e" font-size="11" font-weight="bold" font-family="sans-serif">CloudWatch</text>
  <text x="45" y="367" fill="#94a3b8" font-size="10" font-family="sans-serif">- Invocations カウント</text>
  <text x="45" y="381" fill="#94a3b8" font-size="10" font-family="sans-serif">- ModelLatency (ms)</text>
  <text x="45" y="395" fill="#94a3b8" font-size="10" font-family="sans-serif">- ErrorRate / 5XX</text>

  <rect x="248" y="330" width="200" height="78" rx="6" fill="#0f172a"/>
  <text x="348" y="350" text-anchor="middle" fill="#a855f7" font-size="11" font-weight="bold" font-family="sans-serif">X-Ray トレーシング</text>
  <text x="258" y="367" fill="#94a3b8" font-size="10" font-family="sans-serif">- E2E レイテンシ分析</text>
  <text x="258" y="381" fill="#94a3b8" font-size="10" font-family="sans-serif">- Lambda実行時間</text>
  <text x="258" y="395" fill="#94a3b8" font-size="10" font-family="sans-serif">- ボトルネック特定</text>

  <rect x="462" y="330" width="200" height="78" rx="6" fill="#0f172a"/>
  <text x="562" y="350" text-anchor="middle" fill="#f97316" font-size="11" font-weight="bold" font-family="sans-serif">Model Monitor</text>
  <text x="472" y="367" fill="#94a3b8" font-size="10" font-family="sans-serif">- データ品質監視</text>
  <text x="472" y="381" fill="#94a3b8" font-size="10" font-family="sans-serif">- モデル品質ドリフト</text>
  <text x="472" y="395" fill="#94a3b8" font-size="10" font-family="sans-serif">- バイアスドリフト</text>

  <rect x="676" y="330" width="194" height="78" rx="6" fill="#0f172a"/>
  <text x="773" y="350" text-anchor="middle" fill="#14b8a6" font-size="11" font-weight="bold" font-family="sans-serif">Cost &amp; Security</text>
  <text x="686" y="367" fill="#94a3b8" font-size="10" font-family="sans-serif">- Cost Explorer</text>
  <text x="686" y="381" fill="#94a3b8" font-size="10" font-family="sans-serif">- WAF / Shield</text>
  <text x="686" y="395" fill="#94a3b8" font-size="10" font-family="sans-serif">- VPC + PrivateLink</text>

  <!-- Label arrow above main flow -->
  <text x="450" y="142" text-anchor="middle" fill="#94a3b8" font-size="10" font-family="sans-serif">推論フロー (同期)</text>
  <line x1="120" y1="148" x2="780" y2="148" stroke="#334155" stroke-width="1" stroke-dasharray="4,3"/>
</svg>
