<svg viewBox="0 0 900 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="500" fill="#0f172a"/>

  <text x="450" y="32" text-anchor="middle" font-family="sans-serif" font-size="16" font-weight="bold" fill="#f1f5f9">Model Registry ワークフロー</text>

  <!-- Phase 1: Training -->
  <rect x="20" y="48" width="180" height="130" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="110" y="68" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#3b82f6">Training Phase</text>

  <rect x="35" y="78" width="150" height="30" rx="4" fill="#1e3a5f"/>
  <text x="110" y="97" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#f1f5f9">Training Job</text>

  <line x1="110" y1="108" x2="110" y2="118" stroke="#94a3b8" stroke-width="1.5"/>
  <polygon points="105,118 110,128 115,118" fill="#94a3b8"/>

  <rect x="35" y="128" width="150" height="30" rx="4" fill="#1a2a4a"/>
  <text x="110" y="147" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#94a3b8">Model Artifacts (S3)</text>
  <text x="110" y="162" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#f1f5f9">model.tar.gz</text>

  <!-- Arrow to Register -->
  <line x1="200" y1="113" x2="238" y2="113" stroke="#94a3b8" stroke-width="2"/>
  <polygon points="238,108 250,113 238,118" fill="#94a3b8"/>

  <!-- Phase 2: Register -->
  <rect x="250" y="48" width="190" height="130" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="2"/>
  <text x="345" y="68" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#f97316">Register</text>

  <rect x="265" y="78" width="160" height="44" rx="4" fill="#2a1e0a"/>
  <text x="345" y="96" text-anchor="middle" font-family="sans-serif" font-size="10" font-weight="bold" fill="#f97316">Model Package Group</text>
  <text x="345" y="112" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#94a3b8">バージョン履歴コンテナ</text>

  <line x1="345" y1="122" x2="345" y2="132" stroke="#94a3b8" stroke-width="1.5"/>
  <polygon points="340,132 345,142 350,132" fill="#94a3b8"/>

  <rect x="265" y="142" width="160" height="26" rx="4" fill="#2a2010"/>
  <text x="345" y="159" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#f97316">Model Package v1.0</text>
  <text x="265" y="175" font-family="sans-serif" font-size="8" fill="#94a3b8">  Status: PendingManualApproval</text>

  <!-- Arrow to Approval -->
  <line x1="440" y1="113" x2="478" y2="113" stroke="#94a3b8" stroke-width="2"/>
  <polygon points="478,108 490,113 478,118" fill="#94a3b8"/>

  <!-- Phase 3: Approval -->
  <rect x="490" y="48" width="190" height="130" rx="8" fill="#1e293b" stroke="#a855f7" stroke-width="2"/>
  <text x="585" y="68" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#a855f7">Approval Workflow</text>

  <rect x="505" y="78" width="160" height="26" rx="4" fill="#2d1a4a"/>
  <text x="585" y="95" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#a855f7">Data Scientist Review</text>

  <line x1="585" y1="104" x2="585" y2="114" stroke="#94a3b8" stroke-width="1.5"/>
  <polygon points="580,114 585,124 590,114" fill="#94a3b8"/>

  <rect x="505" y="124" width="160" height="26" rx="4" fill="#2d1a4a"/>
  <text x="585" y="141" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#a855f7">Manager Approval</text>

  <text x="505" y="170" font-family="sans-serif" font-size="9" fill="#94a3b8">  SNS通知 → Slack / Email</text>
  <text x="505" y="183" font-family="sans-serif" font-size="9" fill="#94a3b8">  Lambda / EventBridge 連携</text>

  <!-- Approved path -->
  <line x1="680" y1="80" x2="718" y2="80" stroke="#22c55e" stroke-width="2"/>
  <polygon points="718,75 730,80 718,85" fill="#22c55e"/>
  <text x="690" y="74" font-family="sans-serif" font-size="10" fill="#22c55e">Approved</text>

  <!-- Rejected path: arrow down -->
  <line x1="585" y1="178" x2="585" y2="220" stroke="#ef4444" stroke-width="2"/>
  <polygon points="580,220 585,232 590,220" fill="#ef4444"/>
  <text x="595" y="210" font-family="sans-serif" font-size="10" fill="#ef4444">Rejected</text>

  <!-- Rejected box -->
  <rect x="490" y="232" width="190" height="50" rx="6" fill="#3a1010" stroke="#ef4444" stroke-width="1.5"/>
  <text x="585" y="252" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#ef4444">開発に差し戻し</text>
  <text x="585" y="268" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#94a3b8">モデル改善 → 再登録</text>

  <!-- Phase 4: Deploy to Staging -->
  <rect x="730" y="48" width="150" height="80" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
  <text x="805" y="68" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#22c55e">Staging Deploy</text>
  <rect x="745" y="78" width="120" height="22" rx="4" fill="#1a3a2a"/>
  <text x="805" y="93" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#22c55e">Staging Endpoint</text>
  <text x="745" y="116" font-family="sans-serif" font-size="8" fill="#94a3b8">Integration Test</text>
  <text x="745" y="128" font-family="sans-serif" font-size="8" fill="#94a3b8">Load Test</text>

  <!-- Arrow: Staging → Production -->
  <line x1="805" y1="128" x2="805" y2="150" stroke="#22c55e" stroke-width="2"/>
  <polygon points="800,150 805,162 810,150" fill="#22c55e"/>

  <!-- Phase 5: Production -->
  <rect x="730" y="162" width="150" height="80" rx="8" fill="#1e293b" stroke="#14b8a6" stroke-width="2"/>
  <text x="805" y="182" text-anchor="middle" font-family="sans-serif" font-size="11" font-weight="bold" fill="#14b8a6">Production Deploy</text>
  <rect x="745" y="192" width="120" height="22" rx="4" fill="#0a2a28"/>
  <text x="805" y="207" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#14b8a6">Prod Endpoint</text>
  <text x="745" y="230" font-family="sans-serif" font-size="8" fill="#94a3b8">Blue/Green デプロイ</text>
  <text x="745" y="242" font-family="sans-serif" font-size="8" fill="#94a3b8">CloudWatch 監視</text>

  <!-- Model Package Group detail box -->
  <rect x="20" y="260" width="450" height="220" rx="8" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5" stroke-dasharray="4,3"/>
  <text x="245" y="282" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#3b82f6">Model Package Group: my-classifier</text>

  <!-- Version list -->
  <rect x="35" y="292" width="420" height="30" rx="4" fill="#1e3a5f"/>
  <text x="55" y="311" font-family="sans-serif" font-size="10" fill="#f1f5f9">v1.0 — Accuracy: 0.85 — Rejected</text>
  <rect x="370" y="297" width="70" height="18" rx="3" fill="#3a1010"/>
  <text x="405" y="309" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#ef4444">Rejected</text>

  <rect x="35" y="330" width="420" height="30" rx="4" fill="#1e3a5f"/>
  <text x="55" y="349" font-family="sans-serif" font-size="10" fill="#f1f5f9">v2.0 — Accuracy: 0.91 — Approved (Prod)</text>
  <rect x="370" y="335" width="70" height="18" rx="3" fill="#1a3a2a"/>
  <text x="405" y="347" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#22c55e">Approved</text>

  <rect x="35" y="368" width="420" height="30" rx="4" fill="#1e3a5f" stroke="#f97316" stroke-width="1"/>
  <text x="55" y="387" font-family="sans-serif" font-size="10" fill="#f1f5f9">v3.0 — Accuracy: 0.94 — Pending Approval</text>
  <rect x="370" y="373" width="70" height="18" rx="3" fill="#2a1e0a"/>
  <text x="405" y="385" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#f97316">Pending</text>

  <text x="35" y="420" font-family="sans-serif" font-size="10" fill="#94a3b8">各バージョンには: アルゴリズム, コンテナ, 推論コード, 検証メトリクス, メタデータが含まれる</text>
  <text x="35" y="440" font-family="sans-serif" font-size="10" fill="#94a3b8">マルチアカウント共有: Resource Policy → 別アカウントから参照・デプロイ可能</text>
  <text x="35" y="460" font-family="sans-serif" font-size="10" fill="#94a3b8">自動承認: ConditionStep (精度 &gt; 閾値) → approval_status="Approved" 自動設定</text>
</svg>
