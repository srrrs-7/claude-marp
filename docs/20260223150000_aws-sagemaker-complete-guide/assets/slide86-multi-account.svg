<svg viewBox="0 0 900 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="900" height="500" fill="#0f172a"/>
  <text x="450" y="28" text-anchor="middle" font-family="Arial,sans-serif" font-size="15" font-weight="bold" fill="#f1f5f9">マルチアカウント設計 (AWS Organizations)</text>

  <!-- Management Account -->
  <rect x="330" y="42" width="240" height="58" rx="8" fill="#1e293b" stroke="#f97316" stroke-width="2"/>
  <text x="450" y="64" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#f97316">Management Account</text>
  <text x="450" y="82" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#94a3b8">Billing / SCPs / Organizations</text>
  <text x="450" y="94" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">AWS Config Aggregator</text>

  <!-- Connecting line down -->
  <line x1="450" y1="100" x2="450" y2="130" stroke="#334155" stroke-width="2"/>
  <polygon points="445,130 450,140 455,130" fill="#334155"/>

  <!-- OU Level -->
  <rect x="30" y="140" width="840" height="295" rx="8" fill="#0f1f35" stroke="#334155" stroke-width="1.5"/>
  <text x="450" y="162" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#94a3b8">AWS Organizations — Organization Unit (OU)</text>

  <!-- Security OU -->
  <rect x="48" y="172" width="240" height="135" rx="8" fill="#1e293b" stroke="#ef4444" stroke-width="2"/>
  <rect x="48" y="172" width="240" height="28" rx="8" fill="#2d1515"/>
  <text x="168" y="191" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#ef4444">Security OU</text>

  <rect x="63" y="208" width="210" height="90" rx="6" fill="#0f172a" stroke="#ef4444" stroke-width="1"/>
  <text x="168" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#f1f5f9">Security Account</text>
  <text x="168" y="246" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">GuardDuty (マスター)</text>
  <text x="168" y="262" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">CloudTrail 集約</text>
  <text x="168" y="278" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Security Hub</text>
  <text x="168" y="292" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Config Aggregator</text>

  <!-- Shared Services OU -->
  <rect x="330" y="172" width="240" height="135" rx="8" fill="#1e293b" stroke="#a855f7" stroke-width="2"/>
  <rect x="330" y="172" width="240" height="28" rx="8" fill="#2d1b4e"/>
  <text x="450" y="191" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#a855f7">Shared Services OU</text>

  <rect x="345" y="208" width="210" height="90" rx="6" fill="#0f172a" stroke="#a855f7" stroke-width="1"/>
  <text x="450" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#f1f5f9">Shared Services Account</text>
  <text x="450" y="246" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">ECR (共有コンテナレジストリ)</text>
  <text x="450" y="262" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">S3 データセット (共有)</text>
  <text x="450" y="278" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Model Registry (共有)</text>
  <text x="450" y="292" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">VPC Transit Gateway Hub</text>

  <!-- ML OU -->
  <rect x="612" y="172" width="248" height="135" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="2"/>
  <rect x="612" y="172" width="248" height="28" rx="8" fill="#163020"/>
  <text x="736" y="191" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#22c55e">ML OU</text>

  <!-- Dev Account -->
  <rect x="620" y="208" width="70" height="90" rx="5" fill="#0f172a" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="655" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#3b82f6">Dev</text>
  <text x="655" y="245" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Studio</text>
  <text x="655" y="260" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">実験</text>
  <text x="655" y="275" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Notebooks</text>
  <text x="655" y="290" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Training</text>

  <!-- Staging Account -->
  <rect x="700" y="208" width="70" height="90" rx="5" fill="#0f172a" stroke="#f97316" stroke-width="1.5"/>
  <text x="735" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#f97316">Staging</text>
  <text x="735" y="245" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Integration</text>
  <text x="735" y="260" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Test</text>
  <text x="735" y="275" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Staging</text>
  <text x="735" y="290" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Endpoint</text>

  <!-- Prod Account -->
  <rect x="780" y="208" width="70" height="90" rx="5" fill="#0f172a" stroke="#22c55e" stroke-width="1.5"/>
  <text x="815" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#22c55e">Prod</text>
  <text x="815" y="245" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Endpoints</text>
  <text x="815" y="260" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Monitor</text>
  <text x="815" y="275" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Batch</text>
  <text x="815" y="290" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#94a3b8">Registry</text>

  <!-- Dev->Staging->Prod arrows -->
  <line x1="690" y1="253" x2="700" y2="253" stroke="#f97316" stroke-width="1.5"/>
  <polygon points="700,249 708,253 700,257" fill="#f97316"/>
  <line x1="770" y1="253" x2="780" y2="253" stroke="#22c55e" stroke-width="1.5"/>
  <polygon points="780,249 788,253 780,257" fill="#22c55e"/>

  <!-- Cross-account flows section -->
  <rect x="48" y="320" width="812" height="130" rx="6" fill="#1a2030" stroke="#334155" stroke-width="1"/>
  <text x="454" y="342" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#f1f5f9">クロスアカウントフロー</text>

  <!-- Flow 1: Model Package sharing -->
  <rect x="63" y="352" width="240" height="88" rx="5" fill="#1e293b" stroke="#a855f7" stroke-width="1.5"/>
  <text x="183" y="372" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#a855f7">Model Package 共有</text>
  <text x="183" y="390" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Shared Acct → Resource Policy</text>
  <text x="183" y="406" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">ML Acct → Assume Role</text>
  <text x="183" y="422" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">ModelPackage ARN で参照</text>
  <text x="183" y="432" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#64748b">Dev → Staging → Prod に伝播</text>

  <!-- Flow 2: CodePipeline -->
  <rect x="325" y="352" width="240" height="88" rx="5" fill="#1e293b" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="445" y="372" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#3b82f6">CodePipeline 実行</text>
  <text x="445" y="390" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Management Acct が Pipeline 管理</text>
  <text x="445" y="406" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Assume Role でステージング/本番に</text>
  <text x="445" y="422" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">デプロイアクションを実行</text>
  <text x="445" y="432" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#64748b">自動承認ゲート (Manual Approval)</text>

  <!-- Flow 3: ECR cross-account -->
  <rect x="587" y="352" width="255" height="88" rx="5" fill="#1e293b" stroke="#f97316" stroke-width="1.5"/>
  <text x="714" y="372" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#f97316">ECR クロスアカウント</text>
  <text x="714" y="390" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">Shared Acct: ECR リポジトリポリシー</text>
  <text x="714" y="406" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">ML Acct (Dev/Staging/Prod) が Pull 可能</text>
  <text x="714" y="422" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#94a3b8">イメージスキャン + 承認フロー</text>
  <text x="714" y="432" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#64748b">SCP で本番への直接 Push を禁止</text>

  <!-- Bottom note -->
  <text x="450" y="468" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#94a3b8">SCP (Service Control Policies): 本番アカウントでの危険な操作 (DeleteEndpoint 等) を組織全体で制限</text>
  <text x="450" y="484" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#94a3b8">AWS Config Rules: 各アカウントのコンプライアンス状態を Management Account で集約確認</text>
</svg>
