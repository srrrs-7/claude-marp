<svg viewBox="0 0 950 450" xmlns="http://www.w3.org/2000/svg" style="font-family:Arial,sans-serif;letter-spacing:0;background:#fff">
  <!-- Title -->
  <text x="475" y="32" text-anchor="middle" font-size="20" font-weight="bold" fill="#212121">VPN フェイルオーバー構成</text>

  <!-- On-Premises (left) -->
  <rect x="20" y="135" width="155" height="160" rx="8" fill="#2E7D32" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="97" y="168" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">オンプレミス</text>
  <rect x="38" y="182" width="120" height="35" rx="4" fill="#1B5E20"/>
  <text x="98" y="204" text-anchor="middle" font-size="11" fill="#E8F5E9">BGP ルーター</text>
  <rect x="38" y="228" width="120" height="35" rx="4" fill="#1B5E20"/>
  <text x="98" y="250" text-anchor="middle" font-size="11" fill="#E8F5E9">VPN ゲートウェイ</text>

  <!-- DX Location (top-center) -->
  <rect x="295" y="115" width="175" height="65" rx="8" fill="#FF8F00" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="382" y="142" text-anchor="middle" font-size="13" font-weight="bold" fill="#fff">DX ロケーション</text>
  <text x="382" y="162" text-anchor="middle" font-size="10" fill="#FFF8E1">Direct Connect</text>

  <!-- Internet (bottom-center) - cloud shape approximated with rounded rect -->
  <ellipse cx="382" cy="330" rx="95" ry="40" fill="#ECEFF1" stroke="#90A4AE" stroke-width="2" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="382" y="335" text-anchor="middle" font-size="13" font-weight="bold" fill="#455A64">Internet</text>

  <!-- AWS Cloud (right) -->
  <rect x="580" y="70" width="350" height="330" rx="12" fill="none" stroke="#1565C0" stroke-width="3"/>
  <text x="755" y="98" text-anchor="middle" font-size="15" font-weight="bold" fill="#1565C0">AWS Cloud</text>

  <!-- VGW (shared, inside AWS) -->
  <rect x="615" y="195" width="120" height="60" rx="6" fill="#7B1FA2" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="675" y="221" text-anchor="middle" font-size="13" font-weight="bold" fill="#fff">VGW</text>
  <text x="675" y="240" text-anchor="middle" font-size="10" fill="#E1BEE7">仮想プライベート GW</text>

  <!-- VPC (inside AWS) -->
  <rect x="800" y="170" width="110" height="110" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5"/>
  <text x="855" y="215" text-anchor="middle" font-size="14" font-weight="bold" fill="#1565C0">VPC</text>
  <text x="855" y="235" text-anchor="middle" font-size="10" fill="#1565C0">プライベート</text>
  <text x="855" y="250" text-anchor="middle" font-size="10" fill="#1565C0">サブネット</text>

  <!-- ====== PRIMARY PATH: DX (top) ====== -->

  <!-- On-Premises to DX Location (primary, solid blue) -->
  <line x1="175" y1="195" x2="290" y2="150" stroke="#1565C0" stroke-width="3"/>
  <polygon points="287,144 297,149 288,155" fill="#1565C0"/>

  <!-- DX Location to VGW (solid blue) -->
  <line x1="470" y1="147" x2="610" y2="215" stroke="#1565C0" stroke-width="3"/>
  <polygon points="608,209 618,214 609,220" fill="#1565C0"/>

  <!-- Primary path label -->
  <rect x="185" y="105" width="205" height="22" rx="3" fill="#E3F2FD"/>
  <text x="287" y="120" text-anchor="middle" font-size="11" font-weight="bold" fill="#1565C0">プライマリ: Direct Connect</text>

  <!-- Priority label on DX path -->
  <rect x="500" y="130" width="80" height="20" rx="3" fill="#1565C0"/>
  <text x="540" y="144" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">優先度: 高</text>

  <!-- ====== BACKUP PATH: VPN (bottom) ====== -->

  <!-- On-Premises to Internet (VPN, dashed green) -->
  <line x1="175" y1="250" x2="285" y2="320" stroke="#4CAF50" stroke-width="2.5" stroke-dasharray="5,5"/>
  <polygon points="282,314 292,319 283,325" fill="#4CAF50"/>

  <!-- Internet to VGW (VPN, dashed green) -->
  <line x1="477" y1="320" x2="610" y2="240" stroke="#4CAF50" stroke-width="2.5" stroke-dasharray="5,5"/>
  <polygon points="608,234 618,239 609,245" fill="#4CAF50"/>

  <!-- Backup path label -->
  <rect x="175" y="290" width="215" height="22" rx="3" fill="#E8F5E9"/>
  <text x="282" y="305" text-anchor="middle" font-size="11" font-weight="bold" fill="#2E7D32">バックアップ: Site-to-Site VPN</text>

  <!-- Priority label on VPN path -->
  <rect x="500" y="290" width="80" height="20" rx="3" fill="#4CAF50"/>
  <text x="540" y="304" text-anchor="middle" font-size="10" font-weight="bold" fill="#fff">優先度: 低</text>

  <!-- VGW to VPC -->
  <line x1="735" y1="225" x2="795" y2="225" stroke="#455A64" stroke-width="2"/>
  <polygon points="795,220 805,225 795,230" fill="#455A64"/>

  <!-- BGP annotation near VGW -->
  <rect x="600" y="268" width="150" height="22" rx="3" fill="#F3E5F5" stroke="#7B1FA2" stroke-width="1"/>
  <text x="675" y="283" text-anchor="middle" font-size="10" font-weight="bold" fill="#7B1FA2">BGP: DX が VPN より優先</text>

  <!-- Failover annotation (bottom) -->
  <rect x="240" y="400" width="470" height="35" rx="6" fill="#FFF3E0" stroke="#FF8F00" stroke-width="1.5"/>
  <text x="475" y="422" text-anchor="middle" font-size="13" font-weight="bold" fill="#E65100">DX 障害時に BGP により自動フェイルオーバー（VPN へ切替）</text>

  <!-- Legend -->
  <rect x="20" y="400" width="200" height="35" rx="6" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
  <line x1="32" y1="418" x2="62" y2="418" stroke="#1565C0" stroke-width="3"/>
  <text x="68" y="422" font-size="10" fill="#424242">DX 接続</text>
  <line x1="122" y1="418" x2="152" y2="418" stroke="#4CAF50" stroke-width="2.5" stroke-dasharray="5,5"/>
  <text x="158" y="422" font-size="10" fill="#424242">VPN 接続</text>
</svg>