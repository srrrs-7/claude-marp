<svg viewBox="0 0 950 500" xmlns="http://www.w3.org/2000/svg" style="font-family:Arial,sans-serif;letter-spacing:0;background:#fff">
  <!-- Title -->
  <text x="475" y="30" text-anchor="middle" font-size="18" font-weight="bold" fill="#333">TGW 経由マルチVPC接続のルーティング</text>

  <!-- ===== On-Premises ===== -->
  <rect x="20" y="180" width="130" height="90" rx="8" fill="#2E7D32" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="85" y="213" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">On-Premises</text>
  <text x="85" y="235" text-anchor="middle" font-size="11" fill="#C8E6C9">広報ルート:</text>
  <text x="85" y="252" text-anchor="middle" font-size="11" font-weight="bold" fill="#C8E6C9">10.0.0.0/8</text>

  <!-- Arrow: On-Prem -> DX GW -->
  <line x1="150" y1="225" x2="218" y2="225" stroke="#455A64" stroke-width="2"/>
  <polygon points="218,220 228,225 218,230" fill="#455A64"/>
  <!-- Return arrow -->
  <line x1="228" y1="240" x2="160" y2="240" stroke="#455A64" stroke-width="1.5" stroke-dasharray="5,3"/>
  <polygon points="160,235 150,240 160,245" fill="#455A64"/>
  <text x="189" y="213" text-anchor="middle" font-size="9" fill="#666">BGP</text>

  <!-- ===== DX Gateway ===== -->
  <rect x="232" y="170" width="150" height="110" rx="8" fill="#E65100" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="307" y="195" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">DX Gateway</text>

  <!-- Allowed Prefixes box inside DX GW -->
  <rect x="245" y="205" width="124" height="60" rx="4" fill="rgba(255,255,255,0.15)"/>
  <text x="307" y="222" text-anchor="middle" font-size="10" font-weight="bold" fill="#FFE0B2">Allowed Prefixes</text>
  <text x="307" y="238" text-anchor="middle" font-size="10" fill="#fff">10.1.0.0/16</text>
  <text x="307" y="252" text-anchor="middle" font-size="10" fill="#fff">10.2.0.0/16</text>
  <text x="307" y="266" text-anchor="middle" font-size="10" fill="#fff">10.3.0.0/16, 10.4.0.0/16</text>

  <!-- Arrow: DX GW -> TGW -->
  <line x1="382" y1="220" x2="448" y2="220" stroke="#E65100" stroke-width="2"/>
  <polygon points="448,215 458,220 448,225" fill="#E65100"/>
  <!-- Return arrow -->
  <line x1="458" y1="238" x2="392" y2="238" stroke="#E65100" stroke-width="1.5" stroke-dasharray="5,3"/>
  <polygon points="392,233 382,238 392,243" fill="#E65100"/>

  <!-- ===== Transit Gateway ===== -->
  <rect x="462" y="110" width="160" height="260" rx="8" fill="#C62828" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="542" y="140" text-anchor="middle" font-size="14" font-weight="bold" fill="#fff">Transit Gateway</text>

  <!-- Route Table box inside TGW -->
  <rect x="475" y="155" width="134" height="200" rx="5" fill="rgba(255,255,255,0.12)"/>
  <text x="542" y="175" text-anchor="middle" font-size="11" font-weight="bold" fill="#FFCDD2">Route Table</text>
  <line x1="480" y1="182" x2="604" y2="182" stroke="rgba(255,255,255,0.3)" stroke-width="1"/>

  <!-- Route entries -->
  <text x="485" y="200" font-size="10" fill="#fff" font-weight="bold">Destination</text>
  <text x="572" y="200" font-size="10" fill="#fff" font-weight="bold">Target</text>
  <line x1="480" y1="206" x2="604" y2="206" stroke="rgba(255,255,255,0.2)" stroke-width="0.5"/>

  <text x="485" y="222" font-size="10" fill="#FFCDD2">10.1.0.0/16</text>
  <text x="572" y="222" font-size="10" fill="#FFCDD2">VPC-A</text>

  <text x="485" y="240" font-size="10" fill="#FFCDD2">10.2.0.0/16</text>
  <text x="572" y="240" font-size="10" fill="#FFCDD2">VPC-B</text>

  <text x="485" y="258" font-size="10" fill="#FFCDD2">10.3.0.0/16</text>
  <text x="572" y="258" font-size="10" fill="#FFCDD2">VPC-C</text>

  <text x="485" y="276" font-size="10" fill="#FFCDD2">10.4.0.0/16</text>
  <text x="572" y="276" font-size="10" fill="#FFCDD2">VPC-D</text>

  <line x1="480" y1="286" x2="604" y2="286" stroke="rgba(255,255,255,0.2)" stroke-width="0.5"/>
  <text x="485" y="304" font-size="10" fill="#FFCDD2">10.0.0.0/8</text>
  <text x="572" y="304" font-size="10" fill="#FFCDD2">DX GW</text>

  <!-- Propagated label -->
  <text x="542" y="328" text-anchor="middle" font-size="9" fill="#EF9A9A" font-style="italic">ルート伝搬</text>
  <text x="542" y="342" text-anchor="middle" font-size="9" fill="#EF9A9A" font-style="italic">(自動 / 静的)</text>

  <!-- ===== VPCs ===== -->
  <!-- Arrow: TGW -> VPC-A -->
  <line x1="622" y1="160" x2="718" y2="100" stroke="#C62828" stroke-width="1.5"/>
  <polygon points="716,95 726,98 718,105" fill="#C62828"/>

  <!-- Arrow: TGW -> VPC-B -->
  <line x1="622" y1="200" x2="718" y2="190" stroke="#C62828" stroke-width="1.5"/>
  <polygon points="718,185 728,190 718,195" fill="#C62828"/>

  <!-- Arrow: TGW -> VPC-C -->
  <line x1="622" y1="260" x2="718" y2="280" stroke="#C62828" stroke-width="1.5"/>
  <polygon points="716,285 726,282 718,275" fill="#C62828"/>

  <!-- Arrow: TGW -> VPC-D -->
  <line x1="622" y1="300" x2="718" y2="370" stroke="#C62828" stroke-width="1.5"/>
  <polygon points="716,375 726,372 718,365" fill="#C62828"/>

  <!-- VPC-A -->
  <rect x="730" y="70" width="190" height="56" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="825" y="94" text-anchor="middle" font-size="13" font-weight="bold" fill="#1565C0">VPC-A</text>
  <text x="825" y="113" text-anchor="middle" font-size="11" fill="#1565C0">10.1.0.0/16</text>

  <!-- VPC-B -->
  <rect x="730" y="162" width="190" height="56" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="825" y="186" text-anchor="middle" font-size="13" font-weight="bold" fill="#1565C0">VPC-B</text>
  <text x="825" y="205" text-anchor="middle" font-size="11" fill="#1565C0">10.2.0.0/16</text>

  <!-- VPC-C -->
  <rect x="730" y="254" width="190" height="56" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="825" y="278" text-anchor="middle" font-size="13" font-weight="bold" fill="#1565C0">VPC-C</text>
  <text x="825" y="297" text-anchor="middle" font-size="11" fill="#1565C0">10.3.0.0/16</text>

  <!-- VPC-D -->
  <rect x="730" y="346" width="190" height="56" rx="6" fill="#E3F2FD" stroke="#1565C0" stroke-width="1.5" style="filter:drop-shadow(2px 2px 3px rgba(0,0,0,0.15))"/>
  <text x="825" y="370" text-anchor="middle" font-size="13" font-weight="bold" fill="#1565C0">VPC-D</text>
  <text x="825" y="389" text-anchor="middle" font-size="11" fill="#1565C0">10.4.0.0/16</text>

  <!-- Route propagation annotation arrows (return paths, dashed) -->
  <line x1="730" y1="105" x2="632" y2="168" stroke="#1565C0" stroke-width="1" stroke-dasharray="4,3"/>
  <polygon points="634,163 622,166 630,174" fill="#1565C0"/>

  <line x1="730" y1="197" x2="632" y2="207" stroke="#1565C0" stroke-width="1" stroke-dasharray="4,3"/>
  <polygon points="634,202 622,205 630,213" fill="#1565C0"/>

  <line x1="730" y1="287" x2="632" y2="267" stroke="#1565C0" stroke-width="1" stroke-dasharray="4,3"/>
  <polygon points="634,262 622,265 630,273" fill="#1565C0"/>

  <line x1="730" y1="379" x2="632" y2="307" stroke="#1565C0" stroke-width="1" stroke-dasharray="4,3"/>
  <polygon points="634,302 622,305 630,313" fill="#1565C0"/>

  <!-- Legend -->
  <rect x="20" y="430" width="460" height="50" rx="6" fill="#F5F5F5" stroke="#E0E0E0" stroke-width="1"/>
  <line x1="40" y1="455" x2="80" y2="455" stroke="#C62828" stroke-width="2"/>
  <polygon points="80,450 90,455 80,460" fill="#C62828"/>
  <text x="95" y="459" font-size="10" fill="#333">トラフィック転送</text>

  <line x1="210" y1="455" x2="250" y2="455" stroke="#1565C0" stroke-width="1.5" stroke-dasharray="4,3"/>
  <polygon points="248,450 258,455 248,460" fill="#1565C0"/>
  <text x="263" y="459" font-size="10" fill="#333">ルート伝搬 (VPC CIDR → TGW)</text>

  <!-- Border -->
  <rect x="5" y="5" width="940" height="490" rx="8" fill="none" stroke="#E0E0E0" stroke-width="1"/>
</svg>