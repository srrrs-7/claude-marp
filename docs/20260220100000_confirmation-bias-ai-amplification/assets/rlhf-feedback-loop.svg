<svg viewBox="0 0 960 480" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect width="960" height="480" fill="#f8fafc" rx="12"/>
  <text x="480" y="38" text-anchor="middle" font-size="20" font-weight="bold" fill="#1e293b">RLHF フィードバックループとバイアス混入</text>

  <!-- Center: LLM Policy -->
  <rect x="370" y="180" width="220" height="90" rx="14" fill="#1e293b" stroke="#60a5fa" stroke-width="3"/>
  <text x="480" y="218" text-anchor="middle" font-size="15" font-weight="bold" fill="#60a5fa">LLM ポリシー</text>
  <text x="480" y="238" text-anchor="middle" font-size="12" fill="#94a3b8">（更新される）</text>
  <text x="480" y="256" text-anchor="middle" font-size="11" fill="#64748b">Policy Model</text>

  <!-- Top: User Input -->
  <rect x="370" y="30" width="220" height="75" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2.5"/>
  <text x="480" y="63" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">ユーザー入力</text>
  <text x="480" y="82" text-anchor="middle" font-size="11" fill="#3b82f6">Prompts / Queries</text>

  <!-- Arrow: User → LLM (down) -->
  <line x1="480" y1="105" x2="480" y2="176" stroke="#3b82f6" stroke-width="2.5"/>
  <polygon points="480,180 474,170 486,170" fill="#3b82f6"/>

  <!-- Right: LLM Response -->
  <rect x="760" y="175" width="180" height="90" rx="10" fill="#bfdbfe" stroke="#2563eb" stroke-width="2.5"/>
  <text x="850" y="211" text-anchor="middle" font-size="13" font-weight="bold" fill="#1e40af">LLM 応答生成</text>
  <text x="850" y="230" text-anchor="middle" font-size="11" fill="#1d4ed8">Response</text>
  <text x="850" y="249" text-anchor="middle" font-size="10" fill="#3b82f6">Generation</text>

  <!-- Arrow: LLM → Response (right) -->
  <line x1="590" y1="225" x2="756" y2="225" stroke="#2563eb" stroke-width="2.5"/>
  <polygon points="760,225 750,219 750,231" fill="#2563eb"/>

  <!-- Bottom-right: Human Evaluators (BIAS ENTRY) -->
  <rect x="680" y="360" width="260" height="95" rx="10" fill="#fee2e2" stroke="#dc2626" stroke-width="3"/>
  <text x="810" y="393" text-anchor="middle" font-size="14" font-weight="bold" fill="#991b1b">人間評価者</text>
  <text x="810" y="412" text-anchor="middle" font-size="12" fill="#dc2626">Human Annotators</text>
  <text x="810" y="432" text-anchor="middle" font-size="11" fill="#dc2626">← ⚠ バイアス混入点</text>

  <!-- Arrow: Response → Human Evaluators -->
  <line x1="850" y1="265" x2="850" y2="356" stroke="#dc2626" stroke-width="2.5"/>
  <polygon points="850,360 844,350 856,350" fill="#dc2626"/>

  <!-- Bottom-left: Reward Model -->
  <rect x="20" y="360" width="230" height="95" rx="10" fill="#fef3c7" stroke="#d97706" stroke-width="2.5"/>
  <text x="135" y="393" text-anchor="middle" font-size="14" font-weight="bold" fill="#92400e">報酬モデル</text>
  <text x="135" y="412" text-anchor="middle" font-size="12" fill="#92400e">Reward Model</text>
  <text x="135" y="432" text-anchor="middle" font-size="11" fill="#b45309">評価スコアを学習</text>

  <!-- Arrow: Human → Reward Model (left) -->
  <line x1="680" y1="407" x2="254" y2="407" stroke="#d97706" stroke-width="2.5"/>
  <polygon points="250,407 260,401 260,413" fill="#d97706"/>

  <!-- Left: Policy Update -->
  <rect x="20" y="175" width="230" height="90" rx="10" fill="#ede9fe" stroke="#7c3aed" stroke-width="2.5"/>
  <text x="135" y="211" text-anchor="middle" font-size="14" font-weight="bold" fill="#4c1d95">ポリシー最適化</text>
  <text x="135" y="230" text-anchor="middle" font-size="12" fill="#7c3aed">Policy Optimization</text>
  <text x="135" y="249" text-anchor="middle" font-size="11" fill="#6d28d9">PPOアルゴリズム</text>

  <!-- Arrow: Reward → Policy (up) -->
  <line x1="135" y1="356" x2="135" y2="269" stroke="#7c3aed" stroke-width="2.5"/>
  <polygon points="135,265 129,275 141,275" fill="#7c3aed"/>

  <!-- Arrow: Policy → LLM (right) -->
  <line x1="250" y1="220" x2="366" y2="220" stroke="#7c3aed" stroke-width="2.5"/>
  <polygon points="370,220 360,214 360,226" fill="#7c3aed"/>

  <!-- Bias annotation box -->
  <rect x="310" y="355" width="340" height="110" rx="10" fill="#fff7ed" stroke="#ea580c" stroke-width="2.5"/>
  <text x="480" y="378" text-anchor="middle" font-size="13" font-weight="bold" fill="#c2410c">⚠ バイアス混入のメカニズム</text>
  <text x="480" y="398" text-anchor="middle" font-size="11" fill="#ea580c">アノテーターの文化的・政治的偏り</text>
  <text x="480" y="416" text-anchor="middle" font-size="11" fill="#ea580c">「心地よい回答」が高評価 → 迎合性を学習</text>
  <text x="480" y="434" text-anchor="middle" font-size="11" fill="#c2410c">繰り返すほどバイアスが強化される</text>
  <text x="480" y="454" text-anchor="middle" font-size="10" fill="#9a3412">→ Sycophancy（迎合性）の根本原因</text>
</svg>
