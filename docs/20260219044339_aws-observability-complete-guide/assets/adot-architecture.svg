<svg viewBox="0 0 960 480" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect width="960" height="480" fill="#0f172a" rx="12"/>
  <text x="480" y="32" text-anchor="middle" font-size="17" font-weight="bold" fill="#FF9900">AWS Distro for OpenTelemetry (ADOT) — Collectorパイプライン</text>

  <!-- Left: Applications -->
  <rect x="20" y="60" width="150" height="360" rx="10" fill="#1e293b" stroke="#3b82f6" stroke-width="2"/>
  <text x="95" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="#93c5fd">Applications</text>

  <rect x="35" y="100" width="120" height="44" rx="6" fill="#1e3a5f"/>
  <text x="95" y="120" text-anchor="middle" font-size="11" fill="#93c5fd">Lambda</text>
  <text x="95" y="136" text-anchor="middle" font-size="10" fill="#64748b">ADOT Layer</text>

  <rect x="35" y="158" width="120" height="44" rx="6" fill="#1e3a5f"/>
  <text x="95" y="178" text-anchor="middle" font-size="11" fill="#93c5fd">EKS Pod</text>
  <text x="95" y="194" text-anchor="middle" font-size="10" fill="#64748b">Sidecar/DaemonSet</text>

  <rect x="35" y="216" width="120" height="44" rx="6" fill="#1e3a5f"/>
  <text x="95" y="236" text-anchor="middle" font-size="11" fill="#93c5fd">ECS Task</text>
  <text x="95" y="252" text-anchor="middle" font-size="10" fill="#64748b">Sidecar</text>

  <rect x="35" y="274" width="120" height="44" rx="6" fill="#1e3a5f"/>
  <text x="95" y="294" text-anchor="middle" font-size="11" fill="#93c5fd">EC2 Agent</text>
  <text x="95" y="310" text-anchor="middle" font-size="10" fill="#64748b">Daemon</text>

  <rect x="35" y="332" width="120" height="44" rx="6" fill="#1e3a5f"/>
  <text x="95" y="352" text-anchor="middle" font-size="11" fill="#93c5fd">Prometheus</text>
  <text x="95" y="368" text-anchor="middle" font-size="10" fill="#64748b">Scrape Target</text>

  <!-- Arrows to ADOT -->
  <line x1="170" y1="122" x2="220" y2="200" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="221,200 213,194 219,204" fill="#3b82f6"/>
  <line x1="170" y1="180" x2="220" y2="220" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="221,220 213,215 218,225" fill="#3b82f6"/>
  <line x1="170" y1="238" x2="220" y2="240" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="221,240 213,235 213,245" fill="#3b82f6"/>
  <line x1="170" y1="296" x2="220" y2="260" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="221,260 215,268 218,257" fill="#3b82f6"/>
  <line x1="170" y1="354" x2="220" y2="280" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="221,280 216,288 219,278" fill="#3b82f6"/>

  <!-- Center: ADOT Collector -->
  <rect x="220" y="60" width="520" height="360" rx="10" fill="#0f1f35" stroke="#f59e0b" stroke-width="2.5"/>
  <text x="480" y="86" text-anchor="middle" font-size="13" font-weight="bold" fill="#f59e0b">ADOT Collector (config.yaml)</text>

  <!-- Receivers -->
  <rect x="240" y="100" width="145" height="300" rx="8" fill="#1e293b" stroke="#22c55e" stroke-width="1.5"/>
  <text x="312" y="122" text-anchor="middle" font-size="11" font-weight="bold" fill="#22c55e">Receivers</text>
  <text x="256" y="144" font-size="10" fill="#86efac">otlp:</text>
  <text x="264" y="158" font-size="10" fill="#64748b">protocols:</text>
  <text x="272" y="172" font-size="10" fill="#64748b">grpc: 4317</text>
  <text x="272" y="186" font-size="10" fill="#64748b">http: 4318</text>
  <text x="256" y="206" font-size="10" fill="#86efac">prometheus:</text>
  <text x="264" y="220" font-size="10" fill="#64748b">scrape_configs:</text>
  <text x="264" y="234" font-size="10" fill="#64748b">- job_name: app</text>
  <text x="256" y="254" font-size="10" fill="#86efac">awscontainerinsight</text>
  <text x="256" y="268" font-size="10" fill="#64748b">metrics_receiver</text>
  <text x="256" y="290" font-size="10" fill="#86efac">zipkin:</text>
  <text x="264" y="304" font-size="10" fill="#64748b">endpoint: :9411</text>
  <text x="256" y="324" font-size="10" fill="#86efac">awsxray:</text>
  <text x="264" y="338" font-size="10" fill="#64748b">transport: udp</text>
  <text x="256" y="354" font-size="10" fill="#64748b">bind_address: :2000</text>
  <text x="256" y="374" font-size="10" fill="#64748b">... (各種プロトコル)</text>

  <!-- Processors -->
  <rect x="400" y="100" width="145" height="300" rx="8" fill="#1e293b" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="472" y="122" text-anchor="middle" font-size="11" font-weight="bold" fill="#f59e0b">Processors</text>
  <text x="416" y="144" font-size="10" fill="#fcd34d">batch:</text>
  <text x="424" y="158" font-size="10" fill="#64748b">timeout: 5s</text>
  <text x="424" y="172" font-size="10" fill="#64748b">send_batch_size: 1000</text>
  <text x="416" y="192" font-size="10" fill="#fcd34d">resourcedetection:</text>
  <text x="424" y="206" font-size="10" fill="#64748b">detectors: [eks, ec2]</text>
  <text x="416" y="226" font-size="10" fill="#fcd34d">filter:</text>
  <text x="424" y="240" font-size="10" fill="#64748b">metrics.exclude:</text>
  <text x="432" y="254" font-size="10" fill="#64748b">type: strict</text>
  <text x="416" y="274" font-size="10" fill="#fcd34d">attributes:</text>
  <text x="424" y="288" font-size="10" fill="#64748b">actions:</text>
  <text x="432" y="302" font-size="10" fill="#64748b">- key: env</text>
  <text x="432" y="316" font-size="10" fill="#64748b">  value: prod</text>
  <text x="416" y="336" font-size="10" fill="#fcd34d">memory_limiter:</text>
  <text x="424" y="350" font-size="10" fill="#64748b">limit_mib: 512</text>
  <text x="416" y="370" font-size="10" fill="#64748b">... (変換・集約)</text>

  <!-- Exporters -->
  <rect x="560" y="100" width="160" height="300" rx="8" fill="#1e293b" stroke="#a78bfa" stroke-width="1.5"/>
  <text x="640" y="122" text-anchor="middle" font-size="11" font-weight="bold" fill="#a78bfa">Exporters</text>
  <text x="576" y="144" font-size="10" fill="#c4b5fd">awsxray:</text>
  <text x="584" y="158" font-size="10" fill="#64748b">region: ap-northeast-1</text>
  <text x="576" y="178" font-size="10" fill="#c4b5fd">awsemf:</text>
  <text x="584" y="192" font-size="10" fill="#64748b"># CW Metrics</text>
  <text x="584" y="206" font-size="10" fill="#64748b">namespace: App/Metrics</text>
  <text x="576" y="226" font-size="10" fill="#c4b5fd">prometheusremotewrite:</text>
  <text x="584" y="240" font-size="10" fill="#64748b"># AMP</text>
  <text x="584" y="254" font-size="10" fill="#64748b">endpoint: https://...</text>
  <text x="576" y="274" font-size="10" fill="#c4b5fd">awscloudwatchlogs:</text>
  <text x="584" y="288" font-size="10" fill="#64748b">log_group_name: /otel</text>
  <text x="576" y="308" font-size="10" fill="#c4b5fd">otlp:</text>
  <text x="584" y="322" font-size="10" fill="#64748b"># Upstream collector</text>
  <text x="584" y="336" font-size="10" fill="#64748b">endpoint: ...:4317</text>
  <text x="576" y="356" font-size="10" fill="#64748b">logging: (debug)</text>
  <text x="576" y="376" font-size="10" fill="#64748b">... (送信先)</text>

  <!-- Arrows between components -->
  <line x1="385" y1="250" x2="400" y2="250" stroke="#f59e0b" stroke-width="2"/>
  <polygon points="400,250 392,245 392,255" fill="#f59e0b"/>
  <line x1="545" y1="250" x2="560" y2="250" stroke="#a78bfa" stroke-width="2"/>
  <polygon points="560,250 552,245 552,255" fill="#a78bfa"/>

  <!-- Right: AWS Services -->
  <rect x="760" y="60" width="180" height="360" rx="10" fill="#1e293b" stroke="#FF9900" stroke-width="2"/>
  <text x="850" y="85" text-anchor="middle" font-size="12" font-weight="bold" fill="#FF9900">AWS Services</text>

  <rect x="775" y="100" width="150" height="44" rx="6" fill="#1e293b" stroke="#FF9900" stroke-width="1.5"/>
  <text x="850" y="120" text-anchor="middle" font-size="11" fill="#FF9900">X-Ray</text>
  <text x="850" y="136" text-anchor="middle" font-size="10" fill="#64748b">分散トレーシング</text>

  <rect x="775" y="158" width="150" height="44" rx="6" fill="#1e293b" stroke="#FF9900" stroke-width="1.5"/>
  <text x="850" y="178" text-anchor="middle" font-size="11" fill="#FF9900">CloudWatch Metrics</text>
  <text x="850" y="194" text-anchor="middle" font-size="10" fill="#64748b">EMF / カスタム</text>

  <rect x="775" y="216" width="150" height="44" rx="6" fill="#1e293b" stroke="#FF9900" stroke-width="1.5"/>
  <text x="850" y="236" text-anchor="middle" font-size="11" fill="#FF9900">CloudWatch Logs</text>
  <text x="850" y="252" text-anchor="middle" font-size="10" fill="#64748b">構造化ログ</text>

  <rect x="775" y="274" width="150" height="44" rx="6" fill="#1e293b" stroke="#f97316" stroke-width="1.5"/>
  <text x="850" y="294" text-anchor="middle" font-size="11" fill="#f97316">Amazon Managed</text>
  <text x="850" y="310" text-anchor="middle" font-size="10" fill="#64748b">Prometheus (AMP)</text>

  <rect x="775" y="332" width="150" height="44" rx="6" fill="#1e293b" stroke="#34d399" stroke-width="1.5"/>
  <text x="850" y="352" text-anchor="middle" font-size="11" fill="#34d399">Managed Grafana</text>
  <text x="850" y="368" text-anchor="middle" font-size="10" fill="#64748b">統合ダッシュボード</text>

  <!-- Arrows from exporters to services -->
  <line x1="720" y1="160" x2="775" y2="122" stroke="#FF9900" stroke-width="1.5"/>
  <polygon points="775,122 767,122 771,130" fill="#FF9900"/>
  <line x1="720" y1="210" x2="775" y2="180" stroke="#FF9900" stroke-width="1.5"/>
  <polygon points="775,180 767,178 769,187" fill="#FF9900"/>
  <line x1="720" y1="250" x2="775" y2="238" stroke="#FF9900" stroke-width="1.5"/>
  <polygon points="775,238 767,236 769,245" fill="#FF9900"/>
  <line x1="720" y1="290" x2="775" y2="296" stroke="#f97316" stroke-width="1.5"/>
  <polygon points="775,296 767,291 767,300" fill="#f97316"/>
  <line x1="720" y1="340" x2="775" y2="354" stroke="#34d399" stroke-width="1.5"/>
  <polygon points="775,354 768,345 768,355" fill="#34d399"/>

  <!-- Bottom note -->
  <rect x="20" y="432" width="920" height="36" rx="6" fill="#1e293b"/>
  <text x="480" y="449" text-anchor="middle" font-size="11" font-weight="bold" fill="#f59e0b">ADOT = AWS管理のOpenTelemetry Collectorディストリビューション（上流OTelと完全互換）</text>
  <text x="480" y="463" text-anchor="middle" font-size="10" fill="#64748b">EKS: adot-operator CRD / Lambda: Lambda Layer (arn:aws:lambda:*:901920570463:layer:aws-otel-*) / EC2: Binary daemon</text>
</svg>
