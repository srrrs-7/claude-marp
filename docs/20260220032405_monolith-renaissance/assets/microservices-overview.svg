<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:sans-serif">
  <rect width="900" height="400" fill="#1a1a2e" rx="12"/>
  <text x="450" y="30" text-anchor="middle" fill="#ecf0f1" font-size="15" font-weight="bold">マイクロサービスが約束したアーキテクチャ</text>

  <!-- Client -->
  <rect x="380" y="50" width="140" height="45" rx="8" fill="#2c3e50" stroke="#7f8c8d" stroke-width="2"/>
  <text x="450" y="77" text-anchor="middle" fill="#ecf0f1" font-size="13" font-weight="bold">Client / Browser</text>

  <!-- API Gateway -->
  <rect x="340" y="125" width="220" height="45" rx="8" fill="#1a3a5c" stroke="#3498db" stroke-width="2"/>
  <text x="450" y="152" text-anchor="middle" fill="#5dade2" font-size="13" font-weight="bold">API Gateway / Load Balancer</text>

  <!-- Arrows client to gateway -->
  <line x1="450" y1="95" x2="450" y2="124" stroke="#7f8c8d" stroke-width="2"/>
  <polygon points="445,124 450,134 455,124" fill="#7f8c8d"/>

  <!-- Services row 1 -->
  <!-- User Service -->
  <rect x="40" y="210" width="130" height="80" rx="8" fill="#1e3a5f" stroke="#2980b9" stroke-width="2"/>
  <text x="105" y="238" text-anchor="middle" fill="#5dade2" font-size="12" font-weight="bold">User Service</text>
  <text x="105" y="256" text-anchor="middle" fill="#85c1e9" font-size="10">Node.js</text>
  <rect x="55" y="265" width="100" height="18" rx="3" fill="#0e2840"/>
  <text x="105" y="278" text-anchor="middle" fill="#7fb3d3" font-size="10">users DB (Postgres)</text>

  <!-- Order Service -->
  <rect x="200" y="210" width="130" height="80" rx="8" fill="#1e3a5f" stroke="#2980b9" stroke-width="2"/>
  <text x="265" y="238" text-anchor="middle" fill="#5dade2" font-size="12" font-weight="bold">Order Service</text>
  <text x="265" y="256" text-anchor="middle" fill="#85c1e9" font-size="10">Go</text>
  <rect x="215" y="265" width="100" height="18" rx="3" fill="#0e2840"/>
  <text x="265" y="278" text-anchor="middle" fill="#7fb3d3" font-size="10">orders DB (MySQL)</text>

  <!-- Payment Service -->
  <rect x="360" y="210" width="130" height="80" rx="8" fill="#1e3a5f" stroke="#2980b9" stroke-width="2"/>
  <text x="425" y="238" text-anchor="middle" fill="#5dade2" font-size="12" font-weight="bold">Payment Service</text>
  <text x="425" y="256" text-anchor="middle" fill="#85c1e9" font-size="10">Java</text>
  <rect x="375" y="265" width="100" height="18" rx="3" fill="#0e2840"/>
  <text x="425" y="278" text-anchor="middle" fill="#7fb3d3" font-size="10">payments DB (Oracle)</text>

  <!-- Inventory Service -->
  <rect x="520" y="210" width="130" height="80" rx="8" fill="#1e3a5f" stroke="#2980b9" stroke-width="2"/>
  <text x="585" y="238" text-anchor="middle" fill="#5dade2" font-size="12" font-weight="bold">Inventory Svc</text>
  <text x="585" y="256" text-anchor="middle" fill="#85c1e9" font-size="10">Python</text>
  <rect x="535" y="265" width="100" height="18" rx="3" fill="#0e2840"/>
  <text x="585" y="278" text-anchor="middle" fill="#7fb3d3" font-size="10">inventory (MongoDB)</text>

  <!-- Notification Service -->
  <rect x="680" y="210" width="130" height="80" rx="8" fill="#1e3a5f" stroke="#2980b9" stroke-width="2"/>
  <text x="745" y="238" text-anchor="middle" fill="#5dade2" font-size="12" font-weight="bold">Notification Svc</text>
  <text x="745" y="256" text-anchor="middle" fill="#85c1e9" font-size="10">Node.js</text>
  <rect x="695" y="265" width="100" height="18" rx="3" fill="#0e2840"/>
  <text x="745" y="278" text-anchor="middle" fill="#7fb3d3" font-size="10">Redis Queue</text>

  <!-- Arrows from gateway to services -->
  <line x1="380" y1="170" x2="105" y2="210" stroke="#3498db" stroke-width="1.5"/>
  <polygon points="102,204 108,214 114,204" fill="#3498db"/>
  <line x1="400" y1="170" x2="265" y2="210" stroke="#3498db" stroke-width="1.5"/>
  <polygon points="262,204 268,214 274,204" fill="#3498db"/>
  <line x1="450" y1="170" x2="425" y2="210" stroke="#3498db" stroke-width="1.5"/>
  <polygon points="422,204 428,214 434,204" fill="#3498db"/>
  <line x1="500" y1="170" x2="585" y2="210" stroke="#3498db" stroke-width="1.5"/>
  <polygon points="582,204 588,214 594,204" fill="#3498db"/>
  <line x1="520" y1="170" x2="745" y2="210" stroke="#3498db" stroke-width="1.5"/>
  <polygon points="742,204 748,214 754,204" fill="#3498db"/>

  <!-- Service-to-service communication (message bus) -->
  <rect x="40" y="328" width="820" height="32" rx="8" fill="#2d2d44" stroke="#8e44ad" stroke-width="1.5"/>
  <text x="450" y="349" text-anchor="middle" fill="#bb8fce" font-size="12">Message Bus / Event Streaming (Kafka / RabbitMQ) — 非同期サービス間通信</text>

  <!-- Arrows from services to bus -->
  <line x1="105" y1="290" x2="105" y2="328" stroke="#8e44ad" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="265" y1="290" x2="265" y2="328" stroke="#8e44ad" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="425" y1="290" x2="425" y2="328" stroke="#8e44ad" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="585" y1="290" x2="585" y2="328" stroke="#8e44ad" stroke-width="1" stroke-dasharray="3,2"/>
  <line x1="745" y1="290" x2="745" y2="328" stroke="#8e44ad" stroke-width="1" stroke-dasharray="3,2"/>

  <!-- Labels -->
  <text x="450" y="390" text-anchor="middle" fill="#f39c12" font-size="11">各サービスが独自の言語・DBを持つ → 技術の自由度とスケールの柔軟性を実現</text>
</svg>
