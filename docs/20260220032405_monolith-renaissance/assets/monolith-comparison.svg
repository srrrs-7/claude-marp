<svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:sans-serif">
  <!-- Background -->
  <rect width="900" height="420" fill="#1a1a2e" rx="12"/>

  <!-- Left panel: Big Ball of Mud -->
  <rect x="20" y="20" width="410" height="380" fill="#2d1b1b" rx="10" stroke="#e74c3c" stroke-width="2"/>
  <text x="225" y="55" text-anchor="middle" fill="#e74c3c" font-size="18" font-weight="bold">Big Ball of Mud</text>
  <text x="225" y="75" text-anchor="middle" fill="#e74c3c" font-size="12" opacity="0.8">無秩序な依存関係</text>

  <!-- Chaotic nodes and connections -->
  <!-- connections (drawn first, behind nodes) -->
  <line x1="130" y1="130" x2="260" y2="110" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="130" y1="130" x2="180" y2="220" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="130" y1="130" x2="320" y2="200" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="130" y1="130" x2="230" y2="300" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="260" y1="110" x2="340" y2="170" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="260" y1="110" x2="180" y2="220" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="260" y1="110" x2="310" y2="290" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="340" y1="170" x2="180" y2="220" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="340" y1="170" x2="230" y2="300" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="340" y1="170" x2="310" y2="290" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="180" y1="220" x2="310" y2="290" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="180" y1="220" x2="100" y2="310" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="180" y1="220" x2="230" y2="300" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="320" y1="200" x2="230" y2="300" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="320" y1="200" x2="100" y2="310" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="230" y1="300" x2="100" y2="310" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>
  <line x1="230" y1="300" x2="310" y2="290" stroke="#e74c3c" stroke-width="1.5" opacity="0.5"/>

  <!-- nodes -->
  <circle cx="130" cy="130" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="130" y="125" text-anchor="middle" fill="white" font-size="9">User</text>
  <text x="130" y="137" text-anchor="middle" fill="white" font-size="9">Auth</text>

  <circle cx="260" cy="110" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="260" y="105" text-anchor="middle" fill="white" font-size="9">Order</text>
  <text x="260" y="117" text-anchor="middle" fill="white" font-size="9">Logic</text>

  <circle cx="340" cy="170" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="340" y="165" text-anchor="middle" fill="white" font-size="9">Payment</text>
  <text x="340" y="177" text-anchor="middle" fill="white" font-size="9">DB</text>

  <circle cx="180" cy="220" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="180" y="215" text-anchor="middle" fill="white" font-size="9">Email</text>
  <text x="180" y="227" text-anchor="middle" fill="white" font-size="9">SMTP</text>

  <circle cx="320" cy="200" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="320" y="195" text-anchor="middle" fill="white" font-size="9">Report</text>
  <text x="320" y="207" text-anchor="middle" fill="white" font-size="9">Gen</text>

  <circle cx="230" cy="300" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="230" y="295" text-anchor="middle" fill="white" font-size="9">Billing</text>
  <text x="230" y="307" text-anchor="middle" fill="white" font-size="9">Calc</text>

  <circle cx="100" cy="310" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="100" y="305" text-anchor="middle" fill="white" font-size="9">Cache</text>
  <text x="100" y="317" text-anchor="middle" fill="white" font-size="9">Layer</text>

  <circle cx="310" cy="290" r="26" fill="#c0392b" stroke="#e74c3c" stroke-width="2"/>
  <text x="310" y="285" text-anchor="middle" fill="white" font-size="9">Notif</text>
  <text x="310" y="297" text-anchor="middle" fill="white" font-size="9">Push</text>

  <!-- Warning label -->
  <rect x="60" y="355" width="320" height="30" fill="#3d1515" rx="6"/>
  <text x="220" y="375" text-anchor="middle" fill="#e74c3c" font-size="13">全モジュールが相互依存 → 変更が全体に波及</text>

  <!-- Right panel: Modular Monolith -->
  <rect x="470" y="20" width="410" height="380" fill="#1b2d1b" rx="10" stroke="#2ecc71" stroke-width="2"/>
  <text x="675" y="55" text-anchor="middle" fill="#2ecc71" font-size="18" font-weight="bold">Modular Monolith</text>
  <text x="675" y="75" text-anchor="middle" fill="#2ecc71" font-size="12" opacity="0.8">明確なモジュール境界</text>

  <!-- Module boxes -->
  <!-- Billing module -->
  <rect x="495" y="95" width="160" height="110" fill="#1e4d2b" rx="8" stroke="#2ecc71" stroke-width="2"/>
  <text x="575" y="118" text-anchor="middle" fill="#2ecc71" font-size="13" font-weight="bold">Billing</text>
  <rect x="515" y="128" width="120" height="22" fill="#145a32" rx="4"/>
  <text x="575" y="143" text-anchor="middle" fill="#a9dfbf" font-size="10">Public API</text>
  <rect x="515" y="156" width="120" height="22" fill="#0e3d24" rx="4"/>
  <text x="575" y="171" text-anchor="middle" fill="#7dcea0" font-size="10">internal/ (hidden)</text>

  <!-- Orders module -->
  <rect x="695" y="95" width="160" height="110" fill="#1e4d2b" rx="8" stroke="#2ecc71" stroke-width="2"/>
  <text x="775" y="118" text-anchor="middle" fill="#2ecc71" font-size="13" font-weight="bold">Orders</text>
  <rect x="715" y="128" width="120" height="22" fill="#145a32" rx="4"/>
  <text x="775" y="143" text-anchor="middle" fill="#a9dfbf" font-size="10">Public API</text>
  <rect x="715" y="156" width="120" height="22" fill="#0e3d24" rx="4"/>
  <text x="775" y="171" text-anchor="middle" fill="#7dcea0" font-size="10">internal/ (hidden)</text>

  <!-- Inventory module -->
  <rect x="495" y="225" width="160" height="110" fill="#1e4d2b" rx="8" stroke="#2ecc71" stroke-width="2"/>
  <text x="575" y="248" text-anchor="middle" fill="#2ecc71" font-size="13" font-weight="bold">Inventory</text>
  <rect x="515" y="258" width="120" height="22" fill="#145a32" rx="4"/>
  <text x="575" y="273" text-anchor="middle" fill="#a9dfbf" font-size="10">Public API</text>
  <rect x="515" y="286" width="120" height="22" fill="#0e3d24" rx="4"/>
  <text x="575" y="301" text-anchor="middle" fill="#7dcea0" font-size="10">internal/ (hidden)</text>

  <!-- Users module -->
  <rect x="695" y="225" width="160" height="110" fill="#1e4d2b" rx="8" stroke="#2ecc71" stroke-width="2"/>
  <text x="775" y="248" text-anchor="middle" fill="#2ecc71" font-size="13" font-weight="bold">Users</text>
  <rect x="715" y="258" width="120" height="22" fill="#145a32" rx="4"/>
  <text x="775" y="273" text-anchor="middle" fill="#a9dfbf" font-size="10">Public API</text>
  <rect x="715" y="286" width="120" height="22" fill="#0e3d24" rx="4"/>
  <text x="775" y="301" text-anchor="middle" fill="#7dcea0" font-size="10">internal/ (hidden)</text>

  <!-- Arrows between modules (Public API only) -->
  <!-- Orders -> Billing -->
  <line x1="695" y1="143" x2="655" y2="143" stroke="#2ecc71" stroke-width="2"/>
  <polygon points="655,138 645,143 655,148" fill="#2ecc71"/>

  <!-- Orders -> Inventory -->
  <line x1="775" y1="205" x2="775" y2="225" stroke="#2ecc71" stroke-width="2"/>
  <polygon points="770,225 775,235 780,225" fill="#2ecc71"/>

  <!-- Orders -> Users -->
  <line x1="695" y1="270" x2="655" y2="270" stroke="#2ecc71" stroke-width="2" stroke-dasharray="4,3"/>
  <polygon points="655,265 645,270 655,275" fill="#2ecc71"/>

  <!-- Success label -->
  <rect x="510" y="355" width="330" height="30" fill="#0e3d24" rx="6"/>
  <text x="675" y="375" text-anchor="middle" fill="#2ecc71" font-size="13">インターフェース経由のみで通信 → 変更が局所化</text>

</svg>
