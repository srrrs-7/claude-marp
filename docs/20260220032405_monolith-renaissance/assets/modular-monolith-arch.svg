<svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:sans-serif">
  <rect width="900" height="420" fill="#1a1a2e" rx="12"/>

  <!-- Title -->
  <text x="450" y="32" text-anchor="middle" fill="#ecf0f1" font-size="16" font-weight="bold">Modular Monolith — レイヤー構成</text>

  <!-- Single Process boundary -->
  <rect x="30" y="50" width="840" height="330" fill="none" rx="12" stroke="#3498db" stroke-width="2.5" stroke-dasharray="8,4"/>
  <text x="60" y="72" fill="#3498db" font-size="12" font-weight="bold">Single Process (1 deploy unit)</text>

  <!-- HTTP/API layer -->
  <rect x="60" y="85" width="780" height="45" fill="#2c3e50" rx="8" stroke="#3498db" stroke-width="1.5"/>
  <text x="450" y="113" text-anchor="middle" fill="#3498db" font-size="14" font-weight="bold">API Layer (HTTP / GraphQL / gRPC)</text>

  <!-- Arrow down -->
  <line x1="450" y1="130" x2="450" y2="148" stroke="#7f8c8d" stroke-width="2"/>
  <polygon points="444,148 450,158 456,148" fill="#7f8c8d"/>

  <!-- Modules row -->
  <!-- Billing -->
  <rect x="60" y="160" width="170" height="120" fill="#1e3a5f" rx="8" stroke="#2980b9" stroke-width="2"/>
  <text x="145" y="183" text-anchor="middle" fill="#5dade2" font-size="13" font-weight="bold">Billing</text>
  <line x1="70" y1="190" x2="220" y2="190" stroke="#2980b9" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="145" y="207" text-anchor="middle" fill="#85c1e9" font-size="10">billing_service.ts</text>
  <text x="145" y="221" text-anchor="middle" fill="#85c1e9" font-size="10">invoice.ts</text>
  <text x="145" y="235" text-anchor="middle" fill="#5dade2" font-size="10" font-style="italic">own DB schema</text>
  <text x="145" y="249" text-anchor="middle" fill="#85c1e9" font-size="10">payment.ts</text>
  <text x="145" y="265" text-anchor="middle" fill="#1e8449" font-size="10">▶ Public API only</text>

  <!-- Orders -->
  <rect x="250" y="160" width="170" height="120" fill="#1e3a5f" rx="8" stroke="#2980b9" stroke-width="2"/>
  <text x="335" y="183" text-anchor="middle" fill="#5dade2" font-size="13" font-weight="bold">Orders</text>
  <line x1="260" y1="190" x2="410" y2="190" stroke="#2980b9" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="335" y="207" text-anchor="middle" fill="#85c1e9" font-size="10">order_service.ts</text>
  <text x="335" y="221" text-anchor="middle" fill="#85c1e9" font-size="10">order.ts</text>
  <text x="335" y="235" text-anchor="middle" fill="#5dade2" font-size="10" font-style="italic">own DB schema</text>
  <text x="335" y="249" text-anchor="middle" fill="#85c1e9" font-size="10">fulfillment.ts</text>
  <text x="335" y="265" text-anchor="middle" fill="#1e8449" font-size="10">▶ Public API only</text>

  <!-- Inventory -->
  <rect x="440" y="160" width="170" height="120" fill="#1e3a5f" rx="8" stroke="#2980b9" stroke-width="2"/>
  <text x="525" y="183" text-anchor="middle" fill="#5dade2" font-size="13" font-weight="bold">Inventory</text>
  <line x1="450" y1="190" x2="600" y2="190" stroke="#2980b9" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="525" y="207" text-anchor="middle" fill="#85c1e9" font-size="10">inventory_svc.ts</text>
  <text x="525" y="221" text-anchor="middle" fill="#85c1e9" font-size="10">stock.ts</text>
  <text x="525" y="235" text-anchor="middle" fill="#5dade2" font-size="10" font-style="italic">own DB schema</text>
  <text x="525" y="249" text-anchor="middle" fill="#85c1e9" font-size="10">warehouse.ts</text>
  <text x="525" y="265" text-anchor="middle" fill="#1e8449" font-size="10">▶ Public API only</text>

  <!-- Users -->
  <rect x="630" y="160" width="170" height="120" fill="#1e3a5f" rx="8" stroke="#2980b9" stroke-width="2"/>
  <text x="715" y="183" text-anchor="middle" fill="#5dade2" font-size="13" font-weight="bold">Users</text>
  <line x1="640" y1="190" x2="790" y2="190" stroke="#2980b9" stroke-width="1" stroke-dasharray="3,2"/>
  <text x="715" y="207" text-anchor="middle" fill="#85c1e9" font-size="10">user_service.ts</text>
  <text x="715" y="221" text-anchor="middle" fill="#85c1e9" font-size="10">auth.ts</text>
  <text x="715" y="235" text-anchor="middle" fill="#5dade2" font-size="10" font-style="italic">own DB schema</text>
  <text x="715" y="249" text-anchor="middle" fill="#85c1e9" font-size="10">session.ts</text>
  <text x="715" y="265" text-anchor="middle" fill="#1e8449" font-size="10">▶ Public API only</text>

  <!-- Inter-module arrows (via Public API) -->
  <!-- Orders -> Billing -->
  <line x1="250" y1="215" x2="230" y2="215" stroke="#27ae60" stroke-width="1.5"/>
  <polygon points="230,210 220,215 230,220" fill="#27ae60"/>
  <text x="238" y="210" text-anchor="middle" fill="#27ae60" font-size="9">API</text>

  <!-- Orders -> Inventory -->
  <line x1="420" y1="215" x2="440" y2="215" stroke="#27ae60" stroke-width="1.5"/>
  <polygon points="440,210 450,215 440,220" fill="#27ae60"/>
  <text x="432" y="210" text-anchor="middle" fill="#27ae60" font-size="9">API</text>

  <!-- Orders -> Users -->
  <line x1="335" y1="160" x2="715" y2="160" stroke="#27ae60" stroke-width="1" stroke-dasharray="4,3"/>

  <!-- Arrow down to shared layer -->
  <line x1="450" y1="280" x2="450" y2="298" stroke="#7f8c8d" stroke-width="2"/>
  <polygon points="444,298 450,308 456,298" fill="#7f8c8d"/>

  <!-- Shared layer -->
  <rect x="60" y="310" width="780" height="40" fill="#2d2d44" rx="8" stroke="#8e44ad" stroke-width="1.5"/>
  <text x="450" y="335" text-anchor="middle" fill="#bb8fce" font-size="13">Shared Kernel — 共通型・ユーティリティ（最小限）</text>

</svg>
