<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">A/B テスト・カナリアデプロイ</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">モデル更新を安全にロールアウトする戦略</text>

  <!-- A/B Test flow -->
  <rect x="15" y="65" width="530" height="200" rx="8" fill="#0f172a"/>
  <text x="280" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">A/B テスト フロー</text>

  <!-- Traffic split -->
  <rect x="25" y="92" width="110" height="35" rx="6" fill="#1e3a8a"/>
  <text x="80" y="112" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">ユーザートラフィック</text>

  <!-- Split arrow -->
  <line x1="138" y1="109" x2="165" y2="109" stroke="#6d28d9" stroke-width="1.5"/>
  <line x1="165" y1="109" x2="165" y2="88" stroke="#6d28d9" stroke-width="1.5"/>
  <line x1="165" y1="88" x2="200" y2="88" stroke="#6d28d9" stroke-width="1.5"/>
  <line x1="165" y1="109" x2="165" y2="130" stroke="#6d28d9" stroke-width="1.5"/>
  <line x1="165" y1="130" x2="200" y2="130" stroke="#6d28d9" stroke-width="1.5"/>
  <polygon points="200,85 193,82 193,91" fill="#6d28d9"/>
  <polygon points="200,127 193,124 193,133" fill="#6d28d9"/>
  <text x="172" y="101" font-family="Arial,sans-serif" font-size="8" fill="#3b82f6">90%</text>
  <text x="172" y="145" font-family="Arial,sans-serif" font-size="8" fill="#a855f7">10%</text>

  <!-- Model A -->
  <rect x="203" y="74" width="130" height="30" rx="6" fill="#1e3a8a"/>
  <text x="268" y="91" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#bfdbfe">モデル A（現行）</text>
  <polygon points="335,89 345,85 345,93" fill="#3b82f6"/>
  <rect x="348" y="74" width="130" height="30" rx="6" fill="#0f2d5e"/>
  <text x="413" y="87" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">レイテンシ: 0.8s</text>
  <text x="413" y="100" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">BLEU: 0.72</text>

  <!-- Model B -->
  <rect x="203" y="115" width="130" height="30" rx="6" fill="#4c1d95"/>
  <text x="268" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">モデル B（新規）</text>
  <polygon points="335,130 345,126 345,134" fill="#a855f7"/>
  <rect x="348" y="115" width="130" height="30" rx="6" fill="#2e1065"/>
  <text x="413" y="128" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">レイテンシ: 0.6s</text>
  <text x="413" y="141" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">BLEU: 0.78</text>

  <!-- Decision -->
  <rect x="25" y="165" width="510" height="90" rx="5" fill="#1a1a2e"/>
  <text x="280" y="183" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fbbf24">判定基準（統計的有意性）</text>
  <text x="100" y="203" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">p 値 &lt; 0.05</text>
  <text x="100" y="219" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">統計的有意差</text>
  <text x="230" y="203" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#6ee7b7">BLEU 改善 +5% 以上</text>
  <text x="230" y="219" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">品質向上基準</text>
  <text x="370" y="203" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">コスト増加 &lt; 10%</text>
  <text x="370" y="219" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">経済性基準</text>
  <text x="495" y="203" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fca5a5">エラー率 ≤ 現行</text>
  <text x="495" y="219" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">信頼性基準</text>
  <rect x="25" y="234" width="510" height="22" rx="4" fill="#1e3a8a"/>
  <text x="280" y="249" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">全基準クリア → B に 100% 切替 | 失敗 → A にロールバック</text>

  <!-- Canary deploy -->
  <rect x="560" y="65" width="325" height="200" rx="8" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <text x="723" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">カナリアデプロイ</text>
  <!-- Canary phases -->
  <rect x="570" y="93" width="305" height="28" rx="5" fill="#052e16"/>
  <rect x="570" y="93" width="31" height="28" rx="5" fill="#16a34a"/>
  <text x="723" y="111" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#86efac">Phase 1: 新 1% | 旧 99% — 24h 様子見</text>
  <polygon points="723,123 718,131 728,131" fill="#10b981"/>
  <rect x="570" y="133" width="305" height="28" rx="5" fill="#052e16"/>
  <rect x="570" y="133" width="92" height="28" rx="5" fill="#16a34a"/>
  <text x="723" y="151" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#86efac">Phase 2: 新 30% | 旧 70% — 48h</text>
  <polygon points="723,163 718,171 728,171" fill="#10b981"/>
  <rect x="570" y="173" width="305" height="28" rx="5" fill="#052e16"/>
  <rect x="570" y="173" width="183" height="28" rx="5" fill="#16a34a"/>
  <text x="723" y="191" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#86efac">Phase 3: 新 60% | 旧 40% — 48h</text>
  <polygon points="723,203 718,211 728,211" fill="#10b981"/>
  <rect x="570" y="213" width="305" height="28" rx="5" fill="#16a34a"/>
  <text x="723" y="231" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#dcfce7">Phase 4: 新 100% — 完全切替</text>
  <text x="723" y="252" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">AWS Blue/Green: SageMaker Endpoint で実装</text>

  <!-- Bottom -->
  <rect x="15" y="278" width="870" height="112" rx="8" fill="#0f172a"/>
  <text x="450" y="297" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">LLM 特有の評価指標と自動化</text>
  <rect x="30" y="306" width="195" height="72" rx="5" fill="#172554"/>
  <text x="128" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#60a5fa">自動評価</text>
  <text x="128" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">LLM-as-Judge</text>
  <text x="128" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">ROUGE / BERTScore</text>
  <text x="128" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">Bedrock Model Eval</text>
  <rect x="238" y="306" width="195" height="72" rx="5" fill="#3b0764"/>
  <text x="336" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#c4b5fd">人間評価</text>
  <text x="336" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">A/B テスト好みの比較</text>
  <text x="336" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">回答品質スコア</text>
  <text x="336" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">Amazon SageMaker GT</text>
  <rect x="446" y="306" width="195" height="72" rx="5" fill="#064e3b"/>
  <text x="544" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">オンライン評価</text>
  <text x="544" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">本番ユーザー行動</text>
  <text x="544" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">CTR / セッション完了率</text>
  <text x="544" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">CloudWatch ユーザー指標</text>
  <rect x="654" y="306" width="216" height="72" rx="5" fill="#78350f"/>
  <text x="762" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fde68a">CI/CD 統合</text>
  <text x="762" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">デプロイゲート</text>
  <text x="762" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">自動ロールバック</text>
  <text x="762" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">CodePipeline 連携</text>
</svg>
