<svg viewBox="0 0 900 420" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="420" fill="#1a0a2e" rx="12"/>
  <text x="450" y="35" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">コンテキストウィンドウとその影響</text>
  <text x="450" y="55" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">モデルが1度のリクエストで参照できるトークン数の上限</text>

  <!-- Window visualization -->
  <rect x="15" y="68" width="870" height="90" rx="8" fill="#1e1b4b" stroke="#6d28d9" stroke-width="2"/>
  <text x="30" y="88" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">コンテキストウィンドウ（例: 200K tokens）</text>
  <!-- System prompt section -->
  <rect x="20" y="96" width="120" height="52" rx="4" fill="#1d4ed8"/>
  <text x="80" y="116" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#bfdbfe">System</text>
  <text x="80" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#bfdbfe">Prompt</text>
  <text x="80" y="144" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#60a5fa">〜2K</text>
  <!-- Conversation history -->
  <rect x="148" y="96" width="320" height="52" rx="4" fill="#065f46"/>
  <text x="308" y="116" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#a7f3d0">会話履歴（マルチターン）</text>
  <text x="308" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#a7f3d0">User: ... Assistant: ... User: ...</text>
  <text x="308" y="144" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">〜50K tokens</text>
  <!-- RAG context -->
  <rect x="476" y="96" width="200" height="52" rx="4" fill="#78350f"/>
  <text x="576" y="116" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fde68a">RAG 検索結果</text>
  <text x="576" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fde68a">関連ドキュメント</text>
  <text x="576" y="144" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">〜20K tokens</text>
  <!-- Current query -->
  <rect x="684" y="96" width="100" height="52" rx="4" fill="#4c1d95"/>
  <text x="734" y="116" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#e9d5ff">Current</text>
  <text x="734" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#e9d5ff">Query</text>
  <text x="734" y="144" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#c4b5fd">〜1K</text>
  <!-- Output space -->
  <rect x="792" y="96" width="88" height="52" rx="4" fill="#374151" stroke="#6b7280" stroke-width="1" stroke-dasharray="4,2"/>
  <text x="836" y="116" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#9ca3af">Output</text>
  <text x="836" y="132" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#9ca3af">Reserve</text>
  <text x="836" y="144" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#6b7280">〜4K</text>

  <!-- Model comparison -->
  <rect x="15" y="172" width="870" height="110" rx="8" fill="#1f2937"/>
  <text x="450" y="192" text-anchor="middle" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#fbbf24">主要モデルのコンテキストウィンドウ比較</text>
  <!-- Bar chart -->
  <text x="80" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">Claude 3.5 Sonnet</text>
  <rect x="200" y="202" width="600" height="18" rx="3" fill="#6d28d9"/>
  <text x="810" y="216" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">200K</text>
  <text x="80" y="234" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">Llama 3.1</text>
  <rect x="200" y="224" width="384" height="18" rx="3" fill="#1d4ed8"/>
  <text x="594" y="238" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">128K</text>
  <text x="80" y="256" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">Titan Text Premier</text>
  <rect x="200" y="246" width="96" height="18" rx="3" fill="#065f46"/>
  <text x="306" y="260" font-family="Arial,sans-serif" font-size="10" fill="#6ee7b7">32K</text>
  <text x="80" y="278" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">Mistral 7B</text>
  <rect x="200" y="268" width="48" height="18" rx="3" fill="#78350f"/>
  <text x="258" y="282" font-family="Arial,sans-serif" font-size="10" fill="#fde68a">8K</text>

  <!-- Impact section -->
  <rect x="15" y="296" width="415" height="110" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="1.5"/>
  <text x="228" y="316" text-anchor="middle" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#93c5fd">大きいコンテキストの利点</text>
  <text x="228" y="336" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#bfdbfe">• 長文書の一括処理（法務・研究論文）</text>
  <text x="228" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#bfdbfe">• コードベース全体の理解・レビュー</text>
  <text x="228" y="372" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#bfdbfe">• 長期会話の文脈維持</text>
  <text x="228" y="390" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#bfdbfe">• RAGのチャンク数増加</text>

  <rect x="465" y="296" width="415" height="110" rx="8" fill="#3b0764" stroke="#a855f7" stroke-width="1.5"/>
  <text x="673" y="316" text-anchor="middle" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#c4b5fd">コスト・制約の考慮点</text>
  <text x="673" y="336" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">• Inputトークン増 → 課金額増大</text>
  <text x="673" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">• Lost in the Middle 問題（中間情報を見落とす）</text>
  <text x="673" y="372" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">• レイテンシ増加（長いコンテキスト）</text>
  <text x="673" y="390" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#e9d5ff">• Prompt Caching で重複コスト削減（Bedrock対応）</text>
</svg>
