<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">エージェントのメモリ管理</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">短期メモリ（セッション内）と長期メモリ（セッション間）の2層構造</text>

  <!-- Short-term memory -->
  <rect x="15" y="65" width="415" height="225" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="2"/>
  <rect x="15" y="65" width="415" height="28" rx="8" fill="#1d4ed8"/>
  <text x="228" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#ffffff">短期メモリ（セッション内）</text>

  <!-- Context window -->
  <rect x="25" y="100" width="395" height="80" rx="6" fill="#1e3a8a"/>
  <text x="222" y="118" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#60a5fa">コンテキストウィンドウ</text>
  <text x="222" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">現在のセッション内の会話履歴・ツール実行結果・コンテキストを保持</text>
  <text x="222" y="152" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">Bedrock AgentsはseesionId パラメータで会話を継続</text>
  <text x="222" y="168" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#60a5fa">sessionId が同じ → 過去の会話を自動的に引き継ぐ</text>

  <!-- Session continuation -->
  <rect x="25" y="186" width="190" height="92" rx="5" fill="#0f172a"/>
  <text x="120" y="204" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#60a5fa">セッション管理</text>
  <text x="120" y="220" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• sessionId: 会話のID</text>
  <text x="120" y="236" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• sessionAttributes: セッション変数</text>
  <text x="120" y="252" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• promptSessionAttributes</text>
  <text x="120" y="268" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">APIリクエスト毎に含める</text>

  <rect x="228" y="186" width="182" height="92" rx="5" fill="#0f172a"/>
  <text x="319" y="204" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fbbf24">制限事項</text>
  <text x="319" y="220" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">• コンテキスト長に制限</text>
  <text x="319" y="236" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">• セッション終了で消去</text>
  <text x="319" y="252" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">• トークン数=コスト増</text>
  <text x="319" y="268" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">長期はLong-term Memoryへ</text>

  <!-- Long-term memory -->
  <rect x="445" y="65" width="440" height="225" rx="8" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <rect x="445" y="65" width="440" height="28" rx="8" fill="#065f46"/>
  <text x="665" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#ffffff">長期メモリ（セッション間）</text>

  <!-- Bedrock Memory feature -->
  <rect x="455" y="100" width="420" height="70" rx="6" fill="#014126"/>
  <text x="665" y="118" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#6ee7b7">Bedrock Agents Memory 機能</text>
  <text x="665" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a7f3d0">セッション終了時に重要情報をS3に自動要約・保存</text>
  <text x="665" y="152" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">次回セッション開始時に関連するメモリを自動取得してコンテキストに注入</text>
  <text x="665" y="165" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">memoryId パラメータでユーザーを識別</text>

  <!-- Memory workflow -->
  <rect x="455" y="178" width="195" height="100" rx="5" fill="#0f172a"/>
  <text x="553" y="196" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">保存される情報</text>
  <text x="553" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• ユーザーの好み・設定</text>
  <text x="553" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• 過去の会話サマリー</text>
  <text x="553" y="244" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• 重要なコンテキスト</text>
  <text x="553" y="260" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• ユーザープロファイル</text>
  <text x="553" y="272" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">S3に構造化データで保存</text>

  <rect x="663" y="178" width="212" height="100" rx="5" fill="#0f172a"/>
  <text x="769" y="196" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fbbf24">利用シーン</text>
  <text x="769" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">• カスタマーサポート</text>
  <text x="769" y="228" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">  (過去の問題を記憶)</text>
  <text x="769" y="244" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">• 個人化アシスタント</text>
  <text x="769" y="260" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">  (嗜好を記憶・活用)</text>
  <text x="769" y="272" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">RAGとの組み合わせで強力</text>

  <!-- Comparison -->
  <rect x="15" y="302" width="870" height="86" rx="8" fill="#0f172a"/>
  <text x="450" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">メモリタイプ比較</text>
  <rect x="30" y="334" width="265" height="42" rx="5" fill="#172554"/>
  <text x="163" y="352" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#60a5fa">短期メモリ（コンテキスト）</text>
  <text x="163" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">セッション内・自動・高速・コスト高</text>
  <rect x="310" y="334" width="265" height="42" rx="5" fill="#064e3b"/>
  <text x="443" y="352" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#6ee7b7">長期メモリ（Bedrock Memory）</text>
  <text x="443" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">セッション間・S3永続化・ユーザー特化</text>
  <rect x="590" y="334" width="290" height="42" rx="5" fill="#3b0764"/>
  <text x="735" y="352" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">外部ベクターDB（RAGメモリ）</text>
  <text x="735" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">大容量・セマンティック検索・柔軟</text>
</svg>
