<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">LLM コスト最適化戦略</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">トークン削減・キャッシュ・適切なモデル選択で最大 80% 削減</text>

  <!-- Strategy 1: Prompt Optimization -->
  <rect x="15" y="65" width="200" height="200" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="2"/>
  <rect x="15" y="65" width="200" height="28" rx="8" fill="#1d4ed8"/>
  <text x="115" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#ffffff">① プロンプト最適化</text>
  <text x="115" y="103" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">トークン削減 20〜40%</text>
  <text x="25" y="120" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">• 不要な冗長表現を削除</text>
  <text x="25" y="136" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">• System Prompt 最小化</text>
  <text x="25" y="152" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">• Few-shot 例を削減</text>
  <text x="25" y="168" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">• 出力長を max_tokens で制限</text>
  <text x="25" y="184" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">• 構造化出力でパース削減</text>
  <!-- Before/after tokens -->
  <rect x="25" y="196" width="180" height="58" rx="5" fill="#0f172a"/>
  <text x="115" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">削減例</text>
  <text x="35" y="228" font-family="Arial,sans-serif" font-size="8" fill="#f87171">前: 2,800 tokens → $0.0028</text>
  <text x="35" y="244" font-family="Arial,sans-serif" font-size="8" fill="#4ade80">後: 1,800 tokens → $0.0018</text>

  <!-- Strategy 2: Caching -->
  <rect x="228" y="65" width="200" height="200" rx="8" fill="#3b0764" stroke="#a855f7" stroke-width="2"/>
  <rect x="228" y="65" width="200" height="28" rx="8" fill="#6d28d9"/>
  <text x="328" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#ffffff">② プロンプトキャッシュ</text>
  <text x="328" y="103" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#c4b5fd">最大 90% コスト削減</text>
  <text x="238" y="120" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">• 繰り返しプロンプトをキャッシュ</text>
  <text x="238" y="136" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">• System Prompt は毎回同一</text>
  <text x="238" y="152" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">• RAG コンテキストを再利用</text>
  <text x="238" y="168" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">• TTL: 5分（Bedrock）</text>
  <text x="238" y="184" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">• キャッシュトークン: 90% OFF</text>
  <rect x="238" y="196" width="180" height="58" rx="5" fill="#0f172a"/>
  <text x="328" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">効果例（100回呼び出し）</text>
  <text x="248" y="228" font-family="Arial,sans-serif" font-size="8" fill="#f87171">キャッシュなし: $10.00</text>
  <text x="248" y="244" font-family="Arial,sans-serif" font-size="8" fill="#4ade80">キャッシュあり: $1.90</text>

  <!-- Strategy 3: Model Selection -->
  <rect x="441" y="65" width="200" height="200" rx="8" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <rect x="441" y="65" width="200" height="28" rx="8" fill="#065f46"/>
  <text x="541" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#ffffff">③ モデル選定</text>
  <text x="541" y="103" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#6ee7b7">タスク適合モデルで 60〜80% 削減</text>
  <!-- Model tiers -->
  <rect x="451" y="110" width="180" height="22" rx="4" fill="#14532d"/>
  <text x="541" y="125" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#86efac">小型 (Haiku/Nova Micro): 単純タスク</text>
  <rect x="451" y="136" width="180" height="22" rx="4" fill="#166534"/>
  <text x="541" y="151" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#4ade80">中型 (Sonnet/Nova Lite): 標準タスク</text>
  <rect x="451" y="162" width="180" height="22" rx="4" fill="#15803d"/>
  <text x="541" y="177" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#bbf7d0">大型 (Opus/Nova Pro): 複雑タスク</text>
  <rect x="451" y="196" width="180" height="58" rx="5" fill="#0f172a"/>
  <text x="541" y="212" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">コスト比較（1M tokens）</text>
  <text x="461" y="228" font-family="Arial,sans-serif" font-size="8" fill="#fca5a5">Opus:  $15.00（入力）</text>
  <text x="461" y="244" font-family="Arial,sans-serif" font-size="8" fill="#4ade80">Haiku: $0.25（入力）60x安</text>

  <!-- Strategy 4: Provisioned / Batch -->
  <rect x="654" y="65" width="231" height="200" rx="8" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
  <rect x="654" y="65" width="231" height="28" rx="8" fill="#92400e"/>
  <text x="770" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#ffffff">④ PT / Batch</text>
  <text x="770" y="103" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">大量処理で 40〜50% 削減</text>
  <!-- PT -->
  <rect x="664" y="110" width="210" height="60" rx="4" fill="#7c2d12"/>
  <text x="769" y="126" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#fde68a">Provisioned Throughput</text>
  <text x="674" y="142" font-family="Arial,sans-serif" font-size="8" fill="#fed7aa">• 1/6 month コミット</text>
  <text x="674" y="156" font-family="Arial,sans-serif" font-size="8" fill="#fed7aa">• 低レイテンシ保証</text>
  <!-- Batch -->
  <rect x="664" y="176" width="210" height="55" rx="4" fill="#431407"/>
  <text x="769" y="192" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#fde68a">Batch Inference</text>
  <text x="674" y="208" font-family="Arial,sans-serif" font-size="8" fill="#fed7aa">• 50% OFF（オンデマンド比）</text>
  <text x="674" y="222" font-family="Arial,sans-serif" font-size="8" fill="#fed7aa">• 24h 以内完了</text>

  <!-- Bottom summary -->
  <rect x="15" y="278" width="870" height="112" rx="8" fill="#0f172a"/>
  <text x="450" y="298" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">コスト最適化のベストプラクティス（試験頻出）</text>
  <text x="200" y="325" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">RAG + 小型モデル</text>
  <text x="200" y="341" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">高精度×低コスト両立</text>
  <text x="450" y="325" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">Guardrails キャッシュ</text>
  <text x="450" y="341" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">System Prompt 再利用</text>
  <text x="700" y="325" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#6ee7b7">Cost Allocation Tags</text>
  <text x="700" y="341" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">チーム別コスト可視化</text>
  <!-- Formula -->
  <rect x="30" y="353" width="840" height="28" rx="5" fill="#1a1a2e"/>
  <text x="450" y="371" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">最適化順序: 小型モデル選定 → プロンプト最適化 → キャッシュ → PT/Batch → Spot/Savings Plans</text>
</svg>
