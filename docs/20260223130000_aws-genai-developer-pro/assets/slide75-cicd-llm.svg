<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">CI/CD パイプライン for LLM</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">CodePipeline + SageMaker Pipelines による自動化デプロイ</text>

  <!-- Pipeline stages -->
  <!-- Stage 1: Source -->
  <rect x="15" y="70" width="130" height="130" rx="8" fill="#1e3a8a" stroke="#3b82f6" stroke-width="2"/>
  <text x="80" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#bfdbfe">Source</text>
  <text x="80" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">CodeCommit</text>
  <text x="80" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#93c5fd">プロンプト変更</text>
  <text x="80" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#93c5fd">設定ファイル</text>
  <text x="80" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#93c5fd">訓練コード</text>
  <text x="80" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">Git push で</text>
  <text x="80" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">自動トリガー</text>
  <polygon points="148,135 158,131 158,139" fill="#6d28d9"/>

  <!-- Stage 2: Build -->
  <rect x="162" y="70" width="130" height="130" rx="8" fill="#4c1d95" stroke="#a855f7" stroke-width="2"/>
  <text x="227" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#c4b5fd">Build</text>
  <text x="227" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">CodeBuild</text>
  <text x="227" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">ユニットテスト</text>
  <text x="227" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">スキーマ検証</text>
  <text x="227" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">コンテナビルド</text>
  <text x="227" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">ECR プッシュ</text>
  <text x="227" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">数分</text>
  <polygon points="295,135 305,131 305,139" fill="#6d28d9"/>

  <!-- Stage 3: Evaluate -->
  <rect x="309" y="70" width="130" height="130" rx="8" fill="#065f46" stroke="#10b981" stroke-width="2"/>
  <text x="374" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">Evaluate</text>
  <text x="374" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">SM Pipelines</text>
  <text x="374" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">Bedrock Eval</text>
  <text x="374" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">BLEU/ROUGE</text>
  <text x="374" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">バイアス検査</text>
  <text x="374" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">ゲート判定</text>
  <text x="374" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">閾値クリアで次へ</text>
  <polygon points="442,135 452,131 452,139" fill="#6d28d9"/>

  <!-- Stage 4: Approve -->
  <rect x="456" y="70" width="130" height="130" rx="8" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
  <text x="521" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fde68a">Approve</text>
  <text x="521" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">Manual Gate</text>
  <text x="521" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">評価レポート</text>
  <text x="521" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">確認・承認</text>
  <text x="521" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">SNS 通知</text>
  <text x="521" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">High-risk は</text>
  <text x="521" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">人間レビュー</text>
  <polygon points="589,135 599,131 599,139" fill="#6d28d9"/>

  <!-- Stage 5: Deploy -->
  <rect x="603" y="70" width="130" height="130" rx="8" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <text x="668" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">Deploy</text>
  <text x="668" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">SM Endpoint</text>
  <text x="668" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">カナリア 10%</text>
  <text x="668" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">→ 100% 展開</text>
  <text x="668" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">Blue/Green</text>
  <text x="668" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">自動ロール</text>
  <text x="668" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">バック対応</text>
  <polygon points="736,135 746,131 746,139" fill="#6d28d9"/>

  <!-- Stage 6: Monitor -->
  <rect x="750" y="70" width="135" height="130" rx="8" fill="#1e1b4b" stroke="#6d28d9" stroke-width="2"/>
  <text x="818" y="90" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#a78bfa">Monitor</text>
  <text x="818" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#c4b5fd">CloudWatch</text>
  <text x="818" y="122" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#c4b5fd">Clarify Monitor</text>
  <text x="818" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#c4b5fd">アラーム設定</text>
  <text x="818" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#c4b5fd">ドリフト検出</text>
  <text x="818" y="166" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">→ Source へ</text>
  <text x="818" y="180" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">フィードバック</text>

  <!-- Feedback arrow -->
  <path d="M 883 135 Q 883 215 450 230 Q 15 245 15 135" stroke="#6d28d9" stroke-width="1.5" fill="none" stroke-dasharray="5,3"/>
  <polygon points="18,135 10,130 10,140" fill="#6d28d9"/>
  <text x="450" y="247" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">自動フィードバックループ（ドリフト検出 → 再学習トリガー）</text>

  <!-- Bottom -->
  <rect x="15" y="260" width="870" height="130" rx="8" fill="#0f172a"/>
  <text x="450" y="278" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">LLM 向け CI/CD の特殊対応</text>
  <rect x="30" y="288" width="195" height="90" rx="5" fill="#172554"/>
  <text x="128" y="306" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#60a5fa">評価の自動化</text>
  <text x="35" y="322" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• Bedrock Model Eval</text>
  <text x="35" y="338" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• 評価データセット管理</text>
  <text x="35" y="354" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">• LLM-as-Judge</text>
  <text x="35" y="370" font-family="Arial,sans-serif" font-size="8" fill="#475569">自動スコアリング</text>
  <rect x="238" y="288" width="195" height="90" rx="5" fill="#3b0764"/>
  <text x="336" y="306" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#c4b5fd">大規模アーティファクト</text>
  <text x="243" y="322" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">• S3 でモデル管理</text>
  <text x="243" y="338" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">• ECR コンテナ</text>
  <text x="243" y="354" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">• SageMaker Registry</text>
  <text x="243" y="370" font-family="Arial,sans-serif" font-size="8" fill="#475569">数十GB 管理</text>
  <rect x="446" y="288" width="195" height="90" rx="5" fill="#064e3b"/>
  <text x="544" y="306" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">Shadow モード</text>
  <text x="451" y="322" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• 本番と並行実行</text>
  <text x="451" y="338" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• 結果比較・検証</text>
  <text x="451" y="354" font-family="Arial,sans-serif" font-size="9" fill="#34d399">• リスクゼロ評価</text>
  <text x="451" y="370" font-family="Arial,sans-serif" font-size="8" fill="#475569">本番影響なし</text>
  <rect x="654" y="288" width="216" height="90" rx="5" fill="#78350f"/>
  <text x="762" y="306" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fde68a">コスト管理</text>
  <text x="659" y="322" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">• 評価コスト上限設定</text>
  <text x="659" y="338" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">• スポット学習活用</text>
  <text x="659" y="354" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">• タグベースコスト追跡</text>
  <text x="659" y="370" font-family="Arial,sans-serif" font-size="8" fill="#475569">予算アラーム</text>
</svg>
