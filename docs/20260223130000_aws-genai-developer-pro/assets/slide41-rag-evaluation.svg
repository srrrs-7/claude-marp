<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">RAG 評価指標</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">Faithfulness・Relevancy・Precision・Recall の4指標で品質測定</text>

  <!-- 4 metrics -->
  <rect x="15" y="65" width="205" height="190" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="2"/>
  <rect x="15" y="65" width="205" height="30" rx="8" fill="#1d4ed8"/>
  <text x="118" y="85" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#ffffff">Faithfulness（忠実性）</text>
  <text x="118" y="110" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">生成回答がコンテキストに</text>
  <text x="118" y="126" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">根拠を持つかどうか</text>
  <rect x="25" y="138" width="185" height="35" rx="5" fill="#1e3a8a"/>
  <text x="118" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">回答の各文が</text>
  <text x="118" y="164" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#bfdbfe">ソース文書から導けるか</text>
  <text x="118" y="190" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">ハルシネーション検出</text>
  <text x="118" y="208" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">の核心指標</text>
  <text x="118" y="242" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">Bedrock Guardrails でも検証</text>

  <rect x="232" y="65" width="205" height="190" rx="8" fill="#3b0764" stroke="#a855f7" stroke-width="2"/>
  <rect x="232" y="65" width="205" height="30" rx="8" fill="#6d28d9"/>
  <text x="335" y="85" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#ffffff">Answer Relevancy（関連性）</text>
  <text x="335" y="110" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">回答がクエリに</text>
  <text x="335" y="126" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#c4b5fd">適切に答えているか</text>
  <rect x="242" y="138" width="185" height="35" rx="5" fill="#4c1d95"/>
  <text x="335" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">クエリへの回答として</text>
  <text x="335" y="164" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#e9d5ff">適切か/逸脱してないか</text>
  <text x="335" y="190" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">ユーザー満足度と</text>
  <text x="335" y="208" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">直結する指標</text>
  <text x="335" y="242" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">LLM-as-Judgeで自動評価</text>

  <rect x="449" y="65" width="205" height="190" rx="8" fill="#064e3b" stroke="#10b981" stroke-width="2"/>
  <rect x="449" y="65" width="205" height="30" rx="8" fill="#065f46"/>
  <text x="552" y="85" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#ffffff">Context Precision（精度）</text>
  <text x="552" y="110" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#6ee7b7">取得されたチャンクのうち</text>
  <text x="552" y="126" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#6ee7b7">関連するものの割合</text>
  <rect x="459" y="138" width="185" height="35" rx="5" fill="#064e3b"/>
  <text x="552" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a7f3d0">= 関連チャンク数</text>
  <text x="552" y="164" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a7f3d0">　/ 取得総チャンク数</text>
  <text x="552" y="190" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">検索のノイズ除去</text>
  <text x="552" y="208" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">効果の測定</text>
  <text x="552" y="242" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">低い→Re-rankingを検討</text>

  <rect x="666" y="65" width="219" height="190" rx="8" fill="#78350f" stroke="#f59e0b" stroke-width="2"/>
  <rect x="666" y="65" width="219" height="30" rx="8" fill="#92400e"/>
  <text x="776" y="85" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#ffffff">Context Recall（再現率）</text>
  <text x="776" y="110" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fde68a">正解に必要な情報が</text>
  <text x="776" y="126" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fde68a">取得できているか</text>
  <rect x="676" y="138" width="200" height="35" rx="5" fill="#7c2d12"/>
  <text x="776" y="150" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">= 正解内の取得済情報</text>
  <text x="776" y="164" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">　/ 正解に必要な情報</text>
  <text x="776" y="190" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">情報の取り漏れ</text>
  <text x="776" y="208" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#fbbf24">がないかの測定</text>
  <text x="776" y="242" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">低い→チャンクサイズ・K値増</text>

  <!-- RAGAS -->
  <rect x="15" y="268" width="870" height="120" rx="8" fill="#0f172a"/>
  <text x="450" y="288" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">RAG 評価フレームワーク と Bedrock での実装</text>
  <rect x="30" y="300" width="265" height="76" rx="5" fill="#1e1b4b"/>
  <text x="163" y="318" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#a78bfa">RAGAS</text>
  <text x="163" y="334" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#8b5cf6">上記4指標を自動測定するOSSフレームワーク</text>
  <text x="163" y="350" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#8b5cf6">LLM-as-Judgeで評価（GPT/Claude）</text>
  <text x="163" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">LangChain/LlamaIndexと統合</text>
  <rect x="310" y="300" width="265" height="76" rx="5" fill="#1e1b4b"/>
  <text x="443" y="318" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#60a5fa">Bedrock Model Evaluation</text>
  <text x="443" y="334" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">RAGパイプライン全体を評価</text>
  <text x="443" y="350" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#93c5fd">Claude Judgeで自動採点</text>
  <text x="443" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">Faithfulness/Relevancy スコアを出力</text>
  <rect x="590" y="300" width="290" height="76" rx="5" fill="#1e1b4b"/>
  <text x="735" y="318" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#6ee7b7">Bedrock Guardrails</text>
  <text x="735" y="334" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#34d399">Grounding Check = Faithfulnessのリアルタイム検証</text>
  <text x="735" y="350" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" fill="#34d399">根拠スコア閾値設定でフィルタリング</text>
  <text x="735" y="368" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#475569">本番RAGシステムの品質ゲート</text>
</svg>
