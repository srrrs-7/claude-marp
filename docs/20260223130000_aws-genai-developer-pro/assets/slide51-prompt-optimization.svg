<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="900" height="400" fill="#1a0a2e" rx="12"/>
  <text x="450" y="32" text-anchor="middle" font-family="Arial,sans-serif" font-size="17" font-weight="bold" fill="#ffffff">プロンプト最適化・A/Bテスト</text>
  <text x="450" y="52" text-anchor="middle" font-family="Arial,sans-serif" font-size="11" fill="#a78bfa">定量評価で品質を継続的に改善するサイクル</text>

  <!-- Optimization cycle -->
  <rect x="15" y="65" width="500" height="195" rx="8" fill="#172554" stroke="#3b82f6" stroke-width="2"/>
  <text x="265" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#60a5fa">プロンプト最適化サイクル</text>

  <!-- Steps -->
  <rect x="25" y="90" width="130" height="50" rx="5" fill="#1e3a8a"/>
  <text x="90" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#93c5fd">① 基準ライン設定</text>
  <text x="90" y="124" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#60a5fa">初期プロンプト+</text>
  <text x="90" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#60a5fa">評価指標定義</text>
  <polygon points="158,115 170,111 170,119" fill="#6d28d9"/>

  <rect x="173" y="90" width="130" height="50" rx="5" fill="#3b0764"/>
  <text x="238" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#c4b5fd">② 仮説立案</text>
  <text x="238" y="124" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">改善の方向性を</text>
  <text x="238" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#a78bfa">仮説として設定</text>
  <polygon points="306,115 318,111 318,119" fill="#6d28d9"/>

  <rect x="321" y="90" width="130" height="50" rx="5" fill="#064e3b"/>
  <text x="386" y="108" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#6ee7b7">③ バリアント作成</text>
  <text x="386" y="124" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">A/B/C案の</text>
  <text x="386" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#34d399">プロンプト生成</text>

  <!-- Second row -->
  <rect x="321" y="155" width="130" height="50" rx="5" fill="#78350f"/>
  <text x="386" y="173" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#fde68a">④ 評価実行</text>
  <text x="386" y="189" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">Bedrock Evaluation</text>
  <text x="386" y="201" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#fbbf24">でバッチ評価</text>
  <polygon points="318,180 306,176 306,184" fill="#6d28d9"/>

  <rect x="173" y="155" width="130" height="50" rx="5" fill="#1e1b4b"/>
  <text x="238" y="173" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#a78bfa">⑤ 統計検定</text>
  <text x="238" y="189" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#8b5cf6">有意差の確認</text>
  <text x="238" y="201" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#8b5cf6">信頼区間を確認</text>
  <polygon points="170,180 158,176 158,184" fill="#6d28d9"/>

  <rect x="25" y="155" width="130" height="50" rx="5" fill="#172554"/>
  <text x="90" y="173" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" font-weight="bold" fill="#60a5fa">⑥ 勝者採用</text>
  <text x="90" y="189" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#93c5fd">最良プロンプト</text>
  <text x="90" y="201" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#93c5fd">を本番採用</text>

  <!-- Loop back arrow -->
  <text x="265" y="246" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fbbf24">↺  繰り返しで継続改善</text>

  <!-- Tools panel -->
  <rect x="530" y="65" width="355" height="195" rx="8" fill="#0f172a" stroke="#a855f7" stroke-width="1.5"/>
  <text x="708" y="83" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#a78bfa">評価ツールと手法</text>

  <rect x="540" y="90" width="335" height="50" rx="5" fill="#172554"/>
  <text x="708" y="107" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#60a5fa">Bedrock Model Evaluation</text>
  <text x="708" y="123" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">プロンプトバリアントをバッチで並列評価・スコア比較</text>
  <text x="708" y="136" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">自動/LLM-Judge/人間評価を選択可能</text>

  <rect x="540" y="145" width="335" height="50" rx="5" fill="#3b0764"/>
  <text x="708" y="162" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#c4b5fd">Automatic Prompt Optimization</text>
  <text x="708" y="178" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#a78bfa">LLMが自動でプロンプトを改善・最適化</text>
  <text x="708" y="191" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">DSPyフレームワークが代表的実装</text>

  <rect x="540" y="200" width="335" height="50" rx="5" fill="#064e3b"/>
  <text x="708" y="217" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">Bedrock Prompt Management</text>
  <text x="708" y="233" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">プロンプトをバージョン管理・ARNで参照</text>
  <text x="708" y="246" text-anchor="middle" font-family="Arial,sans-serif" font-size="8" fill="#475569">本番変更なしでプロンプトを切り替え可能</text>

  <!-- Exam tip -->
  <rect x="15" y="272" width="870" height="116" rx="8" fill="#1e1b4b"/>
  <text x="450" y="292" text-anchor="middle" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#fbbf24">試験頻出シナリオ: コスト最小で品質改善</text>
  <rect x="30" y="304" width="265" height="72" rx="5" fill="#0f172a"/>
  <text x="163" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#60a5fa">正解パターン</text>
  <text x="163" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">まずプロンプト最適化を試す</text>
  <text x="163" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">→ 不十分なら RAG追加</text>
  <text x="163" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#93c5fd">→ 最後にFine-tuning検討</text>
  <rect x="310" y="304" width="265" height="72" rx="5" fill="#0f172a"/>
  <text x="443" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#fbbf24">優先度（低コスト順）</text>
  <text x="443" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">1位: プロンプト最適化（ゼロコスト）</text>
  <text x="443" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">2位: RAG（低〜中コスト）</text>
  <text x="443" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#fde68a">3位: Fine-tuning（高コスト）</text>
  <rect x="590" y="304" width="290" height="72" rx="5" fill="#0f172a"/>
  <text x="735" y="322" text-anchor="middle" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#6ee7b7">A/Bテストの注意点</text>
  <text x="735" y="338" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">十分なサンプルサイズ（統計的有意差）</text>
  <text x="735" y="354" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">業務メトリクスで最終評価（ROUGEだけでなく）</text>
  <text x="735" y="370" text-anchor="middle" font-family="Arial,sans-serif" font-size="9" fill="#34d399">Bedrock Evaluationが推奨ツール</text>
</svg>
