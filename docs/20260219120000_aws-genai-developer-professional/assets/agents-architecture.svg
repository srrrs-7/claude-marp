<svg viewBox="0 0 900 460" style="max-height:70vh;max-width:100%;display:block;margin:0 auto;letter-spacing:0" font-family="Arial,sans-serif">
  <rect width="900" height="460" fill="#F0F4F8"/>
  <text x="450" y="28" text-anchor="middle" font-size="17" font-weight="bold" fill="#232F3E">Amazon Bedrock Agents 全体アーキテクチャ</text>

  <!-- User -->
  <rect x="20" y="185" width="100" height="60" rx="10" fill="#232F3E"/>
  <text x="70" y="211" text-anchor="middle" font-size="12" font-weight="bold" fill="white">ユーザー</text>
  <text x="70" y="229" text-anchor="middle" font-size="10" fill="#FFB74D">自然言語タスク</text>

  <!-- Arrow -->
  <line x1="120" y1="215" x2="155" y2="215" stroke="#666" stroke-width="2"/>
  <polygon points="155,210 165,215 155,220" fill="#666"/>

  <!-- Agent (center) -->
  <rect x="165" y="100" width="220" height="240" rx="14" fill="#FF9900" style="filter:drop-shadow(3px 3px 6px rgba(0,0,0,0.25))"/>
  <text x="275" y="128" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Bedrock Agent</text>

  <rect x="185" y="140" width="180" height="35" rx="6" fill="#E67700"/>
  <text x="275" y="163" text-anchor="middle" font-size="12" fill="white">オーケストレーター</text>

  <rect x="185" y="185" width="180" height="35" rx="6" fill="#E67700"/>
  <text x="275" y="205" text-anchor="middle" font-size="11" fill="white">基盤モデル (LLM)</text>
  <text x="275" y="218" text-anchor="middle" font-size="10" fill="#FFF3E0">Claude等</text>

  <rect x="185" y="230" width="180" height="35" rx="6" fill="#E67700"/>
  <text x="275" y="253" text-anchor="middle" font-size="12" fill="white">プロンプト管理</text>

  <rect x="185" y="275" width="180" height="35" rx="6" fill="#E67700"/>
  <text x="275" y="295" text-anchor="middle" font-size="11" fill="white">セッション管理</text>
  <text x="275" y="308" text-anchor="middle" font-size="10" fill="#FFF3E0">メモリ・コンテキスト</text>

  <!-- Action Groups -->
  <rect x="450" y="50" width="200" height="140" rx="12" fill="#1A9C3E" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="550" y="76" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Action Groups</text>
  <rect x="468" y="90" width="164" height="30" rx="6" fill="#137830"/>
  <text x="550" y="110" text-anchor="middle" font-size="12" fill="white">Lambda Function</text>
  <rect x="468" y="128" width="164" height="28" rx="6" fill="#137830"/>
  <text x="550" y="147" text-anchor="middle" font-size="12" fill="white">OpenAPI Schema</text>
  <rect x="468" y="164" width="164" height="18" rx="4" fill="#0A6E2A"/>
  <text x="550" y="177" text-anchor="middle" font-size="11" fill="#C8E6C9">外部API呼び出し</text>

  <!-- Knowledge Base -->
  <rect x="450" y="210" width="200" height="110" rx="12" fill="#1A73E8" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="550" y="236" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Knowledge Base</text>
  <rect x="468" y="248" width="164" height="28" rx="6" fill="#1557B0"/>
  <text x="550" y="267" text-anchor="middle" font-size="12" fill="white">ベクターDB検索</text>
  <rect x="468" y="284" width="164" height="28" rx="6" fill="#1557B0"/>
  <text x="550" y="302" text-anchor="middle" font-size="12" fill="white">RAG 参照</text>

  <!-- Guardrails -->
  <rect x="450" y="340" width="200" height="90" rx="12" fill="#7B1FA2" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="550" y="366" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Guardrails</text>
  <rect x="468" y="378" width="164" height="26" rx="6" fill="#6A1B9A"/>
  <text x="550" y="396" text-anchor="middle" font-size="12" fill="white">入出力フィルタリング</text>
  <rect x="468" y="408" width="164" height="16" rx="4" fill="#4A148C"/>
  <text x="550" y="420" text-anchor="middle" font-size="11" fill="#E1BEE7">PII検出・コンテンツポリシー</text>

  <!-- Lines from Agent to components -->
  <line x1="385" y1="160" x2="450" y2="120" stroke="#1A9C3E" stroke-width="2"/>
  <polygon points="440,115 450,120 445,130" fill="#1A9C3E"/>
  <line x1="385" y1="210" x2="450" y2="265" stroke="#1A73E8" stroke-width="2"/>
  <polygon points="440,260 450,265 445,275" fill="#1A73E8"/>
  <line x1="385" y1="280" x2="450" y2="375" stroke="#7B1FA2" stroke-width="2"/>
  <polygon points="440,370 450,375 445,385" fill="#7B1FA2"/>

  <!-- External Services -->
  <rect x="700" y="80" width="170" height="50" rx="10" fill="#E53935"/>
  <text x="785" y="101" text-anchor="middle" font-size="12" font-weight="bold" fill="white">外部API / DB</text>
  <text x="785" y="118" text-anchor="middle" font-size="11" fill="#FFCDD2">REST / RDS / DynamoDB</text>
  <line x1="650" y1="120" x2="700" y2="105" stroke="#E53935" stroke-width="1.5" stroke-dasharray="5,3"/>

  <rect x="700" y="160" width="170" height="50" rx="10" fill="#00897B"/>
  <text x="785" y="181" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Amazon S3</text>
  <text x="785" y="198" text-anchor="middle" font-size="11" fill="#B2DFDB">ドキュメント格納</text>
  <line x1="650" y1="180" x2="700" y2="185" stroke="#00897B" stroke-width="1.5" stroke-dasharray="5,3"/>

  <!-- Response arrow -->
  <line x1="120" y1="230" x2="155" y2="230" stroke="#666" stroke-width="2"/>
  <line x1="120" y1="215" x2="120" y2="230" stroke="#666" stroke-width="2"/>
  <text x="75" y="248" text-anchor="middle" font-size="10" fill="#1A9C3E">応答・実行結果</text>

  <!-- ReAct loop note -->
  <rect x="165" y="360" width="220" height="80" rx="10" fill="#232F3E"/>
  <text x="275" y="384" text-anchor="middle" font-size="12" font-weight="bold" fill="#FF9900">ReAct ループ</text>
  <text x="275" y="402" text-anchor="middle" font-size="11" fill="#E0E0E0">Think → Act → Observe</text>
  <text x="275" y="419" text-anchor="middle" font-size="11" fill="#E0E0E0">目標達成まで繰り返す</text>
  <text x="275" y="433" text-anchor="middle" font-size="10" fill="#888">最大ステップ数を設定可能</text>
</svg>
