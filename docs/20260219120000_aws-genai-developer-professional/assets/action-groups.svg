<svg viewBox="0 0 900 400" style="max-height:70vh;max-width:100%;display:block;margin:0 auto;letter-spacing:0" font-family="Arial,sans-serif">
  <rect width="900" height="400" fill="#F0F4F8"/>
  <text x="450" y="28" text-anchor="middle" font-size="17" font-weight="bold" fill="#232F3E">Action Groups — Lambda連携フロー</text>

  <!-- Agent -->
  <rect x="20" y="140" width="160" height="120" rx="12" fill="#FF9900" style="filter:drop-shadow(3px 3px 6px rgba(0,0,0,0.25))"/>
  <text x="100" y="170" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Bedrock Agent</text>
  <text x="100" y="190" text-anchor="middle" font-size="11" fill="#FFF3E0">タスク分析</text>
  <text x="100" y="208" text-anchor="middle" font-size="11" fill="#FFF3E0">ツール選択</text>
  <text x="100" y="226" text-anchor="middle" font-size="11" fill="#FFF3E0">パラメータ抽出</text>

  <!-- Arrow to Action Group -->
  <line x1="180" y1="200" x2="220" y2="200" stroke="#FF9900" stroke-width="2.5"/>
  <polygon points="220,195 230,200 220,205" fill="#FF9900"/>

  <!-- Action Group -->
  <rect x="230" y="100" width="200" height="200" rx="12" fill="#232F3E" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="330" y="128" text-anchor="middle" font-size="13" font-weight="bold" fill="#FF9900">Action Group</text>

  <rect x="248" y="140" width="164" height="36" rx="6" fill="#37474F"/>
  <text x="330" y="159" text-anchor="middle" font-size="11" fill="white">API Schema</text>
  <text x="330" y="172" text-anchor="middle" font-size="10" fill="#90CAF9">(OpenAPI 3.0 形式)</text>

  <rect x="248" y="184" width="164" height="36" rx="6" fill="#37474F"/>
  <text x="330" y="201" text-anchor="middle" font-size="11" fill="white">Function Definition</text>
  <text x="330" y="214" text-anchor="middle" font-size="10" fill="#90CAF9">(名前・説明・パラメータ)</text>

  <rect x="248" y="228" width="164" height="30" rx="6" fill="#263238"/>
  <text x="330" y="248" text-anchor="middle" font-size="11" fill="#64B5F6">LLMがJSONで関数呼び出し</text>

  <!-- Arrow to Lambda -->
  <line x1="430" y1="200" x2="475" y2="200" stroke="#1A9C3E" stroke-width="2.5"/>
  <polygon points="475,195 485,200 475,205" fill="#1A9C3E"/>

  <!-- Lambda -->
  <rect x="485" y="130" width="180" height="140" rx="12" fill="#1A9C3E" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="575" y="158" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Lambda Function</text>
  <rect x="503" y="168" width="144" height="28" rx="6" fill="#137830"/>
  <text x="575" y="187" text-anchor="middle" font-size="11" fill="white">ビジネスロジック実行</text>
  <rect x="503" y="202" width="144" height="28" rx="6" fill="#137830"/>
  <text x="575" y="221" text-anchor="middle" font-size="11" fill="white">外部APIへの接続</text>
  <rect x="503" y="236" width="144" height="22" rx="4" fill="#0A6E2A"/>
  <text x="575" y="252" text-anchor="middle" font-size="10" fill="#C8E6C9">IAMロールで権限制御</text>

  <!-- External Services -->
  <line x1="665" y1="175" x2="705" y2="155" stroke="#666" stroke-width="1.5"/>
  <polygon points="700,150 705,160 710,150" fill="#666"/>
  <line x1="665" y1="225" x2="705" y2="245" stroke="#666" stroke-width="1.5"/>
  <polygon points="700,240 705,250 710,240" fill="#666"/>

  <rect x="705" y="100" width="170" height="70" rx="10" fill="#E53935"/>
  <text x="790" y="127" text-anchor="middle" font-size="12" font-weight="bold" fill="white">外部API / DB</text>
  <text x="790" y="145" text-anchor="middle" font-size="11" fill="#FFCDD2">REST API / RDS</text>
  <text x="790" y="160" text-anchor="middle" font-size="11" fill="#FFCDD2">DynamoDB / S3</text>

  <rect x="705" y="195" width="170" height="70" rx="10" fill="#00897B"/>
  <text x="790" y="222" text-anchor="middle" font-size="12" font-weight="bold" fill="white">社内システム</text>
  <text x="790" y="240" text-anchor="middle" font-size="11" fill="#B2DFDB">ERP / CRM</text>
  <text x="790" y="258" text-anchor="middle" font-size="11" fill="#B2DFDB">注文管理等</text>

  <!-- Return path -->
  <path d="M 575 270 Q 575 320 330 320 Q 100 320 100 260" stroke="#FF9900" stroke-width="2" fill="none" stroke-dasharray="6,3"/>
  <polygon points="95,262 100,250 105,262" fill="#FF9900"/>
  <text x="340" y="340" text-anchor="middle" font-size="11" fill="#FF9900">実行結果をAgentに返す → LLMが解釈 → 次のアクション or 最終回答</text>

  <!-- OpenAPI Schema note -->
  <rect x="20" y="365" width="860" height="28" rx="6" fill="#232F3E"/>
  <text x="450" y="380" text-anchor="middle" font-size="11" fill="#90CAF9" font-family="monospace">OpenAPI Schema 例: {"paths": {"/getOrder": {"get": {"operationId": "getOrder", "parameters": [{"name": "orderId"}]}}}}</text>
</svg>
