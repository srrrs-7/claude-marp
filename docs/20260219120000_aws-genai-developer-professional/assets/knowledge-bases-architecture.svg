<svg viewBox="0 0 900 460" style="max-height:70vh;max-width:100%;display:block;margin:0 auto;letter-spacing:0" font-family="Arial,sans-serif">
  <rect width="900" height="460" fill="#F0F4F8"/>
  <text x="450" y="28" text-anchor="middle" font-size="17" font-weight="bold" fill="#232F3E">Amazon Bedrock Knowledge Bases アーキテクチャ</text>

  <!-- Data Sources -->
  <rect x="20" y="50" width="170" height="360" rx="12" fill="#E3F2FD"/>
  <text x="105" y="75" text-anchor="middle" font-size="13" font-weight="bold" fill="#1A73E8">データソース</text>
  <rect x="35" y="90" width="140" height="38" rx="6" fill="#1A73E8"/>
  <text x="105" y="114" text-anchor="middle" font-size="12" fill="white">Amazon S3</text>
  <rect x="35" y="138" width="140" height="38" rx="6" fill="#1A73E8"/>
  <text x="105" y="162" text-anchor="middle" font-size="12" fill="white">Web Crawler</text>
  <rect x="35" y="186" width="140" height="38" rx="6" fill="#1A73E8"/>
  <text x="105" y="210" text-anchor="middle" font-size="12" fill="white">Confluence</text>
  <rect x="35" y="234" width="140" height="38" rx="6" fill="#1A73E8"/>
  <text x="105" y="258" text-anchor="middle" font-size="12" fill="white">SharePoint</text>
  <rect x="35" y="282" width="140" height="38" rx="6" fill="#1A73E8"/>
  <text x="105" y="306" text-anchor="middle" font-size="12" fill="white">Salesforce</text>
  <rect x="35" y="330" width="140" height="38" rx="6" fill="#6EA8FE"/>
  <text x="105" y="354" text-anchor="middle" font-size="12" fill="white">カスタムソース</text>

  <!-- Arrow -->
  <line x1="190" y1="230" x2="230" y2="230" stroke="#1A73E8" stroke-width="2"/>
  <polygon points="230,225 240,230 230,235" fill="#1A73E8"/>

  <!-- Knowledge Base core -->
  <rect x="240" y="50" width="280" height="360" rx="12" fill="#FF9900" style="filter:drop-shadow(3px 3px 6px rgba(0,0,0,0.2))"/>
  <text x="380" y="78" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Amazon Bedrock</text>
  <text x="380" y="96" text-anchor="middle" font-size="14" font-weight="bold" fill="white">Knowledge Bases</text>

  <rect x="260" y="112" width="240" height="55" rx="8" fill="#E67700"/>
  <text x="380" y="134" text-anchor="middle" font-size="12" font-weight="bold" fill="white">チャンキング</text>
  <text x="380" y="152" text-anchor="middle" font-size="11" fill="#FFF3E0">固定サイズ / セマンティック / 階層型 / なし</text>

  <line x1="380" y1="167" x2="380" y2="185" stroke="white" stroke-width="1.5"/>
  <polygon points="375,185 380,195 385,185" fill="white"/>

  <rect x="260" y="195" width="240" height="55" rx="8" fill="#E67700"/>
  <text x="380" y="217" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Embedding 処理</text>
  <text x="380" y="235" text-anchor="middle" font-size="11" fill="#FFF3E0">Titan Embeddings / Cohere Embed</text>

  <line x1="380" y1="250" x2="380" y2="268" stroke="white" stroke-width="1.5"/>
  <polygon points="375,268 380,278 385,268" fill="white"/>

  <rect x="260" y="278" width="240" height="55" rx="8" fill="#E67700"/>
  <text x="380" y="300" text-anchor="middle" font-size="12" font-weight="bold" fill="white">自動同期</text>
  <text x="380" y="318" text-anchor="middle" font-size="11" fill="#FFF3E0">スケジュール / オンデマンド</text>

  <rect x="260" y="348" width="240" height="48" rx="8" fill="#CC7700"/>
  <text x="380" y="368" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Metadata Filtering</text>
  <text x="380" y="386" text-anchor="middle" font-size="11" fill="#FFF3E0">属性ベース絞り込み検索</text>

  <!-- Arrow -->
  <line x1="520" y1="230" x2="560" y2="230" stroke="#7B1FA2" stroke-width="2"/>
  <polygon points="560,225 570,230 560,235" fill="#7B1FA2"/>

  <!-- Vector Store -->
  <rect x="570" y="50" width="200" height="200" rx="12" fill="#7B1FA2" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="670" y="78" text-anchor="middle" font-size="13" font-weight="bold" fill="white">ベクターストア</text>

  <rect x="590" y="92" width="160" height="32" rx="6" fill="#6A1B9A"/>
  <text x="670" y="113" text-anchor="middle" font-size="12" fill="white">OpenSearch Serverless</text>

  <rect x="590" y="134" width="160" height="32" rx="6" fill="#6A1B9A"/>
  <text x="670" y="155" text-anchor="middle" font-size="12" fill="white">Amazon Aurora (pgvector)</text>

  <rect x="590" y="176" width="160" height="32" rx="6" fill="#6A1B9A"/>
  <text x="670" y="197" text-anchor="middle" font-size="12" fill="white">Pinecone / Redis</text>

  <rect x="590" y="218" width="160" height="24" rx="6" fill="#4A148C"/>
  <text x="670" y="234" text-anchor="middle" font-size="11" fill="#E1BEE7">MongoDBなど</text>

  <!-- Application -->
  <rect x="570" y="275" width="200" height="135" rx="12" fill="#1A9C3E" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.2))"/>
  <text x="670" y="300" text-anchor="middle" font-size="13" font-weight="bold" fill="white">アプリケーション</text>

  <rect x="590" y="312" width="160" height="32" rx="6" fill="#137830"/>
  <text x="670" y="333" text-anchor="middle" font-size="12" fill="white">Retrieve API</text>

  <rect x="590" y="354" width="160" height="44" rx="6" fill="#137830"/>
  <text x="670" y="373" text-anchor="middle" font-size="12" fill="white">RetrieveAndGenerate</text>
  <text x="670" y="389" text-anchor="middle" font-size="11" fill="#C8E6C9">API (端末→回答)</text>

  <!-- Arrow from vector to app -->
  <line x1="670" y1="250" x2="670" y2="275" stroke="#1A9C3E" stroke-width="2"/>
  <polygon points="665,275 670,285 675,275" fill="#1A9C3E"/>

  <!-- Reranking note -->
  <rect x="790" y="130" width="100" height="60" rx="8" fill="#E53935"/>
  <text x="840" y="153" text-anchor="middle" font-size="11" font-weight="bold" fill="white">Reranking</text>
  <text x="840" y="170" text-anchor="middle" font-size="10" fill="#FFCDD2">精度向上</text>
  <line x1="770" y1="160" x2="790" y2="160" stroke="#E53935" stroke-width="1.5" stroke-dasharray="4,2"/>
</svg>
