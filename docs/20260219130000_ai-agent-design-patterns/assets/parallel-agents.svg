<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 360" style="max-height:65vh;width:auto;display:block;margin:0 auto;letter-spacing:0">

  <!-- Input task -->
  <rect x="350" y="20" width="200" height="50" rx="10" fill="rgba(100,181,246,0.2)" stroke="#64b5f6" stroke-width="2"/>
  <text x="450" y="42" text-anchor="middle" fill="#ffffff" font-family="sans-serif" font-size="13" font-weight="bold">タスク</text>
  <text x="450" y="60" text-anchor="middle" fill="#90caf9" font-family="sans-serif" font-size="11">Orchestrator が分割</text>

  <!-- Fan-out label -->
  <text x="450" y="95" text-anchor="middle" fill="#ffd54f" font-family="sans-serif" font-size="11">Fan-out（並列ディスパッチ）</text>

  <!-- Fan-out arrows -->
  <line x1="370" y1="70" x2="145" y2="130" stroke="#4dd0e1" stroke-width="2"/>
  <polygon points="140,133 148,120 157,127" fill="#4dd0e1"/>
  <line x1="430" y1="70" x2="340" y2="130" stroke="#4dd0e1" stroke-width="2"/>
  <polygon points="335,133 342,120 351,127" fill="#4dd0e1"/>
  <line x1="450" y1="70" x2="450" y2="130" stroke="#4dd0e1" stroke-width="2"/>
  <polygon points="450,135 444,122 456,122" fill="#4dd0e1"/>
  <line x1="470" y1="70" x2="560" y2="130" stroke="#4dd0e1" stroke-width="2"/>
  <polygon points="565,133 549,127 558,120" fill="#4dd0e1"/>
  <line x1="530" y1="70" x2="755" y2="130" stroke="#4dd0e1" stroke-width="2"/>
  <polygon points="760,133 743,127 752,120" fill="#4dd0e1"/>

  <!-- Agent boxes -->
  <!-- Agent 1 -->
  <rect x="60" y="135" width="170" height="80" rx="8" fill="rgba(77,208,225,0.15)" stroke="#4dd0e1" stroke-width="1.5"/>
  <text x="145" y="163" text-anchor="middle" fill="#4dd0e1" font-family="sans-serif" font-size="12" font-weight="bold">Agent A</text>
  <text x="145" y="180" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">市場調査</text>
  <text x="145" y="197" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">Web 検索 × 3</text>

  <!-- Agent 2 -->
  <rect x="255" y="135" width="170" height="80" rx="8" fill="rgba(77,208,225,0.15)" stroke="#4dd0e1" stroke-width="1.5"/>
  <text x="340" y="163" text-anchor="middle" fill="#4dd0e1" font-family="sans-serif" font-size="12" font-weight="bold">Agent B</text>
  <text x="340" y="180" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">競合分析</text>
  <text x="340" y="197" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">DB クエリ × 2</text>

  <!-- Agent 3 -->
  <rect x="365" y="135" width="170" height="80" rx="8" fill="rgba(77,208,225,0.15)" stroke="#4dd0e1" stroke-width="1.5"/>
  <text x="450" y="163" text-anchor="middle" fill="#4dd0e1" font-family="sans-serif" font-size="12" font-weight="bold">Agent C</text>
  <text x="450" y="180" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">技術調査</text>
  <text x="450" y="197" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">論文検索 × 5</text>

  <!-- Agent 4 -->
  <rect x="475" y="135" width="170" height="80" rx="8" fill="rgba(77,208,225,0.15)" stroke="#4dd0e1" stroke-width="1.5"/>
  <text x="560" y="163" text-anchor="middle" fill="#4dd0e1" font-family="sans-serif" font-size="12" font-weight="bold">Agent D</text>
  <text x="560" y="180" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">財務分析</text>
  <text x="560" y="197" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">CSV 処理 × 4</text>

  <!-- Agent 5 -->
  <rect x="670" y="135" width="170" height="80" rx="8" fill="rgba(77,208,225,0.15)" stroke="#4dd0e1" stroke-width="1.5"/>
  <text x="755" y="163" text-anchor="middle" fill="#4dd0e1" font-family="sans-serif" font-size="12" font-weight="bold">Agent E</text>
  <text x="755" y="180" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">リスク評価</text>
  <text x="755" y="197" text-anchor="middle" fill="#b2ebf2" font-family="sans-serif" font-size="10">規制 DB × 2</text>

  <!-- Fan-in label -->
  <text x="450" y="242" text-anchor="middle" fill="#ffd54f" font-family="sans-serif" font-size="11">Fan-in（結果集約）</text>

  <!-- Fan-in arrows -->
  <line x1="145" y1="215" x2="370" y2="266" stroke="#81c784" stroke-width="2" stroke-dasharray="5,3"/>
  <line x1="340" y1="215" x2="415" y2="266" stroke="#81c784" stroke-width="2" stroke-dasharray="5,3"/>
  <line x1="450" y1="215" x2="450" y2="266" stroke="#81c784" stroke-width="2" stroke-dasharray="5,3"/>
  <line x1="560" y1="215" x2="485" y2="266" stroke="#81c784" stroke-width="2" stroke-dasharray="5,3"/>
  <line x1="755" y1="215" x2="530" y2="266" stroke="#81c784" stroke-width="2" stroke-dasharray="5,3"/>

  <!-- Aggregator -->
  <rect x="290" y="266" width="320" height="55" rx="10" fill="rgba(255,213,79,0.15)" stroke="#ffd54f" stroke-width="2"/>
  <text x="450" y="290" text-anchor="middle" fill="#ffd54f" font-family="sans-serif" font-size="13" font-weight="bold">Aggregator</text>
  <text x="450" y="310" text-anchor="middle" fill="#fff9c4" font-family="sans-serif" font-size="11">asyncio.gather(*tasks) で全結果を統合</text>

  <!-- Duration comparison -->
  <rect x="100" y="338" width="320" height="16" rx="4" fill="rgba(255,112,67,0.2)"/>
  <text x="115" y="350" fill="#ff8a65" font-family="sans-serif" font-size="10">逐次: 5 agents × 30s = 150s</text>
  <rect x="480" y="338" width="320" height="16" rx="4" fill="rgba(129,199,132,0.2)"/>
  <text x="495" y="350" fill="#a5d6a7" font-family="sans-serif" font-size="10">並列: max(30s) ≒ 30s（5× 高速化）</text>
</svg>
