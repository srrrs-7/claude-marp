<svg viewBox="0 0 800 420" xmlns="http://www.w3.org/2000/svg" font-family="sans-serif" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <text x="400" y="24" text-anchor="middle" font-size="15" font-weight="bold" fill="#f8f8f8">NDCG — Normalized Discounted Cumulative Gain</text>
  <!-- Formula chain -->
  <rect x="20" y="36" width="225" height="70" rx="10" fill="rgba(52,211,153,0.1)" stroke="#34d399" stroke-width="1.5"/>
  <text x="132" y="58" text-anchor="middle" font-size="11" font-weight="bold" fill="#34d399">DCG@K</text>
  <text x="132" y="76" text-anchor="middle" font-size="11" fill="#f8f8f8">Σᵢ relᵢ / log₂(i+1)</text>
  <text x="132" y="96" text-anchor="middle" font-size="10" fill="#94a3b8">上位ほど重みが大きい</text>
  <!-- Arrow -->
  <line x1="245" y1="71" x2="285" y2="71" stroke="#94a3b8" stroke-width="2"/>
  <polygon points="283,67 293,71 283,75" fill="#94a3b8"/>
  <rect x="293" y="36" width="225" height="70" rx="10" fill="rgba(96,165,250,0.1)" stroke="#60a5fa" stroke-width="1.5"/>
  <text x="405" y="58" text-anchor="middle" font-size="11" font-weight="bold" fill="#60a5fa">IDCG@K</text>
  <text x="405" y="76" text-anchor="middle" font-size="11" fill="#f8f8f8">理想的な順序のDCG</text>
  <text x="405" y="96" text-anchor="middle" font-size="10" fill="#94a3b8">高関連を上位に並べた場合</text>
  <!-- Arrow -->
  <line x1="518" y1="71" x2="558" y2="71" stroke="#94a3b8" stroke-width="2"/>
  <polygon points="556,67 566,71 556,75" fill="#94a3b8"/>
  <rect x="566" y="36" width="215" height="70" rx="10" fill="rgba(251,146,60,0.15)" stroke="#fb923c" stroke-width="2"/>
  <text x="673" y="58" text-anchor="middle" font-size="12" font-weight="bold" fill="#fb923c">NDCG = DCG/IDCG</text>
  <text x="673" y="76" text-anchor="middle" font-size="11" fill="#f8f8f8">0 〜 1（高いほど良い）</text>
  <text x="673" y="96" text-anchor="middle" font-size="10" fill="#94a3b8">1 = 理想的な順序</text>
  <!-- Discount illustration -->
  <text x="400" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="#f8f8f8">対数割引の効果</text>
  <!-- Bar chart of log discount -->
  <text x="60" y="155" text-anchor="middle" font-size="10" fill="#94a3b8">順位</text>
  <text x="60" y="172" text-anchor="middle" font-size="11" fill="#f8f8f8">1</text>
  <rect x="80" y="160" width="180" height="18" rx="3" fill="rgba(52,211,153,0.6)"/>
  <text x="270" y="174" font-size="10" fill="#34d399"> ÷log₂(2) = 1.000</text>
  <text x="60" y="196" text-anchor="middle" font-size="11" fill="#f8f8f8">2</text>
  <rect x="80" y="184" width="113" height="18" rx="3" fill="rgba(52,211,153,0.5)"/>
  <text x="203" y="198" font-size="10" fill="#34d399"> ÷log₂(3) = 0.631</text>
  <text x="60" y="220" text-anchor="middle" font-size="11" fill="#f8f8f8">3</text>
  <rect x="80" y="208" width="90" height="18" rx="3" fill="rgba(52,211,153,0.4)"/>
  <text x="180" y="222" font-size="10" fill="#34d399"> ÷log₂(4) = 0.500</text>
  <text x="60" y="244" text-anchor="middle" font-size="11" fill="#f8f8f8">4</text>
  <rect x="80" y="232" width="75" height="18" rx="3" fill="rgba(52,211,153,0.3)"/>
  <text x="165" y="246" font-size="10" fill="#34d399"> ÷log₂(5) = 0.431</text>
  <text x="60" y="268" text-anchor="middle" font-size="11" fill="#f8f8f8">5</text>
  <rect x="80" y="256" width="65" height="18" rx="3" fill="rgba(52,211,153,0.2)"/>
  <text x="155" y="270" font-size="10" fill="#34d399"> ÷log₂(6) = 0.387</text>
  <!-- Multi-grade relevance -->
  <rect x="420" y="128" width="360" height="150" rx="10" fill="rgba(255,255,255,0.04)" stroke="#475569" stroke-width="1.5"/>
  <text x="600" y="150" text-anchor="middle" font-size="12" font-weight="bold" fill="#fbbf24">多段階関連度の例</text>
  <text x="436" y="172" font-size="11" fill="#94a3b8">関連度スコア（0〜3段階）</text>
  <text x="436" y="196" font-size="10" fill="#f8f8f8">完全関連 = 3,  高関連 = 2</text>
  <text x="436" y="214" font-size="10" fill="#f8f8f8">部分関連 = 1,  非関連 = 0</text>
  <text x="436" y="240" font-size="11" fill="#fbbf24">DCG = rel₁/log₂(2) + rel₂/log₂(3) + ...</text>
  <text x="436" y="260" font-size="11" fill="#fbbf24">= 3/1.0 + 2/1.585 + 0/2 + 1/2.322</text>
  <text x="436" y="278" font-size="11" fill="#34d399">= 3.0 + 1.26 + 0 + 0.43 = 4.69</text>
  <!-- NDCG range -->
  <rect x="20" y="294" width="760" height="116" rx="10" fill="rgba(96,165,250,0.06)" stroke="#60a5fa" stroke-width="1.5"/>
  <text x="400" y="314" text-anchor="middle" font-size="12" font-weight="bold" fill="#60a5fa">NDCG の解釈目安</text>
  <!-- Gauge -->
  <rect x="60" y="328" width="680" height="24" rx="12" fill="rgba(255,255,255,0.08)" stroke="#475569" stroke-width="1"/>
  <rect x="60" y="328" width="136" height="24" rx="12" fill="rgba(244,114,182,0.5)"/>
  <rect x="196" y="328" width="136" height="24" fill="rgba(251,146,60,0.5)"/>
  <rect x="332" y="328" width="136" height="24" fill="rgba(251,191,36,0.5)"/>
  <rect x="468" y="328" width="136" height="24" fill="rgba(52,211,153,0.5)"/>
  <rect x="604" y="328" width="136" height="24" rx="12" fill="rgba(96,165,250,0.5)"/>
  <text x="128" y="344" text-anchor="middle" font-size="10" fill="#f8f8f8">0.0〜0.2</text>
  <text x="264" y="344" text-anchor="middle" font-size="10" fill="#f8f8f8">0.2〜0.4</text>
  <text x="400" y="344" text-anchor="middle" font-size="10" fill="#f8f8f8">0.4〜0.6</text>
  <text x="536" y="344" text-anchor="middle" font-size="10" fill="#f8f8f8">0.6〜0.8</text>
  <text x="672" y="344" text-anchor="middle" font-size="10" fill="#f8f8f8">0.8〜1.0</text>
  <text x="128" y="368" text-anchor="middle" font-size="10" fill="#f472b6">ほぼランダム</text>
  <text x="264" y="368" text-anchor="middle" font-size="10" fill="#fb923c">低品質</text>
  <text x="400" y="368" text-anchor="middle" font-size="10" fill="#fbbf24">許容範囲</text>
  <text x="536" y="368" text-anchor="middle" font-size="10" fill="#34d399">良好</text>
  <text x="672" y="368" text-anchor="middle" font-size="10" fill="#60a5fa">優秀</text>
  <text x="400" y="398" text-anchor="middle" font-size="10" fill="#94a3b8">実際のトップシステム: NDCG@10 ≈ 0.6〜0.9（タスクによる）</text>
</svg>
