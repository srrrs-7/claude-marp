<svg viewBox="0 0 800 380" xmlns="http://www.w3.org/2000/svg" font-family="sans-serif" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <text x="400" y="24" text-anchor="middle" font-size="15" font-weight="bold" fill="#f8f8f8">Adjusted R² — 特徴量数によるペナルティ</text>
  <!-- Formulas -->
  <rect x="50" y="38" width="700" height="70" rx="10" fill="rgba(52,211,153,0.12)" stroke="#34d399" stroke-width="1.5"/>
  <text x="400" y="62" text-anchor="middle" font-size="14" font-weight="bold" fill="#34d399">R²_adj = 1 − (1 − R²) · (n − 1) / (n − k − 1)</text>
  <text x="400" y="84" text-anchor="middle" font-size="12" fill="#94a3b8">n: サンプル数   k: 特徴量数（説明変数の数）</text>
  <text x="400" y="100" text-anchor="middle" font-size="11" fill="#94a3b8">特徴量を追加するとペナルティが大きくなり、役立たない変数を追加すると R²_adj が下がる</text>
  <!-- Problem with R²: adding features always increases R² -->
  <rect x="40" y="120" width="340" height="200" rx="12" fill="rgba(244,114,182,0.1)" stroke="#f472b6" stroke-width="1.5"/>
  <text x="210" y="146" text-anchor="middle" font-size="13" font-weight="bold" fill="#f472b6">R²の問題点</text>
  <text x="210" y="166" text-anchor="middle" font-size="11" fill="#94a3b8">特徴量を追加し続けると</text>
  <text x="210" y="182" text-anchor="middle" font-size="11" fill="#94a3b8">R²は常に増加（または不変）</text>
  <!-- Bar chart showing R² vs features -->
  <line x1="70" y1="290" x2="360" y2="290" stroke="#475569" stroke-width="1"/>
  <line x1="70" y1="200" x2="70" y2="290" stroke="#475569" stroke-width="1"/>
  <text x="215" y="306" text-anchor="middle" font-size="10" fill="#94a3b8">特徴量数 →</text>
  <rect x="88" y="232" width="40" height="58" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="108" y="226" text-anchor="middle" font-size="9" fill="#f8f8f8">0.72</text>
  <rect x="144" y="224" width="40" height="66" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="164" y="218" text-anchor="middle" font-size="9" fill="#f8f8f8">0.75</text>
  <rect x="200" y="214" width="40" height="76" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="220" y="208" text-anchor="middle" font-size="9" fill="#f8f8f8">0.78</text>
  <rect x="256" y="210" width="40" height="80" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="276" y="204" text-anchor="middle" font-size="9" fill="#f8f8f8">0.79</text>
  <rect x="312" y="210" width="40" height="80" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="332" y="204" text-anchor="middle" font-size="9" fill="#f8f8f8">0.79</text>
  <text x="90" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=1</text>
  <text x="146" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=2</text>
  <text x="202" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=5</text>
  <text x="258" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=10</text>
  <text x="314" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=15*</text>
  <text x="340" y="315" text-anchor="middle" font-size="8" fill="#f472b6">*ノイズ特徴量</text>
  <!-- Adj R² solution -->
  <rect x="420" y="120" width="340" height="200" rx="12" fill="rgba(52,211,153,0.1)" stroke="#34d399" stroke-width="1.5"/>
  <text x="590" y="146" text-anchor="middle" font-size="13" font-weight="bold" fill="#34d399">Adj R²の解決策</text>
  <text x="590" y="166" text-anchor="middle" font-size="11" fill="#94a3b8">役立たない特徴量を追加すると</text>
  <text x="590" y="182" text-anchor="middle" font-size="11" fill="#94a3b8">Adj R²は減少する</text>
  <line x1="448" y1="200" x2="748" y2="200" stroke="#34d399" stroke-width="1" opacity="0.4"/>
  <line x1="448" y1="290" x2="748" y2="290" stroke="#475569" stroke-width="1"/>
  <line x1="448" y1="200" x2="448" y2="290" stroke="#475569" stroke-width="1"/>
  <text x="596" y="306" text-anchor="middle" font-size="10" fill="#94a3b8">特徴量数 →</text>
  <rect x="466" y="232" width="40" height="58" rx="3" fill="rgba(52,211,153,0.5)"/>
  <text x="486" y="226" text-anchor="middle" font-size="9" fill="#f8f8f8">0.71</text>
  <rect x="522" y="224" width="40" height="66" rx="3" fill="rgba(52,211,153,0.5)"/>
  <text x="542" y="218" text-anchor="middle" font-size="9" fill="#f8f8f8">0.73</text>
  <rect x="578" y="220" width="40" height="70" rx="3" fill="rgba(52,211,153,0.5)"/>
  <text x="598" y="214" text-anchor="middle" font-size="9" fill="#f8f8f8">0.74</text>
  <rect x="634" y="230" width="40" height="60" rx="3" fill="rgba(251,146,60,0.5)"/>
  <text x="654" y="224" text-anchor="middle" font-size="9" fill="#fbbf24">0.71↓</text>
  <rect x="690" y="240" width="40" height="50" rx="3" fill="rgba(244,114,182,0.5)"/>
  <text x="710" y="234" text-anchor="middle" font-size="9" fill="#f472b6">0.69↓↓</text>
  <text x="468" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=1</text>
  <text x="524" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=2</text>
  <text x="580" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=5</text>
  <text x="636" y="300" text-anchor="middle" font-size="8" fill="#94a3b8">k=10</text>
  <text x="692" y="300" text-anchor="middle" font-size="8" fill="#f472b6">k=15*</text>
  <!-- Bottom rule -->
  <rect x="40" y="334" width="720" height="36" rx="8" fill="rgba(52,211,153,0.1)" stroke="#34d399" stroke-width="1"/>
  <text x="400" y="356" text-anchor="middle" font-size="12" fill="#f8f8f8">原則: モデル選択では R²_adj を使い、R² と両方記録する。特徴量追加後に Adj R² が下がったら過剰追加のサイン</text>
</svg>
