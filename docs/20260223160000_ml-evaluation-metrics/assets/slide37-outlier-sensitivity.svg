<svg viewBox="0 0 800 380" xmlns="http://www.w3.org/2000/svg" font-family="sans-serif" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <text x="400" y="24" text-anchor="middle" font-size="15" font-weight="bold" fill="#f8f8f8">外れ値への感度: 損失関数の比較</text>
  <!-- Bar chart comparing impact -->
  <!-- When outlier residual = 10, normalized values: MAE=10, MSE=100, RMSE=10, Huber≈9.5 -->
  <!-- Normalize to max=100, so: MAE=10%, MSE=100%, RMSE(per sample)=100, Huber=9.5% -->
  <!-- Let's show bar chart of loss contribution of ONE outlier vs normal point (residual=1) -->
  <!-- Normal point residual=1: MAE=1, MSE=1, Huber=0.5, -->
  <!-- Outlier residual=10: MAE=10, MSE=100, Huber=9.5 (d=1) -->
  <!-- Ratio outlier/normal: MAE=10x, MSE=100x, Huber=19x -->
  <text x="400" y="50" text-anchor="middle" font-size="12" fill="#94a3b8">残差=1 の通常点 vs 残差=10 の外れ値1点が損失に与える相対的寄与</text>
  <!-- Axes -->
  <line x1="80" y1="300" x2="720" y2="300" stroke="#475569" stroke-width="1.5"/>
  <line x1="80" y1="60" x2="80" y2="300" stroke="#475569" stroke-width="1.5"/>
  <text x="400" y="322" text-anchor="middle" font-size="12" fill="#94a3b8">損失指標</text>
  <text x="42" y="185" text-anchor="middle" font-size="12" fill="#94a3b8" transform="rotate(-90,42,185)">外れ値/通常 の損失比</text>
  <!-- y ticks -->
  <text x="70" y="304" text-anchor="end" font-size="10" fill="#94a3b8">0x</text>
  <text x="70" y="254" text-anchor="end" font-size="10" fill="#94a3b8">25x</text>
  <text x="70" y="204" text-anchor="end" font-size="10" fill="#94a3b8">50x</text>
  <text x="70" y="154" text-anchor="end" font-size="10" fill="#94a3b8">75x</text>
  <text x="70" y="104" text-anchor="end" font-size="10" fill="#94a3b8">100x</text>
  <text x="70" y="62" text-anchor="end" font-size="10" fill="#94a3b8">100x+</text>
  <!-- Grid -->
  <line x1="80" y1="254" x2="720" y2="254" stroke="#475569" stroke-width="0.5" opacity="0.5"/>
  <line x1="80" y1="204" x2="720" y2="204" stroke="#475569" stroke-width="0.5" opacity="0.5"/>
  <line x1="80" y1="154" x2="720" y2="154" stroke="#475569" stroke-width="0.5" opacity="0.5"/>
  <line x1="80" y1="104" x2="720" y2="104" stroke="#475569" stroke-width="0.5" opacity="0.5"/>
  <!-- MAE bar: ratio=10x → height=10/100*240=24px: y=300-24=276 -->
  <rect x="120" y="276" width="100" height="24" rx="6" fill="rgba(52,211,153,0.7)" stroke="#34d399" stroke-width="1.5"/>
  <text x="170" y="266" text-anchor="middle" font-size="12" font-weight="bold" fill="#34d399">10x</text>
  <text x="170" y="316" text-anchor="middle" font-size="12" fill="#34d399">MAE</text>
  <!-- Huber bar: ratio≈19x (delta=1, outlier=10: loss=10-0.5=9.5, normal=0.5→ratio=19) -->
  <rect x="270" y="254" width="100" height="46" rx="6" fill="rgba(167,139,250,0.7)" stroke="#a78bfa" stroke-width="1.5"/>
  <text x="320" y="244" text-anchor="middle" font-size="12" font-weight="bold" fill="#a78bfa">19x</text>
  <text x="320" y="316" text-anchor="middle" font-size="12" fill="#a78bfa">Huber</text>
  <!-- RMSE bar: sqrt(100)/sqrt(1)=10x at sample level, but MSE=100x -->
  <!-- Per-sample RMSE contribution ratio = 10x like MAE -->
  <rect x="420" y="276" width="100" height="24" rx="6" fill="rgba(251,146,60,0.7)" stroke="#fb923c" stroke-width="1.5"/>
  <text x="470" y="266" text-anchor="middle" font-size="12" font-weight="bold" fill="#fb923c">10x</text>
  <text x="470" y="316" text-anchor="middle" font-size="12" fill="#fb923c">RMSE*</text>
  <!-- MSE bar: ratio=100x → full height=240: y=60 -->
  <rect x="570" y="70" width="100" height="230" rx="6" fill="rgba(244,114,182,0.7)" stroke="#f472b6" stroke-width="2"/>
  <text x="620" y="64" text-anchor="middle" font-size="12" font-weight="bold" fill="#f472b6">100x!</text>
  <text x="620" y="316" text-anchor="middle" font-size="12" fill="#f472b6">MSE</text>
  <!-- Caption -->
  <text x="470" y="335" text-anchor="middle" font-size="9" fill="#94a3b8">* RMSEは外れ値が多いとその影響がより顕著になる</text>
  <!-- Bottom summary box -->
  <rect x="80" y="344" width="640" height="30" rx="8" fill="rgba(52,211,153,0.1)" stroke="#34d399" stroke-width="1"/>
  <text x="400" y="364" text-anchor="middle" font-size="11" fill="#f8f8f8">外れ値が多いデータ: MAE or Huber  |  外れ値が少ない/重要でない: MSE or RMSE</text>
</svg>
