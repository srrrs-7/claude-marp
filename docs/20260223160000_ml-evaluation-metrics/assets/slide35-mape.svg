<svg viewBox="0 0 800 380" xmlns="http://www.w3.org/2000/svg" font-family="sans-serif" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <text x="400" y="24" text-anchor="middle" font-size="15" font-weight="bold" fill="#f8f8f8">MAPE と SMAPE — パーセント誤差</text>
  <!-- MAPE formula -->
  <rect x="30" y="38" width="360" height="60" rx="10" fill="rgba(251,146,60,0.12)" stroke="#fb923c" stroke-width="1.5"/>
  <text x="210" y="60" text-anchor="middle" font-size="13" font-weight="bold" fill="#fb923c">MAPE = (100/n)·Σ |y−ŷ|/|y|</text>
  <text x="210" y="82" text-anchor="middle" font-size="11" fill="#94a3b8">Mean Absolute Percentage Error (%)</text>
  <!-- SMAPE formula -->
  <rect x="410" y="38" width="360" height="60" rx="10" fill="rgba(52,211,153,0.12)" stroke="#34d399" stroke-width="1.5"/>
  <text x="590" y="60" text-anchor="middle" font-size="12" font-weight="bold" fill="#34d399">SMAPE = (200/n)·Σ |y−ŷ|/(|y|+|ŷ|)</text>
  <text x="590" y="82" text-anchor="middle" font-size="11" fill="#94a3b8">Symmetric MAPE（対称版）</text>
  <!-- MAPE problem: zero issue -->
  <rect x="30" y="112" width="360" height="200" rx="12" fill="rgba(251,146,60,0.08)" stroke="#fb923c" stroke-width="1.5"/>
  <text x="210" y="136" text-anchor="middle" font-size="12" font-weight="bold" fill="#fb923c">MAPE の問題点</text>
  <line x1="44" y1="148" x2="376" y2="148" stroke="#fb923c" stroke-width="1" opacity="0.4"/>
  <!-- Example table -->
  <text x="100" y="168" text-anchor="middle" font-size="11" font-weight="bold" fill="#94a3b8">y_true</text>
  <text x="200" y="168" text-anchor="middle" font-size="11" font-weight="bold" fill="#94a3b8">y_pred</text>
  <text x="300" y="168" text-anchor="middle" font-size="11" font-weight="bold" fill="#94a3b8">MAPE寄与</text>
  <line x1="44" y1="174" x2="376" y2="174" stroke="#475569" stroke-width="0.5"/>
  <text x="100" y="192" text-anchor="middle" font-size="11" fill="#f8f8f8">100</text>
  <text x="200" y="192" text-anchor="middle" font-size="11" fill="#f8f8f8">90</text>
  <text x="300" y="192" text-anchor="middle" font-size="11" fill="#34d399">10%</text>
  <line x1="44" y1="198" x2="376" y2="198" stroke="#475569" stroke-width="0.5"/>
  <text x="100" y="216" text-anchor="middle" font-size="11" fill="#f8f8f8">10</text>
  <text x="200" y="216" text-anchor="middle" font-size="11" fill="#f8f8f8">9</text>
  <text x="300" y="216" text-anchor="middle" font-size="11" fill="#34d399">10%</text>
  <line x1="44" y1="222" x2="376" y2="222" stroke="#475569" stroke-width="0.5"/>
  <text x="100" y="240" text-anchor="middle" font-size="11" fill="#f8f8f8">1</text>
  <text x="200" y="240" text-anchor="middle" font-size="11" fill="#f8f8f8">0.9</text>
  <text x="300" y="240" text-anchor="middle" font-size="11" fill="#34d399">10%</text>
  <line x1="44" y1="246" x2="376" y2="246" stroke="#475569" stroke-width="0.5"/>
  <text x="100" y="264" text-anchor="middle" font-size="11" fill="#f8f8f8">0.01</text>
  <text x="200" y="264" text-anchor="middle" font-size="11" fill="#f8f8f8">0.011</text>
  <text x="300" y="264" text-anchor="middle" font-size="11" fill="#f472b6">10%</text>
  <line x1="44" y1="270" x2="376" y2="270" stroke="#475569" stroke-width="0.5"/>
  <text x="100" y="288" text-anchor="middle" font-size="11" fill="#f8f8f8">0</text>
  <text x="200" y="288" text-anchor="middle" font-size="11" fill="#f8f8f8">0.1</text>
  <text x="300" y="288" text-anchor="middle" font-size="11" fill="#f472b6">∞ !</text>
  <text x="210" y="306" text-anchor="middle" font-size="10" fill="#f472b6">y=0 のとき発散!</text>
  <!-- SMAPE advantage -->
  <rect x="410" y="112" width="360" height="200" rx="12" fill="rgba(52,211,153,0.08)" stroke="#34d399" stroke-width="1.5"/>
  <text x="590" y="136" text-anchor="middle" font-size="12" font-weight="bold" fill="#34d399">SMAPE の改善点</text>
  <line x1="424" y1="148" x2="756" y2="148" stroke="#34d399" stroke-width="1" opacity="0.4"/>
  <text x="590" y="170" text-anchor="middle" font-size="11" fill="#94a3b8">分母を (|y|+|ŷ|)/2 にすることで</text>
  <text x="590" y="188" text-anchor="middle" font-size="11" fill="#94a3b8">y=0 でも発散しにくくなる</text>
  <line x1="424" y1="200" x2="756" y2="200" stroke="#34d399" stroke-width="1" opacity="0.4"/>
  <text x="430" y="222" font-size="11" fill="#34d399">✓</text>
  <text x="444" y="222" font-size="11" fill="#f8f8f8">0〜200%の範囲で安定</text>
  <text x="430" y="244" font-size="11" fill="#34d399">✓</text>
  <text x="444" y="244" font-size="11" fill="#f8f8f8">過予測/低予測を対称に評価</text>
  <text x="430" y="266" font-size="11" fill="#f472b6">✗</text>
  <text x="444" y="266" font-size="11" fill="#94a3b8">y=0かつŷ=0で0/0（定義外）</text>
  <text x="430" y="288" font-size="11" fill="#34d399">✓</text>
  <text x="444" y="288" font-size="11" fill="#f8f8f8">実務で多用（時系列予測等）</text>
  <!-- Bottom note -->
  <rect x="30" y="326" width="740" height="46" rx="10" fill="rgba(167,139,250,0.1)" stroke="#a78bfa" stroke-width="1"/>
  <text x="400" y="346" text-anchor="middle" font-size="12" font-weight="bold" fill="#a78bfa">実務での使い分け</text>
  <text x="400" y="364" text-anchor="middle" font-size="11" fill="#f8f8f8">y=0がない、値が正の需要予測 → MAPE  |  ゼロを含む可能性あり → SMAPE または log-RMSE</text>
</svg>
