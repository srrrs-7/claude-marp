<svg viewBox="0 0 900 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;max-width:100%;display:block;margin:0 auto;letter-spacing:0">
  <!-- Background -->
  <rect width="900" height="400" fill="#f8f9fa"/>

  <!-- Title -->
  <text x="450" y="30" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="#333">IAM権限評価の全体像</text>

  <!-- Principal -->
  <g id="principal">
    <rect x="50" y="150" width="140" height="100" rx="12" fill="#667EEA" stroke="#5A67D8" stroke-width="3"/>
    <text x="120" y="185" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">Principal</text>
    <text x="120" y="210" text-anchor="middle" font-family="Arial" font-size="13" fill="white">ユーザー/</text>
    <text x="120" y="230" text-anchor="middle" font-family="Arial" font-size="13" fill="white">ロール</text>
  </g>

  <!-- Evaluation Engine -->
  <g id="engine">
    <rect x="380" y="120" width="180" height="160" rx="12" fill="#FC8181" stroke="#E53E3E" stroke-width="3"/>
    <text x="470" y="155" text-anchor="middle" font-family="Arial" font-size="18" font-weight="bold" fill="white">評価エンジン</text>

    <!-- Inputs to engine -->
    <rect x="395" y="180" width="150" height="30" rx="5" fill="white" opacity="0.9"/>
    <text x="470" y="200" text-anchor="middle" font-family="Arial" font-size="11" fill="#333">IAMポリシー</text>

    <rect x="395" y="215" width="150" height="30" rx="5" fill="white" opacity="0.9"/>
    <text x="470" y="235" text-anchor="middle" font-family="Arial" font-size="11" fill="#333">リソースポリシー</text>

    <rect x="395" y="250" width="150" height="30" rx="5" fill="white" opacity="0.9"/>
    <text x="470" y="270" text-anchor="middle" font-family="Arial" font-size="11" fill="#333">SCP</text>
  </g>

  <!-- AWS Resource -->
  <g id="resource">
    <rect x="710" y="150" width="140" height="100" rx="12" fill="#48BB78" stroke="#38A169" stroke-width="3"/>
    <text x="780" y="185" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">AWS</text>
    <text x="780" y="210" text-anchor="middle" font-family="Arial" font-size="16" font-weight="bold" fill="white">リソース</text>
    <text x="780" y="235" text-anchor="middle" font-family="Arial" font-size="12" fill="white">(S3/EC2/Lambda)</text>
  </g>

  <!-- Policy Sources (Left side) -->
  <g id="policies">
    <rect x="230" y="50" width="120" height="50" rx="8" fill="#63B3ED" stroke="#3182CE" stroke-width="2"/>
    <text x="290" y="70" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">IAM</text>
    <text x="290" y="88" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">ポリシー</text>

    <rect x="230" y="175" width="120" height="50" rx="8" fill="#90CDF4" stroke="#4299E1" stroke-width="2"/>
    <text x="290" y="195" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">リソース</text>
    <text x="290" y="213" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">ポリシー</text>

    <rect x="230" y="300" width="120" height="50" rx="8" fill="#BEE3F8" stroke="#63B3ED" stroke-width="2"/>
    <text x="290" y="330" text-anchor="middle" font-family="Arial" font-size="13" font-weight="bold" fill="white">SCP</text>
  </g>

  <!-- Arrows -->
  
  <!-- Principal -> Engine -->
  <path d="M 190 200 L 380 200" stroke="#5A67D8" stroke-width="3" fill="none"/>
  <polygon points="380,200 372,196.5 372,203.5" fill="#5A67D8"/>
  <text x="270" y="190" font-family="Arial" font-size="12" font-weight="bold" fill="#5A67D8">リクエスト</text>

  <!-- Policies -> Engine -->
  <path d="M 350 75 L 410 140" stroke="#3182CE" stroke-width="2.5" fill="none"/>
  <polygon points="410,140 407.1,131.7 402,136.5" fill="#E53E3E"/>
  <path d="M 350 200 L 380 200" stroke="#4299E1" stroke-width="2.5" fill="none"/>
  <polygon points="380,200 372,196.5 372,203.5" fill="#E53E3E"/>
  <path d="M 350 325 L 410 260" stroke="#63B3ED" stroke-width="2.5" fill="none"/>
  <polygon points="410,260 402,263.5 407.1,268.3" fill="#E53E3E"/>

  <!-- Engine -> Resource -->
  <path d="M 560 200 L 710 200" stroke="#E53E3E" stroke-width="3" fill="none"/>
  <polygon points="710,200 702,196.5 702,203.5" fill="#38A169"/>
  <text x="620" y="190" font-family="Arial" font-size="12" font-weight="bold" fill="#E53E3E">許可/拒否</text>

  <!-- Legend -->
  <g id="legend">
    <rect x="20" y="20" width="180" height="60" rx="8" fill="white" stroke="#ddd" stroke-width="2"/>
    <circle cx="35" cy="40" r="5" fill="#667EEA"/>
    <text x="48" y="44" font-family="Arial" font-size="11" fill="#333">プリンシパル</text>
    <circle cx="35" cy="60" r="5" fill="#FC8181"/>
    <text x="48" y="64" font-family="Arial" font-size="11" fill="#333">ポリシー評価</text>
    <circle cx="110" cy="40" r="5" fill="#48BB78"/>
    <text x="123" y="44" font-family="Arial" font-size="11" fill="#333">リソース</text>
    <circle cx="110" cy="60" r="5" fill="#63B3ED"/>
    <text x="123" y="64" font-family="Arial" font-size="11" fill="#333">ポリシー入力</text>
  </g>
</svg>
