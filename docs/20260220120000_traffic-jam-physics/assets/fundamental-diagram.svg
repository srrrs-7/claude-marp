<svg viewBox="0 0 960 460" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect width="960" height="460" fill="#f8fafc" rx="12"/>
  <text x="480" y="36" text-anchor="middle" font-size="19" font-weight="bold" fill="#1e293b">交通流の基本図（Fundamental Diagram）</text>

  <!-- Left graph: density-flow -->
  <rect x="40" y="55" width="420" height="340" rx="10" fill="#f0f9ff" stroke="#0ea5e9" stroke-width="1.5"/>
  <text x="250" y="80" text-anchor="middle" font-size="14" font-weight="bold" fill="#0c4a6e">密度（k）vs 流量（q）</text>

  <!-- Axes -->
  <line x1="80" y1="355" x2="430" y2="355" stroke="#334155" stroke-width="2"/>
  <polygon points="434,355 424,350 424,360" fill="#334155"/>
  <line x1="80" y1="355" x2="80" y2="100" stroke="#334155" stroke-width="2"/>
  <polygon points="80,96 75,106 85,106" fill="#334155"/>

  <text x="255" y="378" text-anchor="middle" font-size="12" fill="#475569">密度 k（台/km）→</text>
  <text x="58" y="230" text-anchor="middle" font-size="12" fill="#475569" transform="rotate(-90,58,230)">流量 q（台/h）→</text>

  <!-- Axis ticks -->
  <text x="80" y="372" text-anchor="middle" font-size="10" fill="#64748b">0</text>
  <text x="180" y="372" text-anchor="middle" font-size="10" fill="#64748b">k_cr</text>
  <text x="340" y="372" text-anchor="middle" font-size="10" fill="#64748b">k_jam</text>

  <!-- Fundamental diagram curve (inverted U) -->
  <path d="M80,355 Q180,100 255,95 Q330,95 420,355" fill="none" stroke="#0ea5e9" stroke-width="3"/>

  <!-- Critical point -->
  <circle cx="255" cy="95" r="7" fill="#f59e0b" stroke="#d97706" stroke-width="2"/>
  <line x1="255" y1="95" x2="255" y2="355" stroke="#d97706" stroke-width="1.5" stroke-dasharray="5,4"/>
  <text x="262" y="115" font-size="11" fill="#92400e" font-weight="bold">臨界点</text>
  <text x="262" y="130" font-size="10" fill="#92400e">q_max</text>

  <!-- Regions -->
  <text x="140" y="200" text-anchor="middle" font-size="12" fill="#166534" font-weight="bold">自由流</text>
  <text x="140" y="218" text-anchor="middle" font-size="11" fill="#166534">Free Flow</text>
  <text x="360" y="200" text-anchor="middle" font-size="12" fill="#991b1b" font-weight="bold">渋滞流</text>
  <text x="360" y="218" text-anchor="middle" font-size="11" fill="#991b1b">Congested</text>

  <!-- Right graph: density-speed -->
  <rect x="500" y="55" width="420" height="340" rx="10" fill="#fdf4ff" stroke="#a855f7" stroke-width="1.5"/>
  <text x="710" y="80" text-anchor="middle" font-size="14" font-weight="bold" fill="#581c87">密度（k）vs 速度（v）</text>

  <!-- Axes -->
  <line x1="540" y1="355" x2="890" y2="355" stroke="#334155" stroke-width="2"/>
  <polygon points="894,355 884,350 884,360" fill="#334155"/>
  <line x1="540" y1="355" x2="540" y2="100" stroke="#334155" stroke-width="2"/>
  <polygon points="540,96 535,106 545,106" fill="#334155"/>

  <text x="715" y="378" text-anchor="middle" font-size="12" fill="#475569">密度 k（台/km）→</text>
  <text x="518" y="230" text-anchor="middle" font-size="12" fill="#475569" transform="rotate(-90,518,230)">速度 v（km/h）→</text>

  <!-- Greenshields curve: v = v_f(1 - k/k_j) -->
  <line x1="540" y1="115" x2="840" y2="355" stroke="#a855f7" stroke-width="3"/>

  <!-- Max speed label -->
  <text x="550" y="112" font-size="11" fill="#6b21a8" font-weight="bold">v_free</text>
  <text x="550" y="126" font-size="10" fill="#6b21a8">（自由速度）</text>

  <!-- Jam density label -->
  <text x="832" y="372" text-anchor="middle" font-size="10" fill="#64748b">k_jam</text>
  <line x1="840" y1="355" x2="840" y2="100" stroke="#dc2626" stroke-width="1" stroke-dasharray="5,4"/>
  <text x="852" y="200" font-size="10" fill="#dc2626">v=0</text>
  <text x="852" y="213" font-size="10" fill="#dc2626">（完全</text>
  <text x="852" y="226" font-size="10" fill="#dc2626">停止）</text>

  <!-- Greenshields model label -->
  <text x="650" y="200" font-size="12" fill="#7c3aed">Greenshields モデル</text>
  <text x="650" y="216" font-size="11" fill="#7c3aed">v = v_f (1 - k/k_j)</text>

  <!-- Bottom note -->
  <text x="480" y="445" text-anchor="middle" font-size="12" fill="#64748b">臨界密度を超えると流量は減少 → 渋滞の「引き金」</text>
</svg>
