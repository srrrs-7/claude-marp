<svg viewBox="0 0 960 480" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;background:#0d1117">
  <text x="480" y="36" text-anchor="middle" font-size="18" font-weight="bold" fill="#e6edf3" font-family="sans-serif">AI応答ストリーミング — 3パターン比較</text>

  <!-- Pattern 1: ReadableStream (Vercel AI SDK) -->
  <rect x="30" y="56" width="280" height="380" rx="12" fill="#1c1917" stroke="#f97316" stroke-width="2"/>
  <text x="170" y="84" text-anchor="middle" font-size="14" font-weight="bold" fill="#fb923c" font-family="sans-serif">ReadableStream</text>
  <text x="170" y="102" text-anchor="middle" font-size="11" fill="#fbbf24" font-family="sans-serif">Vercel AI SDK 標準</text>
  <!-- Flow -->
  <rect x="60" y="118" width="220" height="36" rx="6" fill="#374151" stroke="#6b7280" stroke-width="1"/>
  <text x="170" y="140" text-anchor="middle" font-size="11" fill="#d1d5db" font-family="sans-serif">Client: fetch('/api/chat')</text>
  <line x1="170" y1="154" x2="170" y2="175" stroke="#f97316" stroke-width="1.5"/>
  <polygon points="170,179 164,169 176,169" fill="#f97316"/>
  <rect x="60" y="179" width="220" height="36" rx="6" fill="#7c2d12" stroke="#f97316" stroke-width="1"/>
  <text x="170" y="201" text-anchor="middle" font-size="11" fill="#fed7aa" font-family="sans-serif">Server: streamText() → Response</text>
  <line x1="170" y1="215" x2="170" y2="236" stroke="#f97316" stroke-width="1.5"/>
  <polygon points="170,240 164,230 176,230" fill="#f97316"/>
  <rect x="60" y="240" width="220" height="36" rx="6" fill="#7c2d12" stroke="#f97316" stroke-width="1"/>
  <text x="170" y="262" text-anchor="middle" font-size="11" fill="#fed7aa" font-family="sans-serif">Client: readStreamableValue()</text>
  <!-- Props list -->
  <text x="60" y="300" font-size="12" fill="#4ade80" font-family="sans-serif">✅ fetchベース・Edge対応</text>
  <text x="60" y="320" font-size="12" fill="#4ade80" font-family="sans-serif">✅ 実装が最もシンプル</text>
  <text x="60" y="340" font-size="12" fill="#4ade80" font-family="sans-serif">✅ Vercel AI SDKが自動管理</text>
  <text x="60" y="360" font-size="12" fill="#fbbf24" font-family="sans-serif">⚡ AI応答の主流パターン</text>
  <text x="60" y="395" font-size="11" fill="#6b7280" font-family="sans-serif">通信: HTTP/1.1 or HTTP/2</text>
  <text x="60" y="413" font-size="11" fill="#6b7280" font-family="sans-serif">方向: サーバー → クライアント</text>

  <!-- Pattern 2: SSE -->
  <rect x="340" y="56" width="280" height="380" rx="12" fill="#0c1a14" stroke="#22c55e" stroke-width="2"/>
  <text x="480" y="84" text-anchor="middle" font-size="14" font-weight="bold" fill="#4ade80" font-family="sans-serif">SSE</text>
  <text x="480" y="102" text-anchor="middle" font-size="11" fill="#86efac" font-family="sans-serif">Server-Sent Events</text>
  <!-- Flow -->
  <rect x="370" y="118" width="220" height="36" rx="6" fill="#374151" stroke="#6b7280" stroke-width="1"/>
  <text x="480" y="140" text-anchor="middle" font-size="11" fill="#d1d5db" font-family="sans-serif">Client: EventSource 接続</text>
  <line x1="480" y1="154" x2="480" y2="175" stroke="#22c55e" stroke-width="1.5"/>
  <polygon points="480,179 474,169 486,169" fill="#22c55e"/>
  <rect x="370" y="179" width="220" height="36" rx="6" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
  <text x="480" y="196" text-anchor="middle" font-size="11" fill="#86efac" font-family="sans-serif">Server: data: ...\n\n を送信</text>
  <text x="480" y="212" text-anchor="middle" font-size="10" fill="#4ade80" font-family="sans-serif">text/event-stream</text>
  <line x1="480" y1="215" x2="480" y2="236" stroke="#22c55e" stroke-width="1.5"/>
  <polygon points="480,240 474,230 486,230" fill="#22c55e"/>
  <rect x="370" y="240" width="220" height="36" rx="6" fill="#14532d" stroke="#22c55e" stroke-width="1"/>
  <text x="480" y="258" text-anchor="middle" font-size="11" fill="#86efac" font-family="sans-serif">Client: onmessage handler</text>
  <!-- Props list -->
  <text x="370" y="300" font-size="12" fill="#4ade80" font-family="sans-serif">✅ HTTP/1.1互換・シンプル</text>
  <text x="370" y="320" font-size="12" fill="#4ade80" font-family="sans-serif">✅ 自動再接続機能あり</text>
  <text x="370" y="340" font-size="12" fill="#4ade80" font-family="sans-serif">✅ テキストストリームに最適</text>
  <text x="370" y="360" font-size="12" fill="#fbbf24" font-family="sans-serif">❌ サーバー→クライアントのみ</text>
  <text x="370" y="395" font-size="11" fill="#6b7280" font-family="sans-serif">通信: HTTP/1.1 持続接続</text>
  <text x="370" y="413" font-size="11" fill="#6b7280" font-family="sans-serif">方向: サーバー → クライアント</text>

  <!-- Pattern 3: WebSocket -->
  <rect x="650" y="56" width="280" height="380" rx="12" fill="#162032" stroke="#3b82f6" stroke-width="2"/>
  <text x="790" y="84" text-anchor="middle" font-size="14" font-weight="bold" fill="#60a5fa" font-family="sans-serif">WebSocket</text>
  <text x="790" y="102" text-anchor="middle" font-size="11" fill="#93c5fd" font-family="sans-serif">双方向リアルタイム通信</text>
  <!-- Flow -->
  <rect x="680" y="118" width="220" height="36" rx="6" fill="#374151" stroke="#6b7280" stroke-width="1"/>
  <text x="790" y="140" text-anchor="middle" font-size="11" fill="#d1d5db" font-family="sans-serif">Client: WebSocket 接続確立</text>
  <line x1="790" y1="154" x2="790" y2="175" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="790,179 784,169 796,169" fill="#3b82f6"/>
  <rect x="680" y="179" width="220" height="36" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
  <text x="790" y="196" text-anchor="middle" font-size="11" fill="#93c5fd" font-family="sans-serif">双方向メッセージ送受信</text>
  <text x="790" y="212" text-anchor="middle" font-size="10" fill="#60a5fa" font-family="sans-serif">ws.send() / ws.onmessage</text>
  <line x1="790" y1="215" x2="790" y2="236" stroke="#3b82f6" stroke-width="1.5"/>
  <polygon points="790,240 784,230 796,230" fill="#3b82f6"/>
  <rect x="680" y="240" width="220" height="36" rx="6" fill="#1e3a5f" stroke="#3b82f6" stroke-width="1"/>
  <text x="790" y="262" text-anchor="middle" font-size="11" fill="#93c5fd" font-family="sans-serif">低レイテンシ双方向更新</text>
  <!-- Props list -->
  <text x="680" y="300" font-size="12" fill="#4ade80" font-family="sans-serif">✅ 双方向通信</text>
  <text x="680" y="320" font-size="12" fill="#4ade80" font-family="sans-serif">✅ 低レイテンシ</text>
  <text x="680" y="340" font-size="12" fill="#fbbf24" font-family="sans-serif">❌ 実装が複雑</text>
  <text x="680" y="360" font-size="12" fill="#fbbf24" font-family="sans-serif">❌ スケーリングが難しい</text>
  <text x="680" y="395" font-size="11" fill="#6b7280" font-family="sans-serif">通信: TCP持続接続</text>
  <text x="680" y="413" font-size="11" fill="#6b7280" font-family="sans-serif">方向: 双方向</text>

  <!-- Bottom recommendation -->
  <text x="480" y="455" text-anchor="middle" font-size="11" fill="#9ca3af" font-family="sans-serif">推奨: チャット/生成 → ReadableStream or SSE / 音声AI・リアルタイム翻訳 → WebSocket</text>
</svg>
