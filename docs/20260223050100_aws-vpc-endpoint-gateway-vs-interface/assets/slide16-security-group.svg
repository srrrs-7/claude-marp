<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="800" height="400" fill="#fafafa"/>
  <text x="400" y="26" font-family="Arial,sans-serif" font-size="14" fill="#7b5ea7" font-weight="bold" text-anchor="middle">Interface Endpoint — セキュリティグループ設計</text>
  <!-- VPC -->
  <rect x="15" y="38" width="500" height="340" rx="8" fill="#f0f4ff" stroke="#7b5ea7" stroke-width="2"/>
  <text x="33" y="58" font-family="Arial,sans-serif" font-size="12" fill="#7b5ea7" font-weight="bold">VPC</text>
  <!-- EC2 with SG -->
  <rect x="32" y="65" width="160" height="88" rx="6" fill="#fff" stroke="#7b5ea7" stroke-width="2" style="filter:drop-shadow(1px 1px 4px rgba(0,0,0,0.10))"/>
  <rect x="32" y="65" width="160" height="22" rx="6" fill="#7b5ea7"/>
  <text x="112" y="81" font-family="Arial,sans-serif" font-size="10" fill="#fff" text-anchor="middle" font-weight="bold">EC2 Instance</text>
  <text x="112" y="102" font-family="Arial,sans-serif" font-size="10" fill="#555" text-anchor="middle">10.0.1.10</text>
  <text x="112" y="118" font-family="Arial,sans-serif" font-size="9" fill="#7b5ea7" text-anchor="middle">SG: sg-app (sg-0aaa)</text>
  <text x="112" y="132" font-family="Arial,sans-serif" font-size="9" fill="#888" text-anchor="middle">Outbound: 443 → sg-ep</text>
  <!-- ENI with SG -->
  <rect x="240" y="65" width="180" height="88" rx="6" fill="#fff" stroke="#10b981" stroke-width="2" style="filter:drop-shadow(1px 1px 4px rgba(0,0,0,0.10))"/>
  <rect x="240" y="65" width="180" height="22" rx="6" fill="#10b981"/>
  <text x="330" y="81" font-family="Arial,sans-serif" font-size="10" fill="#fff" text-anchor="middle" font-weight="bold">Interface Endpoint ENI</text>
  <text x="330" y="102" font-family="Arial,sans-serif" font-size="10" fill="#059669" text-anchor="middle">10.0.1.50</text>
  <text x="330" y="118" font-family="Arial,sans-serif" font-size="9" fill="#10b981" text-anchor="middle">SG: sg-ep (sg-0bbb)</text>
  <text x="330" y="132" font-family="Arial,sans-serif" font-size="9" fill="#888" text-anchor="middle">Inbound: 443 ← sg-app</text>
  <!-- Arrow EC2 to ENI -->
  <line x1="192" y1="109" x2="238" y2="109" stroke="#7b5ea7" stroke-width="2"/>
  <polygon points="234,103 246,109 234,115" fill="#7b5ea7"/>
  <!-- EC2 SG Rules table -->
  <rect x="32" y="175" width="200" height="160" rx="5" fill="#fff" stroke="#7b5ea7" stroke-width="1.5"/>
  <rect x="32" y="175" width="200" height="22" rx="5" fill="#7b5ea7" opacity="0.15"/>
  <text x="132" y="191" font-family="Arial,sans-serif" font-size="10" fill="#7b5ea7" text-anchor="middle" font-weight="bold">sg-app — EC2 のルール</text>
  <!-- Inbound -->
  <text x="42" y="210" font-family="Arial,sans-serif" font-size="9" fill="#555" font-weight="bold">Inbound</text>
  <rect x="38" y="215" width="185" height="17" rx="2" fill="#f8fafc"/>
  <text x="42" y="227" font-family="monospace,Arial" font-size="8" fill="#888">Type: HTTPS  Src: 10.0.0.0/16</text>
  <!-- Outbound (key rule) -->
  <text x="42" y="248" font-family="Arial,sans-serif" font-size="9" fill="#555" font-weight="bold">Outbound</text>
  <rect x="38" y="253" width="185" height="17" rx="2" fill="#dcfce7"/>
  <text x="42" y="265" font-family="monospace,Arial" font-size="8" fill="#059669" font-weight="bold">HTTPS 443 → sg-0bbb (sg-ep)</text>
  <rect x="38" y="272" width="185" height="17" rx="2" fill="#f8fafc"/>
  <text x="42" y="284" font-family="monospace,Arial" font-size="8" fill="#888">All → 0.0.0.0/0 (default)</text>
  <!-- EP SG Rules table -->
  <rect x="250" y="175" width="242" height="160" rx="5" fill="#fff" stroke="#10b981" stroke-width="1.5"/>
  <rect x="250" y="175" width="242" height="22" rx="5" fill="#10b981" opacity="0.15"/>
  <text x="371" y="191" font-family="Arial,sans-serif" font-size="10" fill="#059669" text-anchor="middle" font-weight="bold">sg-ep — Interface EP のルール</text>
  <!-- Inbound (key rule) -->
  <text x="260" y="210" font-family="Arial,sans-serif" font-size="9" fill="#555" font-weight="bold">Inbound (重要)</text>
  <rect x="256" y="215" width="228" height="17" rx="2" fill="#dcfce7"/>
  <text x="260" y="227" font-family="monospace,Arial" font-size="8" fill="#059669" font-weight="bold">HTTPS 443 ← sg-0aaa (sg-app)</text>
  <rect x="256" y="234" width="228" height="17" rx="2" fill="#f8fafc"/>
  <text x="260" y="246" font-family="monospace,Arial" font-size="8" fill="#888">HTTP 80 ← 10.0.0.0/8 (internal)</text>
  <!-- Outbound -->
  <text x="260" y="266" font-family="Arial,sans-serif" font-size="9" fill="#555" font-weight="bold">Outbound</text>
  <rect x="256" y="271" width="228" height="17" rx="2" fill="#f8fafc"/>
  <text x="260" y="283" font-family="monospace,Arial" font-size="8" fill="#888">All → 0.0.0.0/0 (default)</text>
  <rect x="256" y="290" width="228" height="17" rx="2" fill="#fef9c3"/>
  <text x="260" y="302" font-family="monospace,Arial" font-size="8" fill="#b45309">Outbound は通常 変更不要</text>
  <!-- Key insight box -->
  <rect x="32" y="345" width="460" height="25" rx="4" fill="#f0fdf4" stroke="#10b981" stroke-width="1"/>
  <text x="262" y="361" font-family="Arial,sans-serif" font-size="10" fill="#059669" text-anchor="middle">Gateway EP と違い、Interface EP はSGで細かいアクセス制御が可能 — IP ではなく SG 参照で管理推奨</text>
  <!-- Right panel: comparison -->
  <rect x="540" y="38" width="245" height="340" rx="8" fill="#fff" stroke="#e5e7eb" stroke-width="1.5"/>
  <rect x="540" y="38" width="245" height="30" rx="8" fill="#6b7280"/>
  <text x="662" y="58" font-family="Arial,sans-serif" font-size="11" fill="#fff" font-weight="bold" text-anchor="middle">Gateway vs Interface: SG</text>
  <!-- Gateway -->
  <rect x="552" y="80" width="221" height="120" rx="5" fill="#f5f3ff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="662" y="98" font-family="Arial,sans-serif" font-size="11" fill="#7b5ea7" text-anchor="middle" font-weight="bold">Gateway Endpoint</text>
  <text x="560" y="118" font-family="Arial,sans-serif" font-size="10" fill="#ef4444">✗ セキュリティグループ不可</text>
  <text x="560" y="136" font-family="Arial,sans-serif" font-size="9" fill="#555">・ルートテーブルで制御</text>
  <text x="560" y="152" font-family="Arial,sans-serif" font-size="9" fill="#555">・Endpoint Policy で補完</text>
  <text x="560" y="168" font-family="Arial,sans-serif" font-size="9" fill="#555">・S3 Bucket Policy と組み合わせ</text>
  <text x="560" y="186" font-family="Arial,sans-serif" font-size="9" fill="#888">→ IP/CIDR ベースの制御のみ</text>
  <!-- Interface -->
  <rect x="552" y="215" width="221" height="140" rx="5" fill="#f0fdf4" stroke="#10b981" stroke-width="1"/>
  <text x="662" y="233" font-family="Arial,sans-serif" font-size="11" fill="#059669" text-anchor="middle" font-weight="bold">Interface Endpoint</text>
  <text x="560" y="253" font-family="Arial,sans-serif" font-size="10" fill="#10b981">✓ セキュリティグループ設定可</text>
  <text x="560" y="271" font-family="Arial,sans-serif" font-size="9" fill="#555">・ENI に SG をアタッチ</text>
  <text x="560" y="287" font-family="Arial,sans-serif" font-size="9" fill="#555">・SG 参照でソース指定可能</text>
  <text x="560" y="303" font-family="Arial,sans-serif" font-size="9" fill="#555">・ポート / プロトコル制御</text>
  <text x="560" y="319" font-family="Arial,sans-serif" font-size="9" fill="#555">・Endpoint Policy との二重制御</text>
  <text x="560" y="340" font-family="Arial,sans-serif" font-size="9" fill="#888">→ より細かいアクセス制御が可能</text>
</svg>
