<svg viewBox="0 0 800 400" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="800" height="400" fill="#fafafa"/>
  <text x="400" y="24" font-family="Arial,sans-serif" font-size="13" fill="#7b5ea7" font-weight="bold" text-anchor="middle">マルチ VPC / マルチアカウント PrivateLink パターン</text>
  <!-- Account A (left) - 3 Consumer VPCs -->
  <rect x="10" y="34" width="355" height="348" rx="8" fill="#f0f4ff" stroke="#7b5ea7" stroke-width="2"/>
  <rect x="10" y="34" width="355" height="26" rx="8" fill="#7b5ea7"/>
  <text x="187" y="52" font-family="Arial,sans-serif" font-size="11" fill="#fff" font-weight="bold" text-anchor="middle">Account A (Consumer)</text>
  <!-- VPC1 -->
  <rect x="22" y="68" width="155" height="100" rx="5" fill="#e8edff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="99" y="84" font-family="Arial,sans-serif" font-size="9" fill="#7b5ea7" text-anchor="middle" font-weight="bold">VPC-1 (10.0.0.0/16)</text>
  <rect x="32" y="92" width="135" height="34" rx="4" fill="#fff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="99" y="110" font-family="Arial,sans-serif" font-size="9" fill="#555" text-anchor="middle">App EC2</text>
  <rect x="32" y="132" width="135" height="28" rx="4" fill="#fff" stroke="#10b981" stroke-width="1.5"/>
  <text x="99" y="151" font-family="Arial,sans-serif" font-size="9" fill="#059669" text-anchor="middle">Interface EP (ENI)</text>
  <!-- VPC2 -->
  <rect x="192" y="68" width="155" height="100" rx="5" fill="#e8edff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="269" y="84" font-family="Arial,sans-serif" font-size="9" fill="#7b5ea7" text-anchor="middle" font-weight="bold">VPC-2 (10.1.0.0/16)</text>
  <rect x="202" y="92" width="135" height="34" rx="4" fill="#fff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="269" y="110" font-family="Arial,sans-serif" font-size="9" fill="#555" text-anchor="middle">App EC2</text>
  <rect x="202" y="132" width="135" height="28" rx="4" fill="#fff" stroke="#10b981" stroke-width="1.5"/>
  <text x="269" y="151" font-family="Arial,sans-serif" font-size="9" fill="#059669" text-anchor="middle">Interface EP (ENI)</text>
  <!-- VPC3 -->
  <rect x="22" y="182" width="155" height="100" rx="5" fill="#e8edff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="99" y="198" font-family="Arial,sans-serif" font-size="9" fill="#7b5ea7" text-anchor="middle" font-weight="bold">VPC-3 (172.16.0.0/16)</text>
  <rect x="32" y="206" width="135" height="34" rx="4" fill="#fff" stroke="#7b5ea7" stroke-width="1"/>
  <text x="99" y="224" font-family="Arial,sans-serif" font-size="9" fill="#555" text-anchor="middle">App EC2</text>
  <rect x="32" y="246" width="135" height="28" rx="4" fill="#fff" stroke="#10b981" stroke-width="1.5"/>
  <text x="99" y="265" font-family="Arial,sans-serif" font-size="9" fill="#059669" text-anchor="middle">Interface EP (ENI)</text>
  <!-- Note about IP overlap -->
  <rect x="22" y="295" width="325" height="75" rx="5" fill="#fef9c3" stroke="#f59e0b" stroke-width="1"/>
  <text x="184" y="313" font-family="Arial,sans-serif" font-size="10" fill="#b45309" text-anchor="middle" font-weight="bold">VPC CIDR 重複でも使用可能</text>
  <text x="34" y="331" font-family="Arial,sans-serif" font-size="9" fill="#555">PrivateLink は IP アドレス重複を許容</text>
  <text x="34" y="347" font-family="Arial,sans-serif" font-size="9" fill="#555">VPC Peering とは異なりルーティング不要</text>
  <text x="34" y="363" font-family="Arial,sans-serif" font-size="9" fill="#555">Consumer ごとに独立した Interface EP が必要</text>
  <!-- PrivateLink backbone (center) -->
  <rect x="370" y="140" width="60" height="120" rx="6" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2"/>
  <text x="400" y="168" font-family="Arial,sans-serif" font-size="9" fill="#0369a1" text-anchor="middle" font-weight="bold">AWS</text>
  <text x="400" y="183" font-family="Arial,sans-serif" font-size="9" fill="#0369a1" text-anchor="middle" font-weight="bold">Private</text>
  <text x="400" y="198" font-family="Arial,sans-serif" font-size="9" fill="#0369a1" text-anchor="middle" font-weight="bold">Link</text>
  <text x="400" y="218" font-family="Arial,sans-serif" font-size="9" fill="#888" text-anchor="middle">Backbone</text>
  <text x="400" y="232" font-family="Arial,sans-serif" font-size="9" fill="#888" text-anchor="middle">Network</text>
  <!-- Arrows from Consumer VPCs to backbone -->
  <line x1="167" y1="146" x2="368" y2="183" stroke="#10b981" stroke-width="1.5"/>
  <polygon points="363,179 372,187 370,176" fill="#10b981"/>
  <line x1="337" y1="146" x2="370" y2="190" stroke="#10b981" stroke-width="1.5"/>
  <polygon points="366,186 374,194 373,183" fill="#10b981"/>
  <line x1="167" y1="260" x2="368" y2="218" stroke="#10b981" stroke-width="1.5"/>
  <polygon points="363,213 372,221 369,210" fill="#10b981"/>
  <!-- Arrow backbone to Provider -->
  <line x1="430" y1="200" x2="450" y2="200" stroke="#10b981" stroke-width="2"/>
  <polygon points="446,194 458,200 446,206" fill="#10b981"/>
  <!-- Account B (right) - Provider -->
  <rect x="450" y="34" width="340" height="348" rx="8" fill="#fff8f0" stroke="#ff9900" stroke-width="2"/>
  <rect x="450" y="34" width="340" height="26" rx="8" fill="#ff9900"/>
  <text x="620" y="52" font-family="Arial,sans-serif" font-size="11" fill="#fff" font-weight="bold" text-anchor="middle">Account B (Provider / SaaS)</text>
  <!-- Provider VPC -->
  <rect x="462" y="68" width="315" height="210" rx="5" fill="#fff9e6" stroke="#f59e0b" stroke-width="1.5"/>
  <text x="619" y="86" font-family="Arial,sans-serif" font-size="10" fill="#b45309" text-anchor="middle" font-weight="bold">Provider VPC</text>
  <!-- Endpoint Service -->
  <rect x="474" y="95" width="290" height="38" rx="4" fill="#fef9c3" stroke="#f59e0b" stroke-width="1"/>
  <text x="619" y="112" font-family="Arial,sans-serif" font-size="10" fill="#b45309" text-anchor="middle" font-weight="bold">Endpoint Service</text>
  <text x="619" y="126" font-family="monospace,Arial" font-size="8" fill="#888" text-anchor="middle">com.amazonaws.vpce.*.vpce-svc-XXXX</text>
  <!-- NLB -->
  <rect x="474" y="143" width="135" height="45" rx="4" fill="#fff" stroke="#ff9900" stroke-width="1.5"/>
  <text x="541" y="163" font-family="Arial,sans-serif" font-size="9" fill="#b45309" text-anchor="middle" font-weight="bold">NLB</text>
  <text x="541" y="178" font-family="Arial,sans-serif" font-size="8" fill="#888" text-anchor="middle">Internal</text>
  <!-- Service -->
  <rect x="627" y="143" width="135" height="45" rx="4" fill="#fff" stroke="#10b981" stroke-width="1.5"/>
  <text x="694" y="163" font-family="Arial,sans-serif" font-size="9" fill="#059669" text-anchor="middle" font-weight="bold">Service Backend</text>
  <text x="694" y="178" font-family="Arial,sans-serif" font-size="8" fill="#888" text-anchor="middle">ECS / EC2</text>
  <line x1="609" y1="165" x2="625" y2="165" stroke="#ff9900" stroke-width="1.5"/>
  <polygon points="621,159 633,165 621,171" fill="#ff9900"/>
  <!-- Allowed Principals list -->
  <rect x="474" y="200" width="290" height="70" rx="4" fill="#f0fdf4" stroke="#10b981" stroke-width="1"/>
  <text x="619" y="218" font-family="Arial,sans-serif" font-size="10" fill="#059669" text-anchor="middle" font-weight="bold">Allowed Principals</text>
  <text x="482" y="236" font-family="monospace,Arial" font-size="9" fill="#333">arn:aws:iam::ACCOUNT_A:root</text>
  <text x="482" y="252" font-family="monospace,Arial" font-size="9" fill="#888">(Account A 全体を許可)</text>
  <text x="482" y="266" font-family="monospace,Arial" font-size="9" fill="#888">or: specific IAM Role / User</text>
  <!-- AWS Marketplace note -->
  <rect x="462" y="292" width="315" height="80" rx="5" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="1.5"/>
  <text x="619" y="310" font-family="Arial,sans-serif" font-size="10" fill="#0369a1" text-anchor="middle" font-weight="bold">AWS Marketplace でのサービス公開</text>
  <text x="474" y="328" font-family="Arial,sans-serif" font-size="9" fill="#555">Endpoint Service を Marketplace に登録すると</text>
  <text x="474" y="344" font-family="Arial,sans-serif" font-size="9" fill="#555">不特定多数の Consumer に安全にサービスを提供</text>
  <text x="474" y="360" font-family="Arial,sans-serif" font-size="9" fill="#555">例: Datadog / Splunk / Snowflake 等が採用</text>
</svg>
