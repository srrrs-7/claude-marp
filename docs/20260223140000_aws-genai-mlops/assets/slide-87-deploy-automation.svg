<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="800" height="500" fill="#0d1117"/>
  <text x="400" y="28" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle" font-weight="bold">デプロイ自動化パイプライン</text>

  <!-- Trigger -->
  <rect x="15" y="50" width="145" height="60" rx="8" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="2"/>
  <text x="87" y="73" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">Model Registry</text>
  <text x="87" y="90" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">新バージョン登録</text>
  <text x="87" y="104" font-family="Arial" font-size="9" fill="#06D6A0" text-anchor="middle">EventBridge イベント</text>

  <!-- Arrow to pipeline -->
  <line x1="160" y1="80" x2="200" y2="80" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -8,5 8,5" fill="#4CC9F0" transform="translate(200,80) rotate(90)"/>

  <!-- Pipeline label -->
  <rect x="200" y="55" width="145" height="50" rx="8" fill="#0f3460" stroke="#F77F00" stroke-width="1.5"/>
  <text x="273" y="76" font-family="Arial" font-size="10" fill="#F77F00" text-anchor="middle" font-weight="bold">CodePipeline /</text>
  <text x="273" y="92" font-family="Arial" font-size="10" fill="#F77F00" text-anchor="middle">SageMaker Pipelines</text>

  <!-- Arrow -->
  <line x1="345" y1="80" x2="380" y2="80" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-4 -6,4 6,4" fill="#4CC9F0" transform="translate(380,80) rotate(90)"/>

  <!-- Pipeline steps as vertical flow -->
  <!-- Step 1 -->
  <rect x="385" y="45" width="140" height="70" rx="8" fill="#1e3a5f" stroke="#06D6A0" stroke-width="2"/>
  <text x="455" y="67" font-family="Arial" font-size="11" fill="#06D6A0" text-anchor="middle" font-weight="bold">Step 1</text>
  <text x="455" y="84" font-family="Arial" font-size="11" fill="#ffffff" text-anchor="middle">統合テスト</text>
  <text x="455" y="100" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">Endpoint smoketest</text>
  <text x="455" y="113" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">レイテンシ・精度確認</text>

  <!-- Rollback arrow step 1 -->
  <line x1="385" y1="55" x2="355" y2="55" stroke="#E63946" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="0,-3 -5,3 5,3" fill="#E63946" transform="translate(355,55) rotate(-90)"/>
  <text x="340" y="48" font-family="Arial" font-size="8" fill="#E63946" text-anchor="middle">失敗</text>
  <text x="340" y="60" font-family="Arial" font-size="8" fill="#E63946" text-anchor="middle">ロールバック</text>

  <!-- Arrow down -->
  <line x1="455" y1="115" x2="455" y2="150" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -8,5 8,5" fill="#4CC9F0" transform="translate(455,150) rotate(180)"/>

  <!-- Step 2 -->
  <rect x="385" y="155" width="140" height="70" rx="8" fill="#1e3a5f" stroke="#F77F00" stroke-width="2"/>
  <text x="455" y="177" font-family="Arial" font-size="11" fill="#F77F00" text-anchor="middle" font-weight="bold">Step 2</text>
  <text x="455" y="194" font-family="Arial" font-size="11" fill="#ffffff" text-anchor="middle">シャドウデプロイ</text>
  <text x="455" y="210" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">数時間〜数日間</text>
  <text x="455" y="223" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">本番ミラートラフィック</text>

  <!-- Rollback arrow step 2 -->
  <line x1="385" y1="168" x2="345" y2="168" stroke="#E63946" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="0,-3 -5,3 5,3" fill="#E63946" transform="translate(345,168) rotate(-90)"/>
  <text x="330" y="162" font-family="Arial" font-size="8" fill="#E63946" text-anchor="middle">異常検知</text>

  <!-- Arrow down -->
  <line x1="455" y1="225" x2="455" y2="260" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -8,5 8,5" fill="#4CC9F0" transform="translate(455,260) rotate(180)"/>

  <!-- Step 3 -->
  <rect x="385" y="265" width="140" height="70" rx="8" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="2"/>
  <text x="455" y="287" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">Step 3</text>
  <text x="455" y="304" font-family="Arial" font-size="11" fill="#ffffff" text-anchor="middle">メトリクス確認</text>
  <text x="455" y="320" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">品質ゲート評価</text>
  <text x="455" y="333" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">精度 / レイテンシ / エラー率</text>

  <!-- Rollback arrow step 3 -->
  <line x1="385" y1="280" x2="345" y2="280" stroke="#E63946" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="0,-3 -5,3 5,3" fill="#E63946" transform="translate(345,280) rotate(-90)"/>
  <text x="330" y="272" font-family="Arial" font-size="8" fill="#E63946" text-anchor="middle">品質未達</text>

  <!-- Arrow down -->
  <line x1="455" y1="335" x2="455" y2="370" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -8,5 8,5" fill="#4CC9F0" transform="translate(455,370) rotate(180)"/>

  <!-- Step 4 -->
  <rect x="385" y="375" width="140" height="80" rx="8" fill="#2d1e0f" stroke="#F77F00" stroke-width="2"/>
  <text x="455" y="397" font-family="Arial" font-size="11" fill="#F77F00" text-anchor="middle" font-weight="bold">Step 4</text>
  <text x="455" y="414" font-family="Arial" font-size="11" fill="#ffffff" text-anchor="middle">カナリアデプロイ</text>
  <text x="455" y="430" font-family="Arial" font-size="9" fill="#F77F00" text-anchor="middle">10% → 50% → 100%</text>
  <text x="455" y="445" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">段階的トラフィック移行</text>

  <!-- Rollback arrow step 4 -->
  <line x1="385" y1="390" x2="345" y2="390" stroke="#E63946" stroke-width="1.5" stroke-dasharray="4,2"/>
  <polygon points="0,-3 -5,3 5,3" fill="#E63946" transform="translate(345,390) rotate(-90)"/>
  <text x="330" y="383" font-family="Arial" font-size="8" fill="#E63946" text-anchor="middle">異常検知</text>

  <!-- Right side final step -->
  <line x1="525" y1="415" x2="580" y2="415" stroke="#06D6A0" stroke-width="2.5"/>
  <polygon points="0,-6 -10,6 10,6" fill="#06D6A0" transform="translate(580,415) rotate(90)"/>

  <!-- Step 5: Full cutover -->
  <rect x="585" y="380" width="195" height="70" rx="8" fill="#1a3a20" stroke="#06D6A0" stroke-width="2.5"/>
  <text x="682" y="403" font-family="Arial" font-size="12" fill="#06D6A0" text-anchor="middle" font-weight="bold">Step 5: 全体切り替え</text>
  <text x="682" y="422" font-family="Arial" font-size="10" fill="#ffffff" text-anchor="middle">100%トラフィック → 新モデル</text>
  <text x="682" y="440" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">旧バージョン削除</text>

  <!-- Right column info -->
  <rect x="585" y="50" width="195" height="300" rx="10" fill="#0a1e30" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="682" y="72" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">自動化のポイント</text>
  <line x1="600" y1="80" x2="765" y2="80" stroke="#4CC9F0" stroke-width="0.5"/>
  <text x="682" y="100" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">EventBridge で</text>
  <text x="682" y="115" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">自動トリガー</text>
  <line x1="600" y1="125" x2="765" y2="125" stroke="#aaaaaa" stroke-width="0.5" stroke-dasharray="3,3"/>
  <text x="682" y="145" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">品質ゲートで</text>
  <text x="682" y="160" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">自動承認/拒否</text>
  <line x1="600" y1="170" x2="765" y2="170" stroke="#aaaaaa" stroke-width="0.5" stroke-dasharray="3,3"/>
  <text x="682" y="190" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">各ステップで</text>
  <text x="682" y="205" font-family="Arial" font-size="10" fill="#E63946" text-anchor="middle">自動ロールバック</text>
  <line x1="600" y1="215" x2="765" y2="215" stroke="#aaaaaa" stroke-width="0.5" stroke-dasharray="3,3"/>
  <text x="682" y="235" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">CloudWatch Alarms</text>
  <text x="682" y="250" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">で監視</text>
  <line x1="600" y1="260" x2="765" y2="260" stroke="#aaaaaa" stroke-width="0.5" stroke-dasharray="3,3"/>
  <text x="682" y="280" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">全ステップを</text>
  <text x="682" y="295" font-family="Arial" font-size="10" fill="#4CC9F0" text-anchor="middle">Gitで管理</text>
  <text x="682" y="312" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">IaC / GitOps</text>
  <text x="682" y="340" font-family="Arial" font-size="9" fill="#F77F00" text-anchor="middle">ゼロダウンタイム</text>
  <text x="682" y="355" font-family="Arial" font-size="9" fill="#F77F00" text-anchor="middle">ブルーグリーンデプロイ</text>
</svg>
