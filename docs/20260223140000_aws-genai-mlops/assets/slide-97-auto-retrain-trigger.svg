<svg viewBox="0 0 800 500" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="800" height="500" fill="#0d1117"/>
  <text x="400" y="28" font-family="Arial" font-size="18" fill="#ffffff" text-anchor="middle" font-weight="bold">アラート・自動再学習トリガー設計</text>

  <!-- Event Sources (left column) -->
  <rect x="15" y="50" width="165" height="380" rx="10" fill="#0a1e30" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="97" y="72" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">イベントソース</text>

  <rect x="25" y="85" width="145" height="60" rx="6" fill="#1e3a5f" stroke="#E63946" stroke-width="1.5"/>
  <text x="97" y="107" font-family="Arial" font-size="10" fill="#E63946" text-anchor="middle" font-weight="bold">CloudWatch Alarm</text>
  <text x="97" y="125" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">精度低下検知</text>
  <text x="97" y="140" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">ドリフト閾値超過</text>

  <rect x="25" y="155" width="145" height="60" rx="6" fill="#1e3a5f" stroke="#F77F00" stroke-width="1.5"/>
  <text x="97" y="177" font-family="Arial" font-size="10" fill="#F77F00" text-anchor="middle" font-weight="bold">EventBridge Schedule</text>
  <text x="97" y="195" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">週次定期再学習</text>
  <text x="97" y="210" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">cron(0 1 ? * MON *)</text>

  <rect x="25" y="225" width="145" height="60" rx="6" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="97" y="247" font-family="Arial" font-size="10" fill="#4CC9F0" text-anchor="middle" font-weight="bold">S3 Event</text>
  <text x="97" y="265" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">新データ到着検知</text>
  <text x="97" y="280" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">ObjectCreated トリガー</text>

  <rect x="25" y="295" width="145" height="50" rx="6" fill="#1e3a5f" stroke="#06D6A0" stroke-width="1.5"/>
  <text x="97" y="315" font-family="Arial" font-size="10" fill="#06D6A0" text-anchor="middle" font-weight="bold">手動トリガー</text>
  <text x="97" y="333" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">コンソール / API 操作</text>

  <!-- Arrows to EventBridge -->
  <line x1="180" y1="115" x2="235" y2="245" stroke="#E63946" stroke-width="1.5"/>
  <polygon points="0,-4 -6,4 6,4" fill="#E63946" transform="translate(235,245) rotate(153)"/>
  <line x1="180" y1="185" x2="235" y2="250" stroke="#F77F00" stroke-width="1.5"/>
  <polygon points="0,-4 -6,4 6,4" fill="#F77F00" transform="translate(235,250) rotate(170)"/>
  <line x1="180" y1="255" x2="235" y2="260" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-4 -6,4 6,4" fill="#4CC9F0" transform="translate(235,260) rotate(178)"/>
  <line x1="180" y1="320" x2="235" y2="270" stroke="#06D6A0" stroke-width="1.5"/>
  <polygon points="0,-4 -6,4 6,4" fill="#06D6A0" transform="translate(235,270) rotate(15)"/>

  <!-- EventBridge -->
  <rect x="240" y="220" width="130" height="70" rx="10" fill="#1e3a5f" stroke="#F77F00" stroke-width="2"/>
  <text x="305" y="248" font-family="Arial" font-size="12" fill="#F77F00" text-anchor="middle" font-weight="bold">EventBridge</text>
  <text x="305" y="266" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">ルーティング</text>
  <text x="305" y="281" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">イベント仲介</text>

  <!-- Arrow to Lambda/StepFunctions -->
  <line x1="370" y1="255" x2="420" y2="255" stroke="#F77F00" stroke-width="2"/>
  <polygon points="0,-5 -8,5 8,5" fill="#F77F00" transform="translate(420,255) rotate(90)"/>

  <!-- Lambda/SF orchestrator -->
  <rect x="425" y="215" width="145" height="80" rx="10" fill="#0f3460" stroke="#4CC9F0" stroke-width="2"/>
  <text x="497" y="240" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">Lambda /</text>
  <text x="497" y="257" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle">Step Functions</text>
  <text x="497" y="274" font-family="Arial" font-size="10" fill="#aaaaaa" text-anchor="middle">オーケストレーター</text>
  <text x="497" y="288" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">条件分岐 / 状態管理</text>

  <!-- SNS for human approval -->
  <line x1="497" y1="215" x2="497" y2="165" stroke="#06D6A0" stroke-width="1.5" stroke-dasharray="4,3"/>
  <polygon points="0,-4 -6,4 6,4" fill="#06D6A0" transform="translate(497,165) rotate(-180)"/>
  <rect x="420" y="115" width="155" height="46" rx="8" fill="#1a3a20" stroke="#06D6A0" stroke-width="1.5"/>
  <text x="497" y="138" font-family="Arial" font-size="10" fill="#06D6A0" text-anchor="middle" font-weight="bold">SNS (人間承認)</text>
  <text x="497" y="155" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">オプション: 手動ゲート</text>

  <!-- Arrow to SageMaker Pipelines -->
  <line x1="570" y1="255" x2="620" y2="255" stroke="#4CC9F0" stroke-width="2.5"/>
  <polygon points="0,-6 -10,6 10,6" fill="#4CC9F0" transform="translate(620,255) rotate(90)"/>

  <!-- SageMaker Pipelines steps -->
  <rect x="625" y="50" width="165" height="395" rx="10" fill="#0f1e35" stroke="#4CC9F0" stroke-width="2"/>
  <text x="708" y="73" font-family="Arial" font-size="11" fill="#4CC9F0" text-anchor="middle" font-weight="bold">SageMaker Pipelines</text>
  <text x="708" y="88" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">再学習パイプライン</text>

  <rect x="635" y="100" width="145" height="50" rx="6" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="1"/>
  <text x="708" y="120" font-family="Arial" font-size="10" fill="#4CC9F0" text-anchor="middle" font-weight="bold">1. データ更新確認</text>
  <text x="708" y="138" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">S3 最新データ取得</text>

  <line x1="708" y1="150" x2="708" y2="165" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-3 -5,3 5,3" fill="#4CC9F0" transform="translate(708,165) rotate(180)"/>

  <rect x="635" y="168" width="145" height="50" rx="6" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="1"/>
  <text x="708" y="188" font-family="Arial" font-size="10" fill="#4CC9F0" text-anchor="middle" font-weight="bold">2. 再学習実行</text>
  <text x="708" y="206" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">Training Job</text>

  <line x1="708" y1="218" x2="708" y2="233" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-3 -5,3 5,3" fill="#4CC9F0" transform="translate(708,233) rotate(180)"/>

  <rect x="635" y="236" width="145" height="50" rx="6" fill="#1e3a5f" stroke="#06D6A0" stroke-width="1"/>
  <text x="708" y="256" font-family="Arial" font-size="10" fill="#06D6A0" text-anchor="middle" font-weight="bold">3. 評価・品質ゲート</text>
  <text x="708" y="274" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">精度 / バイアス確認</text>

  <line x1="708" y1="286" x2="708" y2="301" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-3 -5,3 5,3" fill="#4CC9F0" transform="translate(708,301) rotate(180)"/>

  <rect x="635" y="304" width="145" height="50" rx="6" fill="#1e3a5f" stroke="#F77F00" stroke-width="1"/>
  <text x="708" y="324" font-family="Arial" font-size="10" fill="#F77F00" text-anchor="middle" font-weight="bold">4. モデル登録</text>
  <text x="708" y="342" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">Model Registry 登録</text>

  <line x1="708" y1="354" x2="708" y2="369" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-3 -5,3 5,3" fill="#4CC9F0" transform="translate(708,369) rotate(180)"/>

  <rect x="635" y="372" width="145" height="55" rx="6" fill="#1a3a20" stroke="#06D6A0" stroke-width="2"/>
  <text x="708" y="393" font-family="Arial" font-size="10" fill="#06D6A0" text-anchor="middle" font-weight="bold">5. 自動デプロイ</text>
  <text x="708" y="410" font-family="Arial" font-size="9" fill="#aaaaaa" text-anchor="middle">承認フロー付き</text>
  <text x="708" y="424" font-family="Arial" font-size="9" fill="#06D6A0" text-anchor="middle">Updated Endpoint</text>
</svg>
