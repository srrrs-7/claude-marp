<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#0d1117"/>
  <text x="400" y="36" text-anchor="middle" font-family="sans-serif" font-size="19" font-weight="bold" fill="#ffffff">データパイプライン設計</text>
  <!-- Stage boxes -->
  <!-- 1: データソース -->
  <rect x="15" y="130" width="105" height="90" rx="6" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="67" y="158" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">データソース</text>
  <text x="67" y="176" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">DB / API</text>
  <text x="67" y="192" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">ファイル</text>
  <text x="67" y="208" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">センサー</text>
  <!-- Arrow 1 -->
  <line x1="120" y1="175" x2="142" y2="175" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#4CC9F0" transform="translate(142,175) rotate(90)"/>
  <text x="131" y="165" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#aaaaaa">CSV</text>
  <!-- 2: 取り込み -->
  <rect x="145" y="130" width="105" height="90" rx="6" fill="#0f3460" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="197" y="158" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">取り込み</text>
  <text x="197" y="176" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Kinesis</text>
  <text x="197" y="192" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Glue</text>
  <text x="197" y="208" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">DMS</text>
  <!-- Arrow 2 -->
  <line x1="250" y1="175" x2="272" y2="175" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#4CC9F0" transform="translate(272,175) rotate(90)"/>
  <text x="261" y="165" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#aaaaaa">JSON</text>
  <!-- 3: ストレージ -->
  <rect x="275" y="130" width="115" height="90" rx="6" fill="#1e3a5f" stroke="#06D6A0" stroke-width="1.5"/>
  <text x="332" y="153" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#06D6A0">ストレージ</text>
  <text x="332" y="173" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">S3 Raw</text>
  <text x="332" y="189" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">S3 Processed</text>
  <text x="332" y="208" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">バージョニング</text>
  <!-- Arrow 3 -->
  <line x1="390" y1="175" x2="412" y2="175" stroke="#06D6A0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#06D6A0" transform="translate(412,175) rotate(90)"/>
  <text x="401" y="163" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#aaaaaa">Parquet</text>
  <!-- 4: 変換 -->
  <rect x="415" y="130" width="115" height="90" rx="6" fill="#0f3460" stroke="#F77F00" stroke-width="1.5"/>
  <text x="472" y="158" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#F77F00">変換</text>
  <text x="472" y="176" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Glue ETL</text>
  <text x="472" y="192" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Data Wrangler</text>
  <text x="472" y="208" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Processing Job</text>
  <!-- Arrow 4 -->
  <line x1="530" y1="175" x2="552" y2="175" stroke="#F77F00" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#F77F00" transform="translate(552,175) rotate(90)"/>
  <text x="541" y="163" text-anchor="middle" font-family="sans-serif" font-size="9" fill="#aaaaaa">特徴量</text>
  <!-- 5: Feature Store -->
  <rect x="555" y="110" width="115" height="130" rx="6" fill="#0a2545" stroke="#06D6A0" stroke-width="2"/>
  <text x="612" y="135" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#06D6A0">Feature Store</text>
  <rect x="568" y="145" width="90" height="30" rx="4" fill="#0d3550"/>
  <text x="613" y="165" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#4CC9F0">Online Store</text>
  <rect x="568" y="183" width="90" height="30" rx="4" fill="#0d3550"/>
  <text x="613" y="203" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#06D6A0">Offline Store</text>
  <text x="612" y="228" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">特徴量再利用</text>
  <!-- Arrow 5 -->
  <line x1="670" y1="175" x2="692" y2="175" stroke="#06D6A0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#06D6A0" transform="translate(692,175) rotate(90)"/>
  <!-- 6: 学習ジョブ -->
  <rect x="695" y="130" width="95" height="90" rx="6" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="2"/>
  <text x="742" y="155" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">学習ジョブ</text>
  <text x="742" y="175" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">SageMaker</text>
  <text x="742" y="193" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Training</text>
  <text x="742" y="210" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">GPU/CPU</text>
  <!-- Data format timeline -->
  <rect x="15" y="248" width="775" height="42" rx="6" fill="#0f1e30"/>
  <text x="75" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">CSV/JSON</text>
  <text x="200" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#aaaaaa">→</text>
  <text x="330" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">S3 Raw(gzip)</text>
  <text x="420" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#aaaaaa">→</text>
  <text x="475" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">Parquet(列指向)</text>
  <text x="600" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#aaaaaa">→</text>
  <text x="700" y="266" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#06D6A0">RecordIO / TFRecord</text>
  <text x="400" y="283" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">データ形式変換フロー</text>
  <!-- Benefits section -->
  <rect x="15" y="305" width="370" height="155" rx="6" fill="#0f1e30" stroke="#1e3a5f" stroke-width="1"/>
  <text x="200" y="328" text-anchor="middle" font-family="sans-serif" font-size="13" font-weight="bold" fill="#4CC9F0">パイプライン自動化ポイント</text>
  <text x="200" y="350" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">SageMaker Pipelines で全ステップをDAG定義</text>
  <text x="200" y="368" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">EventBridge でスケジュール実行・イベントトリガー</text>
  <text x="200" y="386" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Step Functions で複雑なワークフロー制御</text>
  <text x="200" y="404" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">データ品質チェック → 自動停止・アラート</text>
  <text x="200" y="422" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">Glue DataBrew — ノーコードデータ変換</text>
  <text x="200" y="442" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">Lake Formation — アクセス制御・データカタログ</text>
  <rect x="410" y="305" width="380" height="155" rx="6" fill="#0f1e30" stroke="#0f3460" stroke-width="1"/>
  <text x="600" y="328" text-anchor="middle" font-family="sans-serif" font-size="13" font-weight="bold" fill="#06D6A0">モニタリング・品質管理</text>
  <text x="600" y="350" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Glue DataQuality でデータ品質ルール定義</text>
  <text x="600" y="368" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Great Expectations / Deequ 統合</text>
  <text x="600" y="386" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">スキーマドリフト検知 → SNS 通知</text>
  <text x="600" y="404" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">CloudWatch Logs でジョブ実行ログ</text>
  <text x="600" y="422" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">S3 Access Logs + Macie でデータ保護</text>
  <text x="600" y="442" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">コスト: Glue DPU課金、S3ストレージ階層</text>
</svg>
