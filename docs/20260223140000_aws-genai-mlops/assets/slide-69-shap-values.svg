<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#0d1b2a"/>
  <text x="400" y="35" font-family="Arial,sans-serif" font-size="20" font-weight="bold" fill="#ffffff" text-anchor="middle">モデル説明可能性 — SHAP 値</text>

  <!-- Left: Waterfall chart -->
  <rect x="15" y="50" width="350" height="310" rx="8" fill="#111e2d"/>
  <text x="190" y="78" font-family="Arial,sans-serif" font-size="14" font-weight="bold" fill="#4CC9F0" text-anchor="middle">SHAP Waterfall Chart</text>
  <text x="190" y="96" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="middle">個別予測の特徴量寄与 (Local説明)</text>

  <!-- Y axis labels -->
  <text x="90" y="128" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="end">base value</text>
  <text x="90" y="163" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="end">feature_C</text>
  <text x="90" y="198" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="end">feature_A</text>
  <text x="90" y="233" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="end">feature_D</text>
  <text x="90" y="268" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="end">feature_B</text>
  <text x="90" y="305" font-family="Arial,sans-serif" font-size="11" fill="#ffffff" text-anchor="end">f(x)</text>

  <!-- Axis line -->
  <line x1="100" y1="112" x2="100" y2="315" stroke="#2d4059" stroke-width="1"/>
  <line x1="100" y1="315" x2="340" y2="315" stroke="#2d4059" stroke-width="1"/>

  <!-- Base value bar (neutral) -->
  <rect x="100" y="118" width="120" height="18" rx="2" fill="#2d4059"/>
  <text x="225" y="131" font-family="Arial,sans-serif" font-size="10" fill="#aaaaaa">0.50</text>

  <!-- feature_C +0.30 (positive, green) -->
  <rect x="100" y="153" width="165" height="18" rx="2" fill="#06D6A0" opacity="0.8"/>
  <text x="270" y="166" font-family="Arial,sans-serif" font-size="10" fill="#06D6A0">+0.30</text>

  <!-- feature_A +0.25 (positive, green) -->
  <rect x="100" y="188" width="148" height="18" rx="2" fill="#06D6A0" opacity="0.8"/>
  <text x="253" y="201" font-family="Arial,sans-serif" font-size="10" fill="#06D6A0">+0.25</text>

  <!-- feature_D -0.05 (negative, red, offset left) -->
  <rect x="71" y="223" width="30" height="18" rx="2" fill="#E63946" opacity="0.8"/>
  <text x="60" y="236" font-family="Arial,sans-serif" font-size="10" fill="#E63946">-0.05</text>

  <!-- feature_B -0.15 (negative, red) -->
  <rect x="13" y="258" width="88" height="18" rx="2" fill="#E63946" opacity="0.8"/>
  <text x="12" y="271" font-family="Arial,sans-serif" font-size="10" fill="#E63946">-0.15</text>

  <!-- Final prediction bar -->
  <rect x="100" y="295" width="155" height="18" rx="2" fill="#4CC9F0" opacity="0.9"/>
  <text x="260" y="308" font-family="Arial,sans-serif" font-size="10" fill="#4CC9F0" font-weight="bold">f(x) = 0.85</text>

  <!-- Zero line indicator -->
  <line x1="100" y1="112" x2="100" y2="315" stroke="#aaaaaa" stroke-width="1.5"/>
  <text x="102" y="325" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa">0</text>

  <!-- Center: Right panel explanations -->
  <rect x="380" y="50" width="400" height="310" rx="8" fill="#1e3a5f"/>
  <text x="580" y="78" font-family="Arial,sans-serif" font-size="14" font-weight="bold" fill="#4CC9F0" text-anchor="middle">SHAP 説明の種類</text>

  <!-- Global explanation -->
  <rect x="395" y="90" width="370" height="115" rx="6" fill="#0f3460"/>
  <text x="580" y="112" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#ffffff" text-anchor="middle">Global 説明</text>
  <text x="395" y="130" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  全データに対する特徴量の重要度</text>
  <text x="395" y="150" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  Summary Plot (蜂群図) で可視化</text>
  <text x="395" y="168" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  Feature Importance のランキング</text>
  <text x="395" y="188" font-family="Arial,sans-serif" font-size="10" fill="#06D6A0" text-anchor="start">  → モデル全体の動作を理解</text>

  <!-- Local explanation -->
  <rect x="395" y="215" width="370" height="115" rx="6" fill="#0a2545" stroke="#06D6A0" stroke-width="1"/>
  <text x="580" y="237" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#06D6A0" text-anchor="middle">Local 説明 ★重要</text>
  <text x="395" y="258" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  個別予測に対する特徴量の寄与</text>
  <text x="395" y="276" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  Waterfall Plot / Force Plot で可視化</text>
  <text x="395" y="296" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="start">  「なぜこの予測？」を説明</text>
  <text x="395" y="315" font-family="Arial,sans-serif" font-size="10" fill="#06D6A0" text-anchor="start">  → 個別判断の根拠を提示</text>

  <!-- Bottom notes -->
  <rect x="15" y="375" width="765" height="50" rx="6" fill="#111e2d"/>
  <text x="400" y="397" font-family="Arial,sans-serif" font-size="12" font-weight="bold" fill="#ffffff" text-anchor="middle">SageMaker Clarify が SHAP 値を自動計算 (KernelSHAP)</text>
  <text x="400" y="416" font-family="Arial,sans-serif" font-size="11" fill="#4CC9F0" text-anchor="middle">ProcessingJob として実行 | TabularExplainer / ImageExplainer に対応</text>

  <!-- Bottom note 2 -->
  <rect x="15" y="438" width="765" height="48" rx="6" fill="#0a2545"/>
  <text x="400" y="457" font-family="Arial,sans-serif" font-size="11" fill="#aaaaaa" text-anchor="middle">試験ポイント: SHAP = ゲーム理論に基づく特徴量貢献度の公平な配分</text>
  <text x="400" y="477" font-family="Arial,sans-serif" font-size="11" fill="#06D6A0" text-anchor="middle">★ ポジティブ値 = 予測を上げる寄与 | ネガティブ値 = 予測を下げる寄与</text>
</svg>
