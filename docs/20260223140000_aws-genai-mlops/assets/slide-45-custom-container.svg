<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#0d1b2a"/>
  <text x="400" y="30" fill="#4CC9F0" font-size="20" font-weight="bold" text-anchor="middle" font-family="sans-serif">カスタムコンテナ学習</text>

  <!-- Step 1: Custom Code -->
  <rect x="15" y="60" width="155" height="180" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="92" y="83" fill="#4CC9F0" font-size="13" font-weight="bold" text-anchor="middle" font-family="sans-serif">カスタムコード</text>
  <rect x="25" y="95" width="135" height="32" rx="4" fill="#0a2545"/>
  <text x="92" y="115" fill="#ffffff" font-size="11" text-anchor="middle" font-family="sans-serif">Python</text>
  <rect x="25" y="135" width="135" height="32" rx="4" fill="#0a2545"/>
  <text x="92" y="155" fill="#ffffff" font-size="11" text-anchor="middle" font-family="sans-serif">R</text>
  <rect x="25" y="175" width="135" height="32" rx="4" fill="#0a2545"/>
  <text x="92" y="195" fill="#ffffff" font-size="11" text-anchor="middle" font-family="sans-serif">Java / Scala</text>
  <text x="92" y="230" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">任意のフレームワーク</text>
  <text x="92" y="245" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">カスタム依存関係</text>

  <!-- Arrow 1 -->
  <line x1="170" y1="150" x2="210" y2="150" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-6 -5,5 5,5" fill="#4CC9F0" transform="translate(210,150) rotate(90)"/>

  <!-- Step 2: Dockerfile -->
  <rect x="210" y="60" width="200" height="180" rx="8" fill="#0f3460" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="310" y="83" fill="#F77F00" font-size="13" font-weight="bold" text-anchor="middle" font-family="sans-serif">Dockerfile</text>
  <rect x="220" y="95" width="180" height="130" rx="4" fill="#0a1a2e"/>
  <text x="230" y="115" fill="#06D6A0" font-size="10" font-family="monospace">FROM sagemaker-tf:2.12</text>
  <text x="230" y="133" fill="#aaaaaa" font-size="10" font-family="monospace"># 依存関係インストール</text>
  <text x="230" y="151" fill="#4CC9F0" font-size="10" font-family="monospace">RUN pip install -r req.txt</text>
  <text x="230" y="169" fill="#aaaaaa" font-size="10" font-family="monospace"># スクリプトコピー</text>
  <text x="230" y="187" fill="#4CC9F0" font-size="10" font-family="monospace">COPY train.py /opt/ml/code/</text>
  <text x="230" y="205" fill="#F77F00" font-size="10" font-family="monospace">ENV SAGEMAKER_PROGRAM train.py</text>

  <!-- Arrow 2 -->
  <line x1="410" y1="150" x2="450" y2="150" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-6 -5,5 5,5" fill="#4CC9F0" transform="translate(450,150) rotate(90)"/>

  <!-- Step 3: ECR -->
  <rect x="450" y="80" width="155" height="140" rx="8" fill="#0a2545" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="527" y="103" fill="#06D6A0" font-size="13" font-weight="bold" text-anchor="middle" font-family="sans-serif">Amazon ECR</text>
  <text x="527" y="125" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">docker build .</text>
  <text x="527" y="143" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">docker push</text>
  <text x="527" y="163" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">イメージURI:</text>
  <text x="527" y="178" fill="#4CC9F0" font-size="9" text-anchor="middle" font-family="monospace">123.dkr.ecr.us-east</text>
  <text x="527" y="193" fill="#4CC9F0" font-size="9" text-anchor="middle" font-family="monospace">.amazonaws.com/img:v1</text>
  <text x="527" y="212" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">プライベートリポジトリ</text>

  <!-- Arrow 3 -->
  <line x1="605" y1="150" x2="645" y2="150" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-6 -5,5 5,5" fill="#4CC9F0" transform="translate(645,150) rotate(90)"/>

  <!-- Step 4: Training Job -->
  <rect x="645" y="65" width="140" height="170" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="715" y="90" fill="#4CC9F0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker</text>
  <text x="715" y="106" fill="#4CC9F0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">Training Job</text>
  <text x="715" y="130" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">カスタム</text>
  <text x="715" y="146" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">イメージで起動</text>
  <text x="715" y="168" fill="#06D6A0" font-size="10" text-anchor="middle" font-family="sans-serif">スケーリング自動</text>
  <text x="715" y="184" fill="#06D6A0" font-size="10" text-anchor="middle" font-family="sans-serif">マネージド実行</text>
  <text x="715" y="204" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Spot Training対応</text>
  <text x="715" y="224" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">最大72時間</text>

  <!-- Bottom: Key paths -->
  <rect x="15" y="265" width="770" height="215" rx="10" fill="#0f1e35"/>
  <text x="400" y="290" fill="#4CC9F0" font-size="14" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker コンテナ規約</text>

  <!-- Paths -->
  <rect x="25" y="302" width="370" height="85" rx="6" fill="#1e3a5f"/>
  <text x="210" y="322" fill="#F77F00" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">必須ディレクトリ構造</text>
  <text x="35" y="342" fill="#06D6A0" font-size="11" font-family="monospace">/opt/ml/input/data/</text>
  <text x="35" y="358" fill="#aaaaaa" font-size="11" font-family="sans-serif">    学習データ (チャネル別)</text>
  <text x="35" y="374" fill="#06D6A0" font-size="11" font-family="monospace">/opt/ml/model/</text>
  <text x="35" y="390" fill="#aaaaaa" font-size="11" font-family="sans-serif">    保存したモデルアーティファクト → S3</text>

  <!-- Env vars -->
  <rect x="410" y="302" width="370" height="85" rx="6" fill="#1e3a5f"/>
  <text x="595" y="322" fill="#F77F00" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">環境変数</text>
  <text x="420" y="342" fill="#4CC9F0" font-size="11" font-family="monospace">SM_CHANNEL_TRAINING</text>
  <text x="420" y="358" fill="#aaaaaa" font-size="11" font-family="sans-serif">    学習データのパス</text>
  <text x="420" y="374" fill="#4CC9F0" font-size="11" font-family="monospace">SM_MODEL_DIR</text>
  <text x="420" y="390" fill="#aaaaaa" font-size="11" font-family="sans-serif">    モデル保存先パス</text>

  <!-- Toolkit note -->
  <rect x="25" y="397" width="760" height="70" rx="6" fill="#0a2545"/>
  <text x="400" y="420" fill="#4CC9F0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker Training Toolkit</text>
  <text x="400" y="440" fill="#aaaaaa" font-size="11" text-anchor="middle" font-family="sans-serif">pip install sagemaker-training — エントリーポイント自動解決</text>
  <text x="400" y="458" fill="#aaaaaa" font-size="11" text-anchor="middle" font-family="sans-serif">ハイパーパラメータをJSONファイルから自動読み込み: /opt/ml/input/config/hyperparameters.json</text>
</svg>
