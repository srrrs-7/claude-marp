<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#0d1b2a"/>
  <text x="400" y="28" fill="#4CC9F0" font-size="18" font-weight="bold" text-anchor="middle" font-family="sans-serif">データ検証パイプライン設計</text>

  <!-- SageMaker Pipelines wrapper -->
  <rect x="20" y="42" width="760" height="380" rx="12" fill="none" stroke="#4CC9F0" stroke-width="2" stroke-dasharray="8,5"/>
  <text x="110" y="60" fill="#4CC9F0" font-size="12" font-style="italic" font-family="sans-serif">SageMaker Pipelines</text>

  <!-- Step 1 -->
  <rect x="35" y="75" width="115" height="75" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="92" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">1. データ取り込み</text>
  <text x="92" y="117" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">AWS Glue</text>
  <text x="92" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Amazon Kinesis</text>

  <!-- Arrow -->
  <line x1="150" y1="112" x2="182" y2="112" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(182,112) rotate(90)"/>

  <!-- Step 2 -->
  <rect x="182" y="75" width="115" height="75" rx="8" fill="#0f3460" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="239" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">2. スキーマ検証</text>
  <text x="239" y="117" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Glue Schema</text>
  <text x="239" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Registry</text>

  <!-- Arrow -->
  <line x1="297" y1="112" x2="329" y2="112" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(329,112) rotate(90)"/>

  <!-- Step 3 -->
  <rect x="329" y="75" width="115" height="75" rx="8" fill="#0a2545" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="386" y="92" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">3. 統計的</text>
  <text x="386" y="107" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">プロファイリング</text>
  <text x="386" y="127" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Data Wrangler</text>
  <text x="386" y="141" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">ydata-profiling</text>

  <!-- Arrow -->
  <line x1="444" y1="112" x2="476" y2="112" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(476,112) rotate(90)"/>

  <!-- Step 4 -->
  <rect x="476" y="75" width="115" height="75" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="533" y="92" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">4. 品質ルール</text>
  <text x="533" y="107" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">検証</text>
  <text x="533" y="127" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Deequ</text>
  <text x="533" y="141" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Great Expectations</text>

  <!-- Arrow -->
  <line x1="591" y1="112" x2="623" y2="112" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(623,112) rotate(90)"/>

  <!-- Step 5 -->
  <rect x="623" y="75" width="145" height="75" rx="8" fill="#0f3460" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="695" y="92" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">5. ドリフト検出</text>
  <text x="695" y="112" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Model Monitor</text>
  <text x="695" y="128" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">Baseline 比較</text>
  <text x="695" y="143" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">KS検定 / PSI</text>

  <!-- Down arrow to decision -->
  <line x1="695" y1="150" x2="695" y2="215" stroke="#4CC9F0" stroke-width="1.5"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(695,215) rotate(180)"/>

  <!-- Decision diamond -->
  <polygon points="695,215 770,255 695,295 620,255" fill="#0f3460" stroke="#4CC9F0" stroke-width="2"/>
  <text x="695" y="250" fill="#ffffff" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">品質OK？</text>

  <!-- YES path (left) -->
  <line x1="620" y1="255" x2="535" y2="255" stroke="#06D6A0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#06D6A0" transform="translate(535,255) rotate(-90)"/>
  <text x="580" y="245" fill="#06D6A0" font-size="11" text-anchor="middle" font-family="sans-serif">Yes</text>

  <!-- Feature Store / Training box (left top) -->
  <rect x="360" y="215" width="175" height="80" rx="8" fill="#0a2a1a"/>
  <text x="447" y="245" fill="#06D6A0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">Feature Store /</text>
  <text x="447" y="263" fill="#06D6A0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">学習パイプライン</text>
  <text x="447" y="282" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">SageMaker Feature Store</text>

  <!-- NO path (down) -->
  <line x1="695" y1="295" x2="695" y2="340" stroke="#E63946" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#E63946" transform="translate(695,340) rotate(180)"/>
  <text x="710" y="320" fill="#E63946" font-size="11" font-family="sans-serif">No</text>

  <!-- Quarantine box (down) -->
  <rect x="600" y="340" width="185" height="60" rx="8" fill="#2a0a0a"/>
  <text x="692" y="363" fill="#E63946" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">隔離バケット + アラート</text>
  <text x="692" y="382" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">S3 quarantine/ + SNS通知</text>

  <!-- Pipeline monitoring note -->
  <rect x="20" y="435" width="760" height="50" rx="8" fill="#1e3a5f"/>
  <text x="400" y="456" fill="#4CC9F0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">エンドツーエンド自動化</text>
  <text x="400" y="476" fill="#aaaaaa" font-size="11" text-anchor="middle" font-family="sans-serif">データ取り込み → 検証 → 品質ゲート → 学習開始まで完全自動実行</text>
</svg>
