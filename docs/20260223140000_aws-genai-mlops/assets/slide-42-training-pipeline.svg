<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#0d1b2a"/>
  <text x="400" y="28" fill="#4CC9F0" font-size="18" font-weight="bold" text-anchor="middle" font-family="sans-serif">学習パイプライン全体像</text>

  <!-- SageMaker Pipelines wrapper -->
  <rect x="15" y="42" width="770" height="380" rx="12" fill="none" stroke="#4CC9F0" stroke-width="2" stroke-dasharray="8,5"/>
  <text x="105" y="58" fill="#4CC9F0" font-size="12" font-style="italic" font-family="sans-serif">SageMaker Pipelines</text>

  <!-- Step 1: Feature Store / S3 -->
  <rect x="28" y="75" width="115" height="90" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="85" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Feature Store</text>
  <text x="85" y="114" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">/ S3</text>
  <text x="85" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">データ入力</text>
  <text x="85" y="148" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">特徴量取得</text>

  <!-- Arrow 1→2 -->
  <line x1="143" y1="120" x2="173" y2="120" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(173,120) rotate(90)"/>

  <!-- Step 2: Processing -->
  <rect x="173" y="75" width="120" height="90" rx="8" fill="#0f3460" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="233" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker</text>
  <text x="233" y="114" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Processing</text>
  <text x="233" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">前処理・特徴</text>
  <text x="233" y="148" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">エンジニアリング</text>

  <!-- Arrow 2→3 -->
  <line x1="293" y1="120" x2="323" y2="120" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(323,120) rotate(90)"/>

  <!-- Step 3: Training Job -->
  <rect x="323" y="75" width="120" height="90" rx="8" fill="#0a2545" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="383" y="98" fill="#F77F00" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker</text>
  <text x="383" y="114" fill="#F77F00" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Training Job</text>
  <text x="383" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">モデル学習</text>
  <text x="383" y="148" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">GPU/CPU クラスタ</text>

  <!-- Arrow 3→4 -->
  <line x1="443" y1="120" x2="473" y2="120" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(473,120) rotate(90)"/>

  <!-- Step 4: Experiments -->
  <rect x="473" y="75" width="115" height="90" rx="8" fill="#1e3a5f" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="530" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">SageMaker</text>
  <text x="530" y="114" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Experiments</text>
  <text x="530" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">実験記録</text>
  <text x="530" y="148" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">メトリクス比較</text>

  <!-- Arrow 4→5 -->
  <line x1="588" y1="120" x2="618" y2="120" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(618,120) rotate(90)"/>

  <!-- Step 5: Model Registry -->
  <rect x="618" y="75" width="115" height="90" rx="8" fill="#0f3460" style="filter:drop-shadow(2px 2px 4px rgba(0,0,0,0.4))"/>
  <text x="675" y="98" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Model</text>
  <text x="675" y="114" fill="#4CC9F0" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">Registry</text>
  <text x="675" y="133" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">モデル登録</text>
  <text x="675" y="148" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">バージョン管理</text>

  <!-- Down arrow from Registry to Quality Gate -->
  <line x1="675" y1="165" x2="675" y2="230" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#4CC9F0" transform="translate(675,230) rotate(180)"/>

  <!-- Quality Gate diamond -->
  <polygon points="675,230 760,270 675,310 590,270" fill="#0a2545" stroke="#F77F00" stroke-width="2"/>
  <text x="675" y="264" fill="#F77F00" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">品質</text>
  <text x="675" y="280" fill="#F77F00" font-size="11" font-weight="bold" text-anchor="middle" font-family="sans-serif">ゲート</text>

  <!-- Pass path (left) -->
  <line x1="590" y1="270" x2="520" y2="270" stroke="#06D6A0" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#06D6A0" transform="translate(520,270) rotate(-90)"/>
  <text x="558" y="260" fill="#06D6A0" font-size="11" text-anchor="middle" font-family="sans-serif">Pass</text>

  <!-- Deploy box -->
  <rect x="360" y="235" width="160" height="70" rx="8" fill="#0a2a1a"/>
  <text x="440" y="264" fill="#06D6A0" font-size="13" font-weight="bold" text-anchor="middle" font-family="sans-serif">デプロイ</text>
  <text x="440" y="282" fill="#06D6A0" font-size="13" font-weight="bold" text-anchor="middle" font-family="sans-serif">パイプライン</text>
  <text x="440" y="298" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">本番 Endpoint 更新</text>

  <!-- Fail path (down) -->
  <line x1="675" y1="310" x2="675" y2="360" stroke="#E63946" stroke-width="2"/>
  <polygon points="0,-5 -4,4 4,4" fill="#E63946" transform="translate(675,360) rotate(180)"/>
  <text x="690" y="338" fill="#E63946" font-size="11" font-family="sans-serif">Fail</text>

  <!-- Fail → back to Training -->
  <rect x="590" y="360" width="170" height="50" rx="8" fill="#2a1010"/>
  <text x="675" y="381" fill="#ff8888" font-size="12" text-anchor="middle" font-family="sans-serif">パラメータ調整</text>
  <text x="675" y="398" fill="#aaaaaa" font-size="10" text-anchor="middle" font-family="sans-serif">HPO / データ拡張</text>

  <!-- Curved arrow back to Training Job -->
  <path d="M 675 410 Q 383 430 383 165" fill="none" stroke="#E63946" stroke-width="1.5" stroke-dasharray="6,4"/>
  <polygon points="0,-5 -4,4 4,4" fill="#E63946" transform="translate(383,165) rotate(0)"/>

  <!-- Bottom -->
  <rect x="15" y="435" width="770" height="50" rx="8" fill="#1e3a5f"/>
  <text x="400" y="457" fill="#4CC9F0" font-size="12" font-weight="bold" text-anchor="middle" font-family="sans-serif">完全自動化された ML パイプライン</text>
  <text x="400" y="477" fill="#aaaaaa" font-size="11" text-anchor="middle" font-family="sans-serif">データ投入から本番デプロイまで — 人手介入なしで実行可能</text>
</svg>
