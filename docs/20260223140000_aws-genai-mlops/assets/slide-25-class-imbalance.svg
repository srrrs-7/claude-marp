<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <rect width="800" height="500" fill="#0d1117"/>
  <text x="400" y="36" text-anchor="middle" font-family="sans-serif" font-size="19" font-weight="bold" fill="#ffffff">クラス不均衡対策</text>
  <!-- Top: Imbalanced bar visualization -->
  <rect x="120" y="55" width="560" height="50" rx="6" fill="#0f1e30" stroke="#1e3a5f" stroke-width="1"/>
  <rect x="130" y="63" width="484" height="34" rx="4" fill="#1e3a5f"/>
  <rect x="130" y="63" width="54" height="34" rx="4" fill="#E63946"/>
  <text x="370" y="85" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ffffff">多数クラス 90%</text>
  <text x="157" y="85" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ffffff">少数 10%</text>
  <text x="60" y="85" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#aaaaaa">データ分布:</text>
  <!-- 3 columns -->
  <!-- Left: データレベル -->
  <rect x="20" y="120" width="235" height="255" rx="8" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="2"/>
  <text x="137" y="148" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#4CC9F0">データレベル対策</text>
  <rect x="35" y="160" width="205" height="55" rx="6" fill="#0f2a45"/>
  <text x="137" y="180" text-anchor="middle" font-family="sans-serif" font-size="13" font-weight="bold" fill="#06D6A0">Oversampling</text>
  <text x="137" y="198" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">SMOTE — 合成少数クラス</text>
  <text x="137" y="213" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">ADASYN — 適応的合成</text>
  <rect x="35" y="225" width="205" height="55" rx="6" fill="#0d2540"/>
  <text x="137" y="245" text-anchor="middle" font-family="sans-serif" font-size="13" font-weight="bold" fill="#E63946">Undersampling</text>
  <text x="137" y="263" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">RandomUnderSampler</text>
  <text x="137" y="278" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">Tomek Links 除去</text>
  <rect x="35" y="290" width="205" height="72" rx="6" fill="#0f2a45"/>
  <text x="137" y="312" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">組み合わせ手法</text>
  <text x="137" y="330" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">SMOTEENN</text>
  <text x="137" y="347" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">SMOTETomek</text>
  <text x="137" y="363" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">imbalanced-learn ライブラリ</text>
  <!-- Center: アルゴリズムレベル -->
  <rect x="283" y="120" width="234" height="255" rx="8" fill="#0f3460" stroke="#F77F00" stroke-width="2"/>
  <text x="400" y="148" text-anchor="middle" font-family="sans-serif" font-size="13" font-weight="bold" fill="#F77F00">アルゴリズムレベル対策</text>
  <rect x="298" y="160" width="204" height="55" rx="6" fill="#0a2240"/>
  <text x="400" y="180" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#F77F00">クラス重み設定</text>
  <text x="400" y="198" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">class_weight='balanced'</text>
  <text x="400" y="213" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">sklearn / XGBoost: scale_pos_weight</text>
  <rect x="298" y="225" width="204" height="55" rx="6" fill="#08203c"/>
  <text x="400" y="245" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#F77F00">Focal Loss</text>
  <text x="400" y="263" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">難しいサンプルに集中</text>
  <text x="400" y="278" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">γ パラメータで難易度調整</text>
  <rect x="298" y="290" width="204" height="72" rx="6" fill="#0a2240"/>
  <text x="400" y="312" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">コスト敏感学習</text>
  <text x="400" y="330" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">誤分類コストを非対称設定</text>
  <text x="400" y="348" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">False Negative コスト大</text>
  <text x="400" y="363" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">医療診断 / 詐欺検知に重要</text>
  <!-- Right: 評価レベル -->
  <rect x="545" y="120" width="235" height="255" rx="8" fill="#0a2545" stroke="#06D6A0" stroke-width="2"/>
  <text x="662" y="148" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#06D6A0">評価レベル対策</text>
  <rect x="560" y="160" width="205" height="55" rx="6" fill="#071a35"/>
  <text x="662" y="180" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#06D6A0">適切な評価指標</text>
  <text x="662" y="198" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">F1-macro / F1-weighted</text>
  <text x="662" y="213" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">Accuracy は不適切</text>
  <rect x="560" y="225" width="205" height="55" rx="6" fill="#061528"/>
  <text x="662" y="245" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#4CC9F0">PR曲線</text>
  <text x="662" y="263" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">Precision-Recall AUC</text>
  <text x="662" y="278" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">ROC-AUCより不均衡に頑健</text>
  <rect x="560" y="290" width="205" height="72" rx="6" fill="#071a35"/>
  <text x="662" y="312" text-anchor="middle" font-family="sans-serif" font-size="12" font-weight="bold" fill="#06D6A0">Matthews相関係数</text>
  <text x="662" y="332" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">MCC — TP/TN/FP/FN 全考慮</text>
  <text x="662" y="350" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#ccddee">-1〜+1 スコア</text>
  <text x="662" y="365" text-anchor="middle" font-family="sans-serif" font-size="10" fill="#aaaaaa">不均衡データに最適</text>
  <!-- Bottom bar -->
  <rect x="20" y="393" width="760" height="42" rx="6" fill="#1a2535" stroke="#E63946" stroke-width="1.5"/>
  <text x="400" y="415" text-anchor="middle" font-family="sans-serif" font-size="14" font-weight="bold" fill="#E63946">SageMaker Clarify でバイアス検出</text>
  <text x="400" y="430" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#ccddee">Class Imbalance (CI) / DPL / KL / JS 等のバイアス指標を自動計算</text>
  <!-- Extra bottom note -->
  <rect x="20" y="445" width="760" height="38" rx="6" fill="#0f1e30"/>
  <text x="400" y="462" text-anchor="middle" font-family="sans-serif" font-size="12" fill="#aaaaaa">Autopilot でも自動的に不均衡対策を検討 | XGBoost: scale_pos_weight = 負例数 / 正例数</text>
  <text x="400" y="478" text-anchor="middle" font-family="sans-serif" font-size="11" fill="#aaaaaa">閾値チューニング: predict_proba() → 0.5 以外の閾値で F1 最大化</text>
</svg>
