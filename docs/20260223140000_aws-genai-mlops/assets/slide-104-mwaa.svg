<svg viewBox="0 0 800 500" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="500" fill="#0d1b2a"/>

  <!-- Title -->
  <text x="400" y="32" font-family="Arial,sans-serif" font-size="18" font-weight="bold" fill="#4CC9F0" text-anchor="middle">Amazon MWAA — Apache Airflow ML パイプライン</text>

  <!-- MWAA Box -->
  <rect x="15" y="50" width="240" height="380" rx="10" fill="#1a2a40" stroke="#4CC9F0" stroke-width="2"/>
  <text x="135" y="76" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#4CC9F0" text-anchor="middle">Amazon MWAA</text>

  <rect x="28" y="85" width="214" height="44" rx="5" fill="#1e3a5f"/>
  <text x="135" y="103" font-family="Arial,sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">DAG定義 (Python)</text>
  <text x="135" y="119" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">S3バケットにDAGファイルを配置</text>

  <rect x="28" y="137" width="214" height="44" rx="5" fill="#0f3460"/>
  <text x="135" y="155" font-family="Arial,sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">スケジューリング</text>
  <text x="135" y="171" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">cron / timedelta 形式</text>

  <rect x="28" y="189" width="214" height="44" rx="5" fill="#0a2545"/>
  <text x="135" y="207" font-family="Arial,sans-serif" font-size="10" fill="#cccccc" text-anchor="middle">依存関係管理</text>
  <text x="135" y="223" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">タスク間の依存を自動解決</text>

  <rect x="28" y="241" width="214" height="64" rx="5" fill="#1e3a5f"/>
  <text x="135" y="259" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#4CC9F0" text-anchor="middle">コンポーネント</text>
  <text x="135" y="275" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">Webサーバー (UI)</text>
  <text x="135" y="289" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">スケジューラ (DAG解析)</text>
  <text x="135" y="303" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">ワーカー (タスク実行)</text>

  <rect x="28" y="313" width="214" height="54" rx="5" fill="#06D6A0" fill-opacity="0.15" stroke="#06D6A0" stroke-width="1"/>
  <text x="135" y="332" font-family="Arial,sans-serif" font-size="9" fill="#06D6A0" text-anchor="middle">マネージド (インフラ管理不要)</text>
  <text x="135" y="348" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">VPC内に自動デプロイ</text>
  <text x="135" y="364" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">Auto Scaling ワーカー</text>

  <!-- DAG Visualization Center -->
  <rect x="275" y="50" width="275" height="380" rx="10" fill="#1a2a40" stroke="#06D6A0" stroke-width="2"/>
  <text x="412" y="76" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#06D6A0" text-anchor="middle">DAG ワークフロー</text>

  <!-- DAG nodes -->
  <!-- extract_data -->
  <rect x="292" y="92" width="120" height="36" rx="5" fill="#1e3a5f" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="352" y="108" font-family="Arial,sans-serif" font-size="10" fill="#4CC9F0" text-anchor="middle">extract_data</text>
  <text x="352" y="121" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">S3SensorOperator</text>

  <!-- Arrow extract → preprocess -->
  <line x1="352" y1="128" x2="352" y2="150" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#4CC9F0" transform="translate(352,152)"/>

  <!-- preprocess -->
  <rect x="292" y="153" width="120" height="36" rx="5" fill="#0f3460" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="352" y="169" font-family="Arial,sans-serif" font-size="10" fill="#4CC9F0" text-anchor="middle">preprocess</text>
  <text x="352" y="182" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">SageMakerProcessing</text>

  <!-- Arrow preprocess → train_model -->
  <line x1="352" y1="189" x2="352" y2="211" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#4CC9F0" transform="translate(352,213)"/>

  <!-- train_model -->
  <rect x="292" y="214" width="120" height="36" rx="5" fill="#0a2545" stroke="#4CC9F0" stroke-width="1.5"/>
  <text x="352" y="230" font-family="Arial,sans-serif" font-size="10" fill="#4CC9F0" text-anchor="middle">train_model</text>
  <text x="352" y="243" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">SageMakerTraining</text>

  <!-- Arrow train → evaluate -->
  <line x1="352" y1="250" x2="352" y2="272" stroke="#4CC9F0" stroke-width="2"/>
  <polygon points="0,-5 -5,5 5,5" fill="#4CC9F0" transform="translate(352,274)"/>

  <!-- evaluate -->
  <rect x="292" y="275" width="120" height="36" rx="5" fill="#1e3a5f" stroke="#06D6A0" stroke-width="1.5"/>
  <text x="352" y="291" font-family="Arial,sans-serif" font-size="10" fill="#06D6A0" text-anchor="middle">evaluate</text>
  <text x="352" y="304" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">BranchPython</text>

  <!-- branch arrow evaluate → deploy + notify -->
  <line x1="352" y1="311" x2="352" y2="330" stroke="#06D6A0" stroke-width="2"/>
  <line x1="352" y1="330" x2="305" y2="330" stroke="#06D6A0" stroke-width="1.5"/>
  <line x1="352" y1="330" x2="420" y2="330" stroke="#06D6A0" stroke-width="1.5"/>

  <!-- deploy -->
  <rect x="285" y="335" width="100" height="36" rx="5" fill="#06D6A0" fill-opacity="0.25" stroke="#06D6A0" stroke-width="1.5"/>
  <text x="335" y="350" font-family="Arial,sans-serif" font-size="9" fill="#06D6A0" text-anchor="middle">deploy</text>
  <text x="335" y="363" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">Endpoint更新</text>
  <polygon points="0,-5 -5,5 5,5" fill="#06D6A0" transform="translate(335,337) rotate(0)"/>

  <!-- notify -->
  <rect x="397" y="335" width="100" height="36" rx="5" fill="#F77F00" fill-opacity="0.25" stroke="#F77F00" stroke-width="1.5"/>
  <text x="447" y="350" font-family="Arial,sans-serif" font-size="9" fill="#F77F00" text-anchor="middle">notify</text>
  <text x="447" y="363" font-family="Arial,sans-serif" font-size="8" fill="#aaaaaa" text-anchor="middle">SNS通知</text>
  <polygon points="0,-5 -5,5 5,5" fill="#F77F00" transform="translate(447,337) rotate(0)"/>
  <line x1="412" y1="330" x2="447" y2="335" stroke="#F77F00" stroke-width="1.5"/>
  <line x1="305" y1="330" x2="335" y2="335" stroke="#06D6A0" stroke-width="1.5"/>

  <!-- Integrations Panel -->
  <rect x="565" y="50" width="220" height="380" rx="10" fill="#1a2a40" stroke="#F77F00" stroke-width="1.5"/>
  <text x="675" y="76" font-family="Arial,sans-serif" font-size="13" font-weight="bold" fill="#F77F00" text-anchor="middle">Operator 統合</text>

  <rect x="577" y="88" width="196" height="44" rx="5" fill="#1e3a5f"/>
  <text x="675" y="106" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#4CC9F0" text-anchor="middle">SageMakerTraining</text>
  <text x="675" y="122" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">Operator</text>

  <rect x="577" y="140" width="196" height="44" rx="5" fill="#0f3460"/>
  <text x="675" y="158" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#4CC9F0" text-anchor="middle">SageMakerTransform</text>
  <text x="675" y="174" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">Operator</text>

  <rect x="577" y="192" width="196" height="44" rx="5" fill="#0a2545"/>
  <text x="675" y="210" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#4CC9F0" text-anchor="middle">SageMakerEndpoint</text>
  <text x="675" y="226" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">Operator</text>

  <rect x="577" y="244" width="196" height="44" rx="5" fill="#1e3a5f"/>
  <text x="675" y="262" font-family="Arial,sans-serif" font-size="10" font-weight="bold" fill="#4CC9F0" text-anchor="middle">S3Sensor / S3Hook</text>
  <text x="675" y="278" font-family="Arial,sans-serif" font-size="9" fill="#aaaaaa" text-anchor="middle">ファイル到着待機</text>

  <rect x="577" y="296" width="196" height="80" rx="5" fill="#F77F00" fill-opacity="0.1" stroke="#F77F00" stroke-width="1"/>
  <text x="675" y="318" font-family="Arial,sans-serif" font-size="11" font-weight="bold" fill="#F77F00" text-anchor="middle">ユースケース</text>
  <text x="675" y="338" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">複雑なMLワークフロー</text>
  <text x="675" y="354" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">既存Airflow資産の活用</text>
  <text x="675" y="370" font-family="Arial,sans-serif" font-size="9" fill="#cccccc" text-anchor="middle">多様な外部サービス統合</text>

  <!-- Bottom note -->
  <text x="400" y="448" font-family="Arial,sans-serif" font-size="10" fill="#888888" text-anchor="middle">MWAA = Managed Workflows for Apache Airflow | S3にDAGをアップロードするだけで自動反映</text>
</svg>
