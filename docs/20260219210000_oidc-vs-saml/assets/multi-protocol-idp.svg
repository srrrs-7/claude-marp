<svg viewBox="0 0 1000 480" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0">
  <rect width="1000" height="480" fill="#1e1e2e"/>

  <!-- Title -->
  <text x="500" y="22" text-anchor="middle" font-size="15" font-weight="bold" fill="#cdd6f4" font-family="sans-serif">マルチプロトコル対応 IdP — ハイブリッド構成</text>
  <text x="500" y="40" text-anchor="middle" font-size="11" fill="#6c7086" font-family="sans-serif">エンタープライズ移行期における SAML + OIDC 並存パターン</text>

  <!-- Central IdP -->
  <rect x="360" y="55" width="280" height="100" fill="#313244" stroke="#cba6f7" stroke-width="2.5" rx="12"/>
  <text x="500" y="88" text-anchor="middle" font-size="16" font-weight="bold" fill="#cba6f7" font-family="sans-serif">Identity Provider</text>
  <text x="500" y="108" text-anchor="middle" font-size="12" fill="#cdd6f4" font-family="sans-serif">Okta / Azure AD / Keycloak</text>
  <text x="500" y="126" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">User Directory + MFA + Policies</text>
  <text x="500" y="144" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">SAML 2.0 + OIDC/OAuth 2.0 対応</text>

  <!-- SAML clients (left side) -->
  <!-- Enterprise App 1 -->
  <rect x="20" y="52" width="200" height="56" fill="#2a1a2e" stroke="#89b4fa" stroke-width="1.5" rx="6"/>
  <text x="120" y="76" text-anchor="middle" font-size="12" font-weight="bold" fill="#89b4fa" font-family="sans-serif">Salesforce / SAP</text>
  <text x="120" y="94" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Enterprise SaaS (SAML SP)</text>
  <line x1="220" y1="80" x2="355" y2="105" stroke="#89b4fa" stroke-width="1.5"/>
  <polygon points="352,99 360,108 364,97" fill="#89b4fa"/>
  <text x="275" y="90" text-anchor="middle" font-size="10" fill="#89b4fa" font-family="sans-serif">SAML 2.0</text>

  <!-- Enterprise App 2 -->
  <rect x="20" y="140" width="200" height="56" fill="#2a1a2e" stroke="#89b4fa" stroke-width="1.5" rx="6"/>
  <text x="120" y="164" text-anchor="middle" font-size="12" font-weight="bold" fill="#89b4fa" font-family="sans-serif">Office 365 / G Suite</text>
  <text x="120" y="182" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Cloud Productivity (SAML)</text>
  <line x1="220" y1="168" x2="355" y2="130" stroke="#89b4fa" stroke-width="1.5"/>
  <polygon points="354,124 361,133 366,122" fill="#89b4fa"/>
  <text x="278" y="148" text-anchor="middle" font-size="10" fill="#89b4fa" font-family="sans-serif">SAML 2.0</text>

  <!-- Legacy App -->
  <rect x="20" y="228" width="200" height="56" fill="#2a1a2e" stroke="#89b4fa" stroke-width="1.5" rx="6"/>
  <text x="120" y="252" text-anchor="middle" font-size="12" font-weight="bold" fill="#89b4fa" font-family="sans-serif">内製 Web アプリ</text>
  <text x="120" y="270" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Legacy System (SAML SP)</text>
  <line x1="220" y1="256" x2="355" y2="175" stroke="#89b4fa" stroke-width="1.5" stroke-dasharray="6,3"/>
  <polygon points="354,169 361,178 366,167" fill="#89b4fa"/>
  <text x="270" y="215" text-anchor="middle" font-size="10" fill="#89b4fa" font-family="sans-serif">SAML (legacy)</text>

  <!-- OIDC clients (right side) -->
  <!-- SPA -->
  <rect x="780" y="52" width="200" height="56" fill="#1a2a1a" stroke="#a6e3a1" stroke-width="1.5" rx="6"/>
  <text x="880" y="76" text-anchor="middle" font-size="12" font-weight="bold" fill="#a6e3a1" font-family="sans-serif">React / Vue SPA</text>
  <text x="880" y="94" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Frontend (OIDC + PKCE)</text>
  <line x1="780" y1="80" x2="645" y2="105" stroke="#a6e3a1" stroke-width="1.5"/>
  <polygon points="649,99 641,108 637,97" fill="#a6e3a1"/>
  <text x="720" y="90" text-anchor="middle" font-size="10" fill="#a6e3a1" font-family="sans-serif">OIDC</text>

  <!-- Mobile -->
  <rect x="780" y="140" width="200" height="56" fill="#1a2a1a" stroke="#a6e3a1" stroke-width="1.5" rx="6"/>
  <text x="880" y="164" text-anchor="middle" font-size="12" font-weight="bold" fill="#a6e3a1" font-family="sans-serif">iOS / Android</text>
  <text x="880" y="182" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Mobile App (PKCE)</text>
  <line x1="780" y1="168" x2="645" y2="130" stroke="#a6e3a1" stroke-width="1.5"/>
  <polygon points="648,124 641,133 637,122" fill="#a6e3a1"/>
  <text x="720" y="148" text-anchor="middle" font-size="10" fill="#a6e3a1" font-family="sans-serif">OIDC</text>

  <!-- Microservices -->
  <rect x="780" y="228" width="200" height="56" fill="#1a2a1a" stroke="#a6e3a1" stroke-width="1.5" rx="6"/>
  <text x="880" y="252" text-anchor="middle" font-size="12" font-weight="bold" fill="#a6e3a1" font-family="sans-serif">REST API / Service</text>
  <text x="880" y="270" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">Backend (OAuth 2.0)</text>
  <line x1="780" y1="256" x2="645" y2="175" stroke="#a6e3a1" stroke-width="1.5"/>
  <polygon points="648,169 641,178 637,167" fill="#a6e3a1"/>
  <text x="720" y="215" text-anchor="middle" font-size="10" fill="#a6e3a1" font-family="sans-serif">OAuth 2.0</text>

  <!-- User Directory (bottom) -->
  <rect x="370" y="185" width="260" height="50" fill="#2a2a2a" stroke="#f9e2af" stroke-width="1.5" rx="6"/>
  <text x="500" y="208" text-anchor="middle" font-size="12" font-weight="bold" fill="#f9e2af" font-family="sans-serif">User Store</text>
  <text x="500" y="226" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">LDAP / Active Directory / Database</text>
  <line x1="500" y1="185" x2="500" y2="155" stroke="#f9e2af" stroke-width="1.5" stroke-dasharray="4,3"/>
  <polygon points="495,158 500,148 505,158" fill="#f9e2af"/>

  <!-- SAML bridge label -->
  <text x="120" y="320" text-anchor="middle" font-size="11" fill="#89b4fa" font-family="sans-serif">SAML SP 側</text>
  <rect x="20" y="295" width="200" height="30" fill="#181825" stroke="#89b4fa" stroke-width="1" rx="4"/>
  <text x="120" y="314" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">既存システム・エンタープライズ SaaS</text>

  <!-- OIDC clients label -->
  <text x="880" y="320" text-anchor="middle" font-size="11" fill="#a6e3a1" font-family="sans-serif">OIDC RP 側</text>
  <rect x="780" y="295" width="200" height="30" fill="#181825" stroke="#a6e3a1" stroke-width="1" rx="4"/>
  <text x="880" y="314" text-anchor="middle" font-size="10" fill="#a6adc8" font-family="sans-serif">新規開発・クラウドネイティブ</text>

  <!-- Bottom explanation -->
  <rect x="20" y="345" width="960" height="120" fill="#181825" stroke="#45475a" rx="8"/>
  <text x="500" y="363" text-anchor="middle" font-size="13" font-weight="bold" fill="#cdd6f4" font-family="sans-serif">マルチプロトコル構成のメリット</text>
  <rect x="30" y="372" width="290" height="82" fill="#2a1a2e" stroke="#89b4fa" rx="4"/>
  <text x="175" y="391" text-anchor="middle" font-size="11" font-weight="bold" fill="#89b4fa" font-family="sans-serif">段階的移行が可能</text>
  <text x="40" y="409" font-size="10" fill="#a6adc8" font-family="sans-serif">• レガシー SP は SAML のまま維持</text>
  <text x="40" y="425" font-size="10" fill="#a6adc8" font-family="sans-serif">• 新規開発は OIDC で実装</text>
  <text x="40" y="441" font-size="10" fill="#a6adc8" font-family="sans-serif">• 1つの IdP でユーザー管理を一元化</text>
  <text x="40" y="450" font-size="10" fill="#6c7086" font-family="sans-serif">→ リスクを分散しながら移行</text>
  <rect x="335" y="372" width="290" height="82" fill="#1a2a1a" stroke="#a6e3a1" rx="4"/>
  <text x="480" y="391" text-anchor="middle" font-size="11" font-weight="bold" fill="#a6e3a1" font-family="sans-serif">運用の一元化</text>
  <text x="345" y="409" font-size="10" fill="#a6adc8" font-family="sans-serif">• ユーザー/グループ管理が1箇所</text>
  <text x="345" y="425" font-size="10" fill="#a6adc8" font-family="sans-serif">• MFA ポリシーを統一適用</text>
  <text x="345" y="441" font-size="10" fill="#a6adc8" font-family="sans-serif">• 監査ログの一元収集</text>
  <text x="345" y="450" font-size="10" fill="#6c7086" font-family="sans-serif">→ コンプライアンス対応が楽</text>
  <rect x="640" y="372" width="330" height="82" fill="#2a2a1a" stroke="#f9e2af" rx="4"/>
  <text x="805" y="391" text-anchor="middle" font-size="11" font-weight="bold" fill="#f9e2af" font-family="sans-serif">主要 IdP の対応状況</text>
  <text x="650" y="409" font-size="10" fill="#a6adc8" font-family="sans-serif">• Azure AD: SAML 2.0 + OIDC/OAuth 2.0</text>
  <text x="650" y="425" font-size="10" fill="#a6adc8" font-family="sans-serif">• Okta: SAML 2.0 + OIDC + WS-Fed</text>
  <text x="650" y="441" font-size="10" fill="#a6adc8" font-family="sans-serif">• Keycloak: SAML 2.0 + OIDC (OSS)</text>
  <text x="650" y="455" font-size="10" fill="#6c7086" font-family="sans-serif">→ 既存環境に合わせて選択</text>
</svg>
