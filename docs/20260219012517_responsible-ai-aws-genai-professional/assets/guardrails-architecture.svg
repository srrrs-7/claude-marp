<svg viewBox="0 0 960 440" xmlns="http://www.w3.org/2000/svg" style="max-height:70vh;width:auto;display:block;margin:0 auto;letter-spacing:0;font-family:'Helvetica Neue',Arial,sans-serif">
  <rect width="960" height="440" fill="#f8fafc" rx="12"/>
  <text x="480" y="36" text-anchor="middle" font-size="20" font-weight="bold" fill="#1e293b">Amazon Bedrock Guardrails フロー</text>
  <!-- User -->
  <rect x="30" y="160" width="120" height="70" rx="10" fill="#dbeafe" stroke="#3b82f6" stroke-width="2"/>
  <text x="90" y="192" text-anchor="middle" font-size="14" font-weight="bold" fill="#1e40af">ユーザー</text>
  <text x="90" y="212" text-anchor="middle" font-size="12" fill="#1e40af">User Input</text>
  <!-- Arrow to Input Guardrails -->
  <line x1="150" y1="195" x2="195" y2="195" stroke="#64748b" stroke-width="2"/>
  <polygon points="199,195 191,190 191,200" fill="#64748b"/>
  <!-- Input Guardrails -->
  <rect x="200" y="100" width="180" height="190" rx="12" fill="#FF9900" style="filter:drop-shadow(0 4px 12px rgba(255,153,0,0.3))"/>
  <text x="290" y="128" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Guardrails</text>
  <text x="290" y="147" text-anchor="middle" font-size="13" font-weight="bold" fill="white">入力チェック</text>
  <text x="215" y="172" font-size="11" fill="#fff3e0">✓ トピックフィルター</text>
  <text x="215" y="190" font-size="11" fill="#fff3e0">✓ コンテンツフィルター</text>
  <text x="215" y="208" font-size="11" fill="#fff3e0">✓ PII マスキング</text>
  <text x="215" y="226" font-size="11" fill="#fff3e0">✓ ワードフィルター</text>
  <text x="215" y="244" font-size="11" fill="#fff3e0">✓ プロンプト攻撃検出</text>
  <!-- Blocked input -->
  <rect x="200" y="308" width="180" height="45" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="1.5"/>
  <text x="290" y="328" text-anchor="middle" font-size="11" font-weight="bold" fill="#991b1b">ブロック</text>
  <text x="290" y="344" text-anchor="middle" font-size="10" fill="#7f1d1d">→ ユーザーにメッセージ返却</text>
  <line x1="290" y1="290" x2="290" y2="308" stroke="#dc2626" stroke-width="1.5"/>
  <polygon points="290,312 285,304 295,304" fill="#dc2626"/>
  <text x="330" y="302" font-size="10" fill="#dc2626">違反検出</text>
  <!-- Arrow to LLM -->
  <line x1="380" y1="195" x2="430" y2="195" stroke="#64748b" stroke-width="2"/>
  <polygon points="434,195 426,190 426,200" fill="#64748b"/>
  <text x="405" y="185" text-anchor="middle" font-size="10" fill="#16a34a">通過</text>
  <!-- LLM (Foundation Model) -->
  <rect x="430" y="130" width="160" height="130" rx="12" fill="#1e293b" style="filter:drop-shadow(0 4px 16px rgba(0,0,0,0.3))"/>
  <text x="510" y="170" text-anchor="middle" font-size="13" font-weight="bold" fill="#FF9900">Foundation</text>
  <text x="510" y="190" text-anchor="middle" font-size="13" font-weight="bold" fill="#FF9900">Model</text>
  <text x="510" y="218" text-anchor="middle" font-size="11" fill="#94a3b8">Claude / Llama</text>
  <text x="510" y="236" text-anchor="middle" font-size="11" fill="#94a3b8">Titan / Mistral</text>
  <!-- Arrow to Output Guardrails -->
  <line x1="590" y1="195" x2="640" y2="195" stroke="#64748b" stroke-width="2"/>
  <polygon points="644,195 636,190 636,200" fill="#64748b"/>
  <!-- Output Guardrails -->
  <rect x="645" y="100" width="180" height="190" rx="12" fill="#2563eb" style="filter:drop-shadow(0 4px 12px rgba(37,99,235,0.3))"/>
  <text x="735" y="128" text-anchor="middle" font-size="13" font-weight="bold" fill="white">Guardrails</text>
  <text x="735" y="147" text-anchor="middle" font-size="13" font-weight="bold" fill="white">出力チェック</text>
  <text x="660" y="172" font-size="11" fill="#dbeafe">✓ コンテンツフィルター</text>
  <text x="660" y="190" font-size="11" fill="#dbeafe">✓ PII マスキング</text>
  <text x="660" y="208" font-size="11" fill="#dbeafe">✓ グラウンディング検証</text>
  <text x="660" y="226" font-size="11" fill="#dbeafe">✓ ワードフィルター</text>
  <text x="660" y="244" font-size="11" fill="#dbeafe">✓ 有害コンテンツ除去</text>
  <!-- Blocked output -->
  <rect x="645" y="308" width="180" height="45" rx="8" fill="#fee2e2" stroke="#dc2626" stroke-width="1.5"/>
  <text x="735" y="328" text-anchor="middle" font-size="11" font-weight="bold" fill="#991b1b">ブロック</text>
  <text x="735" y="344" text-anchor="middle" font-size="10" fill="#7f1d1d">→ 代替メッセージを返却</text>
  <line x1="735" y1="290" x2="735" y2="308" stroke="#dc2626" stroke-width="1.5"/>
  <polygon points="735,312 730,304 740,304" fill="#dc2626"/>
  <!-- Arrow to User response -->
  <line x1="825" y1="195" x2="875" y2="195" stroke="#64748b" stroke-width="2"/>
  <polygon points="879,195 871,190 871,200" fill="#64748b"/>
  <!-- Response -->
  <rect x="875" y="160" width="55" height="70" rx="10" fill="#dcfce7" stroke="#16a34a" stroke-width="2"/>
  <text x="902" y="193" text-anchor="middle" font-size="11" font-weight="bold" fill="#166534">安全な</text>
  <text x="902" y="211" text-anchor="middle" font-size="11" fill="#166534">応答</text>
  <!-- Filter categories legend -->
  <rect x="30" y="370" width="900" height="55" rx="8" fill="#f1f5f9" stroke="#e2e8f0" stroke-width="1.5"/>
  <text x="48" y="395" font-size="12" font-weight="bold" fill="#475569">フィルタータイプ:</text>
  <rect x="190" y="382" width="12" height="12" rx="3" fill="#ef4444"/>
  <text x="208" y="393" font-size="11" fill="#475569">Hate（憎悪）</text>
  <rect x="310" y="382" width="12" height="12" rx="3" fill="#f97316"/>
  <text x="328" y="393" font-size="11" fill="#475569">Insults（侮辱）</text>
  <rect x="430" y="382" width="12" height="12" rx="3" fill="#8b5cf6"/>
  <text x="448" y="393" font-size="11" fill="#475569">Sexual（性的）</text>
  <rect x="560" y="382" width="12" height="12" rx="3" fill="#dc2626"/>
  <text x="578" y="393" font-size="11" fill="#475569">Violence（暴力）</text>
  <rect x="690" y="382" width="12" height="12" rx="3" fill="#0891b2"/>
  <text x="708" y="393" font-size="11" fill="#475569">Misconduct（不正）</text>
  <rect x="820" y="382" width="12" height="12" rx="3" fill="#16a34a"/>
  <text x="838" y="393" font-size="11" fill="#475569">Prompt Attacks</text>
  <text x="480" y="415" text-anchor="middle" font-size="11" fill="#64748b">各カテゴリ: NONE / LOW / MEDIUM / HIGH の4段階で強度設定</text>
</svg>
